/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app/components/Advantages/advantages.scss":
/*!*******************************************************!*\
  !*** ./src/app/components/Advantages/advantages.scss ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Burger/burger.scss":
/*!***********************************************!*\
  !*** ./src/app/components/Burger/burger.scss ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/CardOpportunities/card-opportunities.scss":
/*!**********************************************************************!*\
  !*** ./src/app/components/CardOpportunities/card-opportunities.scss ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/CardTeam/card-team.scss":
/*!****************************************************!*\
  !*** ./src/app/components/CardTeam/card-team.scss ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Footer/footer.scss":
/*!***********************************************!*\
  !*** ./src/app/components/Footer/footer.scss ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Games/games.scss":
/*!*********************************************!*\
  !*** ./src/app/components/Games/games.scss ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Header/header.scss":
/*!***********************************************!*\
  !*** ./src/app/components/Header/header.scss ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Main/main.scss":
/*!*******************************************!*\
  !*** ./src/app/components/Main/main.scss ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Textbook/GameLinks/gameLinks.scss":
/*!**************************************************************!*\
  !*** ./src/app/components/Textbook/GameLinks/gameLinks.scss ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Textbook/WordCard/wordCard.scss":
/*!************************************************************!*\
  !*** ./src/app/components/Textbook/WordCard/wordCard.scss ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Textbook/WordDetails/wordDetails.scss":
/*!******************************************************************!*\
  !*** ./src/app/components/Textbook/WordDetails/wordDetails.scss ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Textbook/WordPagination/wordPagination.scss":
/*!************************************************************************!*\
  !*** ./src/app/components/Textbook/WordPagination/wordPagination.scss ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/components/Textbook/WordTab/wordTab.scss":
/*!**********************************************************!*\
  !*** ./src/app/components/Textbook/WordTab/wordTab.scss ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCallGamePage/gamepage.scss":
/*!*********************************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCallGamePage/gamepage.scss ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCallRules/rules.scss":
/*!***************************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCallRules/rules.scss ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/AuthPage/register.scss":
/*!**********************************************!*\
  !*** ./src/app/pages/AuthPage/register.scss ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/GameResultPage/result.scss":
/*!**************************************************!*\
  !*** ./src/app/pages/GameResultPage/result.scss ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/LoadingPage/loadingpage.scss":
/*!****************************************************!*\
  !*** ./src/app/pages/LoadingPage/loadingpage.scss ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/SprintPage/SprintGamePage/gamepage.scss":
/*!***************************************************************!*\
  !*** ./src/app/pages/SprintPage/SprintGamePage/gamepage.scss ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/SprintPage/SprintRules/rules.scss":
/*!*********************************************************!*\
  !*** ./src/app/pages/SprintPage/SprintRules/rules.scss ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/StatisticsPage/statistics.scss":
/*!******************************************************!*\
  !*** ./src/app/pages/StatisticsPage/statistics.scss ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/pages/TextbookPage/textbook.scss":
/*!**************************************************!*\
  !*** ./src/app/pages/TextbookPage/textbook.scss ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/index.scss":
/*!*******************************!*\
  !*** ./src/styles/index.scss ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/app/app.ts":
/*!************************!*\
  !*** ./src/app/app.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "App": () => (/* binding */ App)
/* harmony export */ });
/* harmony import */ var _app_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.view */ "./src/app/app.view.ts");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components */ "./src/app/components/index.ts");
/* harmony import */ var _pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages */ "./src/app/pages/index.ts");
/* harmony import */ var _pages_AudioCallPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/AudioCallPage */ "./src/app/pages/AudioCallPage/index.ts");
/* harmony import */ var _pages_AuthPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/AuthPage */ "./src/app/pages/AuthPage/index.ts");
/* harmony import */ var _pages_SprintPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pages/SprintPage */ "./src/app/pages/SprintPage/index.ts");
/* harmony import */ var _pages_StatisticsPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pages/StatisticsPage */ "./src/app/pages/StatisticsPage/index.ts");








class App {
    constructor() {
        this.root = document.querySelector('.root');
        this.view = new _app_view__WEBPACK_IMPORTED_MODULE_0__.AppView(this.root);
        this.routes = {
            '/': _components__WEBPACK_IMPORTED_MODULE_2__.Main,
            auth: _pages_AuthPage__WEBPACK_IMPORTED_MODULE_5__.AuthPage,
            games: _components__WEBPACK_IMPORTED_MODULE_2__.Games,
            sprint: _pages_SprintPage__WEBPACK_IMPORTED_MODULE_6__.Sprint,
            textbook: _pages__WEBPACK_IMPORTED_MODULE_3__.Textbook,
            audiocall: _pages_AudioCallPage__WEBPACK_IMPORTED_MODULE_4__.AudioCall,
            statistics: _pages_StatisticsPage__WEBPACK_IMPORTED_MODULE_7__.Statistics,
        };
        this.router = new _basic__WEBPACK_IMPORTED_MODULE_1__.Router(this.root, this.view, this.routes);
    }
    start() {
        this.router.run();
    }
}


/***/ }),

/***/ "./src/app/app.view.ts":
/*!*****************************!*\
  !*** ./src/app/app.view.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AppView": () => (/* binding */ AppView)
/* harmony export */ });
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ */ "./src/app/index.ts");

class AppView {
    constructor(root) {
        this.root = root;
        this.header = new ___WEBPACK_IMPORTED_MODULE_0__.Header(root);
        this.header.init();
        this.main = new ___WEBPACK_IMPORTED_MODULE_0__.Main(root);
        this.main.init();
        this.footer = new ___WEBPACK_IMPORTED_MODULE_0__.Footer(root);
        this.footer.init();
    }
    /**
     * Генерирует страницу
     * @param route Инстанс класса роута
     */
    renderGame(route) {
        if (this.root)
            this.root.innerHTML = '';
        route.render();
    }
    renderPage(route) {
        if (this.root)
            this.root.innerHTML = '';
        this.header.init();
        this.main.init();
        this.main.instance.innerHTML = '';
        this.footer.init();
        route.render();
    }
    renderMain() {
        if (this.root)
            this.root.innerHTML = '';
        this.header.init();
        this.main.init();
        this.footer.init();
    }
    renderModal(route, previousRoute) {
        route.onExit = () => (window.location.hash = previousRoute);
        route.render();
    }
}


/***/ }),

/***/ "./src/app/basic/api/api.ts":
/*!**********************************!*\
  !*** ./src/app/basic/api/api.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Api": () => (/* binding */ Api)
/* harmony export */ });
/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/constants */ "./src/app/basic/common/constants.ts");

class Api {
    constructor(...rest) {
        throw new Error("This class can't be invoked through constructor");
        console.log(rest);
    }
    /**
     * Проверяет авторизирован ли пользователь
     * @returns true - пользователь авторизирован
     */
    static isAuthorized() {
        if (Api.mainToken && Date.now() - Api.tokenTime < 4 * 60 * 60 * 1000)
            return true; // 4 часа
        Api.mainToken = '';
        Api.refreshToken = '';
        Api.userId = '';
        Api.tokenTime = 0;
        return false;
    }
    /**
     * Возвращает токен-строку или null, если не авторизирован
     * @returns Токен-строка или null, если не авторизирован
     */
    static getAuthToken() {
        return Api.isAuthorized() ? { token: Api.mainToken, userId: Api.userId, refreshToken: Api.refreshToken } : null;
    }
    /**
     * Сохраняет токен и ИД пользователя для дальнейших запросов
     * @param response Токен логина и ИД
     */
    static setAuthData(response, time) {
        Api.mainToken = response.token;
        Api.refreshToken = response.refreshToken;
        Api.userId = response.userId;
        Api.tokenTime = time ? time : Date.now();
    }
    //static async responseHandler<T>(response: Response): Promise<T | IError> {}
    /**
     * Отправляет POST запрос
     * @param url URL адрес
     * @param body Отправляемые данные
     * @returns Respose-ответ без декодирования
     */
    static async sendPost(url, body, auth = false) {
        return fetch(url, {
            method: 'POST',
            headers: {
                Authorization: auth ? `Bearer ${Api.mainToken}` : '',
                Accept: 'application/json',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(body),
        }).then(async (resp) => {
            return resp.ok ? (await resp.json()) : { error: true, errorMessage: await resp.text() };
        });
    }
    /**
     * Отправляет GET запрос с авторизацией
     * @param url URL адрес
     * @returns Respose-ответ без декодирования
     */
    static async getGetAuth(url, mainToken = true) {
        return fetch(url, {
            method: 'GET',
            headers: {
                Authorization: `Bearer ${mainToken ? Api.mainToken : Api.refreshToken}`,
                Accept: 'application/json',
            },
        }).then(async (resp) => {
            return resp.ok ? (await resp.json()) : { error: true, errorMessage: await resp.text() };
        });
    }
    /**
     * Отправляет GET запрос без авторизации
     * @param url URL адрес
     * @returns Respose-ответ без декодирования
     */
    static async getGet(url) {
        return fetch(url, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
            },
        }).then(async (resp) => {
            return resp.ok ? (await resp.json()) : { error: true, errorMessage: await resp.text() };
        });
    }
    /**
     * Отправляет PUT запрос
     * @param url URL адрес
     * @param body Отправляемые данные
     * @returns Respose-ответ без декодирования
     */
    static async sendPut(url, body) {
        return fetch(url, {
            method: 'PUT',
            headers: {
                Authorization: `Bearer ${Api.mainToken}`,
                Accept: 'application/json',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(body),
        }).then(async (resp) => {
            return resp.ok ? (await resp.json()) : { error: true, errorMessage: await resp.text() };
        });
    }
    /**
     * Отправляет DELETE запрос
     * @param url URL адрес
     * @returns Respose-ответ без декодирования
     */
    static async sendDelete(url) {
        return fetch(url, {
            method: 'DELETE',
            headers: {
                Authorization: `Bearer ${Api.mainToken}`,
            },
        }).then((resp) => resp.ok);
    }
    /*
     *
     *  Раздел Words
     *
     */
    /**
     * Возвращает список слов заданной группы и страницы
     * @param group Номер группы
     * @param page Номер страницы
     * @returns Массив слов заданной группы и страницы
     */
    static async getWords(group, page) {
        return Api.getGet(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/words?group=${group}&page=${page}`);
    }
    /**
     * Возвращает слово по ИД
     * @param id ID слова
     * @returns Массив слов заданной группы и страницы
     */
    static async getWordsById(id) {
        return Api.getGet(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/words/${id}`);
    }
    /*
     *
     *  Раздел Users
     *
     */
    /**
     * Создает нового пользователя
     * @param user Данные о пользователе
     * @returns Ответ о регистрации или ошибка
     */
    static async createNewUser(user) {
        return Api.sendPost(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users`, user);
    }
    /**
     * Возвращает имя и пароль текущего пользователя
     * @returns Имя и пароль пользователя
     */
    static async getUserInfo() {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}`);
    }
    static async getUserNewToken() {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/tokens`, false);
    }
    /*
     *
     *  Раздел Users/Words
     *
     */
    /**
     * Возвращает массив пользовательских слов
     * @returns Массив пользовательских слов
     */
    static async getUserAllWords() {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/words`);
    }
    /**
     * Создает новое пользовательское слово
     * @param wordId ID пользовательского слова
     * @param body Информация о слове
     * @returns Информация о слове
     */
    static async createUserWord(wordId, body) {
        return Api.sendPost(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/words/${wordId}`, body, true);
    }
    /**
     * Возвращает информацию о слове пользователя
     * @param wordId ID слова пользователя
     * @returns Информацию о слове пользователя
     */
    static async getUserWord(wordId) {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/words/${wordId}`);
    }
    /**
     * Обновляет пользовательское слово
     * @param wordId ID пользовательского слова
     * @param body Информация о слове
     * @returns Информация о слове
     */
    static async updateUserWord(wordId, body) {
        return Api.sendPut(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/words/${wordId}`, body);
    }
    /**
     * Удаляет пользовательское слово
     * @param wordId ID пользовательского слова
     * @returns Удачно или нет
     */
    static async deleteUserWord(wordId) {
        return Api.sendDelete(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/words/${wordId}`);
    }
    /*
     *
     *  Раздел Users/AggregatedWords
     *
     */
    /**
     * Возвращает массив Agregated слов
     * @param query query-параметры запроса
     * @returns Массив Agregated слов
     */
    static async getUserAllAgregatedWords(query) {
        const queryString = Object.entries(query)
            .reduce((acc, cur) => acc + `${cur[0]}=${cur[1]}&`, '?')
            .slice(0, -1);
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/aggregatedWords${queryString}`);
    }
    /**
     * Возвращает информацию о Agregated слове
     * @param wordId ID Agregated слова
     * @returns Информацию о Agregated слове
     */
    static async getUserAgregatedWord(wordId) {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/aggregatedWords/${wordId}`);
    }
    /*
     *
     *  Раздел Users/Statistic
     *
     */
    /**
     * Возвращает статистику о пользователе
     * @returns Статистика о пользователе
     */
    static async getUserStatistics() {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/statistics`);
    }
    /**
     * Устанавливает новую статистику
     * @param body Новая статистика
     * @returns Новая статистика
     */
    static async updateUserStatistics(body) {
        return Api.sendPut(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/statistics`, body);
    }
    /*
     *
     *  Раздел Users/Setting
     *
     */
    /**
     * Возвращает настройки пользователя
     * @returns Настройки пользователя
     */
    static async getUserSettings() {
        return Api.getGetAuth(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/settings`);
    }
    /**
     * Устанавливает новые настройки
     * @param body Новая статистика
     * @returns Новая статистика
     */
    static async updateUserSettings(body) {
        return Api.sendPut(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/users/${Api.userId}/settings`, body);
    }
    /*
     *
     *  Раздел Sign In
     *
     */
    /**
     * Производит логин пользователя
     * @param user Имя и пароль пользователя
     * @returns Токен логина или ошибка
     */
    static async loginUser(user) {
        return Api.sendPost(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/signin`, user);
    }
    static unloginUser() {
        Api.mainToken = '';
        Api.refreshToken = '';
        Api.userId = '';
        Api.tokenTime = 0;
    }
}
Api.mainToken = '';
Api.refreshToken = '';
Api.userId = '';
Api.tokenTime = 0;


/***/ }),

/***/ "./src/app/basic/api/index.ts":
/*!************************************!*\
  !*** ./src/app/basic/api/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Api": () => (/* reexport safe */ _api__WEBPACK_IMPORTED_MODULE_0__.Api)
/* harmony export */ });
/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ "./src/app/basic/api/api.ts");



/***/ }),

/***/ "./src/app/basic/common/constants.ts":
/*!*******************************************!*\
  !*** ./src/app/basic/common/constants.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DIFFICULT_WORDS_PER_PAGE": () => (/* binding */ DIFFICULT_WORDS_PER_PAGE),
/* harmony export */   "DiffButtonState": () => (/* binding */ DiffButtonState),
/* harmony export */   "GROUP_AMOUNT": () => (/* binding */ GROUP_AMOUNT),
/* harmony export */   "PAGES_PER_GROUP": () => (/* binding */ PAGES_PER_GROUP),
/* harmony export */   "StudButtonState": () => (/* binding */ StudButtonState),
/* harmony export */   "TOTAL_GROUPS": () => (/* binding */ TOTAL_GROUPS),
/* harmony export */   "USER_WORD_TEMPLATE": () => (/* binding */ USER_WORD_TEMPLATE),
/* harmony export */   "WORDS_PER_PAGE": () => (/* binding */ WORDS_PER_PAGE),
/* harmony export */   "activityClass": () => (/* binding */ activityClass),
/* harmony export */   "baseUrl": () => (/* binding */ baseUrl),
/* harmony export */   "cardOnLoad": () => (/* binding */ cardOnLoad),
/* harmony export */   "difficult": () => (/* binding */ difficult),
/* harmony export */   "groups": () => (/* binding */ groups),
/* harmony export */   "maxWordsPages": () => (/* binding */ maxWordsPages)
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/app/basic/enums/index.ts");

const groups = {
    A1: 'Easy',
    A2: 'Easy',
    B1: 'Medium',
    B2: 'Medium',
    C1: 'Hard',
    C2: 'Hard',
};
const difficult = {
    '': 'Difficult words',
};
const maxWordsPages = 30;
const cardOnLoad = 0;
const activityClass = 'active';
const baseUrl = 'https://rslang-fromarys.herokuapp.com';
const GROUP_AMOUNT = 6;
const PAGES_PER_GROUP = 30;
const WORDS_PER_PAGE = 20;
const DIFFICULT_WORDS_PER_PAGE = 3600;
const USER_WORD_TEMPLATE = {
    difficulty: _enums__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal,
    optional: {
        sprint: {
            right: 0,
            wrong: 0,
            longRight: 0,
        },
        audioCall: {
            right: 0,
            wrong: 0,
            longRight: 0,
        },
    },
};
const DiffButtonState = {
    normal: 'Mark as difficult',
    difficult: 'Mark as easy',
};
const StudButtonState = {
    normal: 'Add to studied',
    studied: 'Remove from studied',
};
const TOTAL_GROUPS = 7;


/***/ }),

/***/ "./src/app/basic/common/index.ts":
/*!***************************************!*\
  !*** ./src/app/basic/common/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DIFFICULT_WORDS_PER_PAGE": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.DIFFICULT_WORDS_PER_PAGE),
/* harmony export */   "DiffButtonState": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.DiffButtonState),
/* harmony export */   "GROUP_AMOUNT": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.GROUP_AMOUNT),
/* harmony export */   "PAGES_PER_GROUP": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.PAGES_PER_GROUP),
/* harmony export */   "StudButtonState": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.StudButtonState),
/* harmony export */   "TOTAL_GROUPS": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.TOTAL_GROUPS),
/* harmony export */   "USER_WORD_TEMPLATE": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.USER_WORD_TEMPLATE),
/* harmony export */   "WORDS_PER_PAGE": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.WORDS_PER_PAGE),
/* harmony export */   "activityClass": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.activityClass),
/* harmony export */   "baseUrl": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.baseUrl),
/* harmony export */   "cardOnLoad": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.cardOnLoad),
/* harmony export */   "difficult": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.difficult),
/* harmony export */   "groups": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.groups),
/* harmony export */   "maxWordsPages": () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_0__.maxWordsPages)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./src/app/basic/common/constants.ts");



/***/ }),

/***/ "./src/app/basic/enums/enums.ts":
/*!**************************************!*\
  !*** ./src/app/basic/enums/enums.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EDeploy": () => (/* binding */ EDeploy),
/* harmony export */   "ERegisterButtonText": () => (/* binding */ ERegisterButtonText),
/* harmony export */   "ERoutes": () => (/* binding */ ERoutes),
/* harmony export */   "EStorage": () => (/* binding */ EStorage),
/* harmony export */   "EUserWordStatus": () => (/* binding */ EUserWordStatus)
/* harmony export */ });
var ERegisterButtonText;
(function (ERegisterButtonText) {
    ERegisterButtonText["register"] = "Register";
    ERegisterButtonText["login"] = "Login";
    ERegisterButtonText["cancel"] = "Cancel";
})(ERegisterButtonText || (ERegisterButtonText = {}));
var ERoutes;
(function (ERoutes) {
    ERoutes["main"] = "/";
    ERoutes["textbook"] = "textbook";
    ERoutes["games"] = "games";
    ERoutes["statistics"] = "statistics";
    ERoutes["audiocall"] = "audiocall";
    ERoutes["sprint"] = "sprint";
    ERoutes["auth"] = "auth";
})(ERoutes || (ERoutes = {}));
var EUserWordStatus;
(function (EUserWordStatus) {
    EUserWordStatus["studied"] = "studied";
    EUserWordStatus["normal"] = "normal";
    EUserWordStatus["difficult"] = "difficult";
})(EUserWordStatus || (EUserWordStatus = {}));
var EStorage;
(function (EStorage) {
    EStorage["page"] = "page";
    EStorage["group"] = "group";
})(EStorage || (EStorage = {}));
var EDeploy;
(function (EDeploy) {
    EDeploy["url"] = "https://fromarys.github.io/rslang/rslang";
})(EDeploy || (EDeploy = {}));


/***/ }),

/***/ "./src/app/basic/enums/index.ts":
/*!**************************************!*\
  !*** ./src/app/basic/enums/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EDeploy": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_0__.EDeploy),
/* harmony export */   "ERegisterButtonText": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_0__.ERegisterButtonText),
/* harmony export */   "ERoutes": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes),
/* harmony export */   "EStorage": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_0__.EStorage),
/* harmony export */   "EUserWordStatus": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus)
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums */ "./src/app/basic/enums/enums.ts");



/***/ }),

/***/ "./src/app/basic/events/auth-button-click.event.ts":
/*!*********************************************************!*\
  !*** ./src/app/basic/events/auth-button-click.event.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AUTH_BUTTON_CLICK_EVENT": () => (/* binding */ AUTH_BUTTON_CLICK_EVENT)
/* harmony export */ });
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models */ "./src/app/basic/events/models/index.ts");

const AUTH_BUTTON_CLICK_EVENT = new Event(_models__WEBPACK_IMPORTED_MODULE_0__.IHeaderMenu.Login);


/***/ }),

/***/ "./src/app/basic/events/index.ts":
/*!***************************************!*\
  !*** ./src/app/basic/events/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AUTH_BUTTON_CLICK_EVENT": () => (/* reexport safe */ _auth_button_click_event__WEBPACK_IMPORTED_MODULE_0__.AUTH_BUTTON_CLICK_EVENT),
/* harmony export */   "IHeaderMenu": () => (/* reexport safe */ _models__WEBPACK_IMPORTED_MODULE_1__.IHeaderMenu)
/* harmony export */ });
/* harmony import */ var _auth_button_click_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth-button-click.event */ "./src/app/basic/events/auth-button-click.event.ts");
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./models */ "./src/app/basic/events/models/index.ts");




/***/ }),

/***/ "./src/app/basic/events/models/header-menu.model.ts":
/*!**********************************************************!*\
  !*** ./src/app/basic/events/models/header-menu.model.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IHeaderMenu": () => (/* binding */ IHeaderMenu)
/* harmony export */ });
var IHeaderMenu;
(function (IHeaderMenu) {
    IHeaderMenu["Main"] = "MAIN";
    IHeaderMenu["Textbook"] = "TEXTBOOK";
    IHeaderMenu["Games"] = "GAMES";
    IHeaderMenu["AudioCall"] = "AUDIO CALL";
    IHeaderMenu["Sprint"] = "SPRINT";
    IHeaderMenu["Statistics"] = "STATISTICS";
    IHeaderMenu["Login"] = "LOG IN";
    IHeaderMenu["Logout"] = "LOGOUT";
})(IHeaderMenu || (IHeaderMenu = {}));


/***/ }),

/***/ "./src/app/basic/events/models/index.ts":
/*!**********************************************!*\
  !*** ./src/app/basic/events/models/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IHeaderMenu": () => (/* reexport safe */ _header_menu_model__WEBPACK_IMPORTED_MODULE_0__.IHeaderMenu)
/* harmony export */ });
/* harmony import */ var _header_menu_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./header-menu.model */ "./src/app/basic/events/models/header-menu.model.ts");



/***/ }),

/***/ "./src/app/basic/index.ts":
/*!********************************!*\
  !*** ./src/app/basic/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AUTH_BUTTON_CLICK_EVENT": () => (/* reexport safe */ _events__WEBPACK_IMPORTED_MODULE_5__.AUTH_BUTTON_CLICK_EVENT),
/* harmony export */   "Api": () => (/* reexport safe */ _api__WEBPACK_IMPORTED_MODULE_0__.Api),
/* harmony export */   "DIFFICULT_WORDS_PER_PAGE": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.DIFFICULT_WORDS_PER_PAGE),
/* harmony export */   "DiffButtonState": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.DiffButtonState),
/* harmony export */   "EDeploy": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_4__.EDeploy),
/* harmony export */   "ERegisterButtonText": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText),
/* harmony export */   "ERoutes": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_4__.ERoutes),
/* harmony export */   "EStorage": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_4__.EStorage),
/* harmony export */   "EUserWordStatus": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_4__.EUserWordStatus),
/* harmony export */   "GROUP_AMOUNT": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.GROUP_AMOUNT),
/* harmony export */   "IHeaderMenu": () => (/* reexport safe */ _events__WEBPACK_IMPORTED_MODULE_5__.IHeaderMenu),
/* harmony export */   "PAGES_PER_GROUP": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.PAGES_PER_GROUP),
/* harmony export */   "Router": () => (/* reexport safe */ _router__WEBPACK_IMPORTED_MODULE_6__.Router),
/* harmony export */   "StudButtonState": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.StudButtonState),
/* harmony export */   "TOTAL_GROUPS": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.TOTAL_GROUPS),
/* harmony export */   "TextbookService": () => (/* reexport safe */ _services__WEBPACK_IMPORTED_MODULE_1__.TextbookService),
/* harmony export */   "USER_WORD_TEMPLATE": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.USER_WORD_TEMPLATE),
/* harmony export */   "WORDS_PER_PAGE": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.WORDS_PER_PAGE),
/* harmony export */   "activityClass": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.activityClass),
/* harmony export */   "baseUrl": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.baseUrl),
/* harmony export */   "cardOnLoad": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.cardOnLoad),
/* harmony export */   "difficult": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.difficult),
/* harmony export */   "groups": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.groups),
/* harmony export */   "maxWordsPages": () => (/* reexport safe */ _common__WEBPACK_IMPORTED_MODULE_2__.maxWordsPages)
/* harmony export */ });
/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ "./src/app/basic/api/index.ts");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./services */ "./src/app/basic/services/index.ts");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "./src/app/basic/common/index.ts");
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interfaces */ "./src/app/basic/interfaces/index.ts");
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums */ "./src/app/basic/enums/index.ts");
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events */ "./src/app/basic/events/index.ts");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./router */ "./src/app/basic/router/index.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types */ "./src/app/basic/types/index.ts");










/***/ }),

/***/ "./src/app/basic/interfaces/index.ts":
/*!*******************************************!*\
  !*** ./src/app/basic/interfaces/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _textbook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textbook */ "./src/app/basic/interfaces/textbook/index.ts");
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interfaces */ "./src/app/basic/interfaces/interfaces.ts");




/***/ }),

/***/ "./src/app/basic/interfaces/interfaces.ts":
/*!************************************************!*\
  !*** ./src/app/basic/interfaces/interfaces.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/interfaces/textbook/index.ts":
/*!****************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/index.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _textbook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textbook */ "./src/app/basic/interfaces/textbook/textbook.ts");
/* harmony import */ var _wordCard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordCard */ "./src/app/basic/interfaces/textbook/wordCard.ts");
/* harmony import */ var _wordGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wordGroup */ "./src/app/basic/interfaces/textbook/wordGroup.ts");
/* harmony import */ var _wordDetails__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wordDetails */ "./src/app/basic/interfaces/textbook/wordDetails.ts");
/* harmony import */ var _wordTab__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./wordTab */ "./src/app/basic/interfaces/textbook/wordTab.ts");







/***/ }),

/***/ "./src/app/basic/interfaces/textbook/textbook.ts":
/*!*******************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/textbook.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/interfaces/textbook/wordCard.ts":
/*!*******************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/wordCard.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/interfaces/textbook/wordDetails.ts":
/*!**********************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/wordDetails.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/interfaces/textbook/wordGroup.ts":
/*!********************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/wordGroup.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/interfaces/textbook/wordTab.ts":
/*!******************************************************!*\
  !*** ./src/app/basic/interfaces/textbook/wordTab.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/basic/router/index.ts":
/*!***************************************!*\
  !*** ./src/app/basic/router/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Router": () => (/* reexport safe */ _router__WEBPACK_IMPORTED_MODULE_0__.Router)
/* harmony export */ });
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./router */ "./src/app/basic/router/router.ts");



/***/ }),

/***/ "./src/app/basic/router/router.ts":
/*!****************************************!*\
  !*** ./src/app/basic/router/router.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Router": () => (/* binding */ Router)
/* harmony export */ });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/app/basic/enums/index.ts");
/* harmony import */ var _pages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../pages */ "./src/app/pages/index.ts");


class Router {
    constructor(root, main, routes) {
        this.root = root;
        this.main = main;
        this.routes = routes;
        this.route = '';
        this.mainNode = this.main.main.instance;
        this.previousRoute = '';
    }
    /**
     * Назначает обработчик событий и запускает функцию для переключения роута
     */
    run() {
        this.switchRoute(this.getHash());
        window.addEventListener('hashchange', () => {
            this.switchRoute(this.getHash());
        });
    }
    /**
     * Получает hash из URL
     */
    getHash() {
        return window.location.hash.slice(1);
    }
    /**
     * Создает инстанс класса роута и передает номер страницы и группы в качестве аргумента
     * @param hash URL hash
     */
    switchRoute(hash) {
        const key = this.routes[hash] ? hash : _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.main;
        const Route = this.routes[key];
        if (key === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.sprint || key === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.audiocall) {
            this.loadGame(Route);
        }
        else if (key === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.auth) {
            this.loadModal(Route);
        }
        else if (key === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.main) {
            this.clearLocalStorage();
            this.main.renderMain();
        }
        else {
            this.loadPage(Route, key);
        }
        this.previousRoute = key;
    }
    loadGame(Route) {
        const page = this.previousRoute === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.textbook ? Number(localStorage.getItem('page')) : undefined;
        const group = this.previousRoute === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.textbook ? Number(localStorage.getItem('group')) : undefined;
        if (this.root) {
            const route = new Route(this.root, group, page);
            this.route = '';
            this.main.renderGame(route);
            this.clearLocalStorage();
        }
    }
    loadPage(Route, key) {
        const route = new Route(this.mainNode);
        if (key === _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.textbook) {
            this.route = _enums__WEBPACK_IMPORTED_MODULE_0__.ERoutes.textbook;
        }
        else {
            this.route = '';
        }
        this.previousRoute = key;
        this.main.renderPage(route);
        this.clearLocalStorage();
    }
    loadModal(Route) {
        if (this.root) {
            const route = new Route(this.mainNode);
            this.main.renderModal(route, this.previousRoute);
        }
    }
    clearLocalStorage() {
        const route = this.routes[this.previousRoute];
        if (!(route === _pages__WEBPACK_IMPORTED_MODULE_1__.Textbook)) {
            localStorage.setItem(_enums__WEBPACK_IMPORTED_MODULE_0__.EStorage.group, '');
            localStorage.setItem(_enums__WEBPACK_IMPORTED_MODULE_0__.EStorage.page, '');
        }
    }
}


/***/ }),

/***/ "./src/app/basic/services/index.ts":
/*!*****************************************!*\
  !*** ./src/app/basic/services/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextbookService": () => (/* reexport safe */ _textbook_service__WEBPACK_IMPORTED_MODULE_0__.TextbookService)
/* harmony export */ });
/* harmony import */ var _textbook_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textbook.service */ "./src/app/basic/services/textbook.service.ts");



/***/ }),

/***/ "./src/app/basic/services/textbook.service.ts":
/*!****************************************************!*\
  !*** ./src/app/basic/services/textbook.service.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextbookService": () => (/* binding */ TextbookService)
/* harmony export */ });
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common */ "./src/app/basic/common/index.ts");
/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api */ "./src/app/basic/api/index.ts");
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums */ "./src/app/basic/enums/index.ts");



class TextbookService {
    static async getWords(group, page, isGroup) {
        const response = _api__WEBPACK_IMPORTED_MODULE_1__.Api.isAuthorized()
            ? await this.getUserAggregatedWords(group, page, isGroup)
            : await this.getAllWords(group, page);
        return response;
    }
    static async getUserAggregatedWords(group, page, isGroup) {
        const query = this.setQuery(group, page, isGroup);
        const response = await _api__WEBPACK_IMPORTED_MODULE_1__.Api.getUserAllAgregatedWords(query).catch((error) => console.log(error));
        if (Array.isArray(response)) {
            return response[0].paginatedResults;
        }
    }
    static async getAllWords(group, page) {
        const response = await _api__WEBPACK_IMPORTED_MODULE_1__.Api.getWords(group, page).catch((error) => console.log(error));
        if (Array.isArray(response)) {
            return response;
        }
    }
    static setQuery(group, page, isGroup) {
        const filter = {
            'userWord.difficulty': _enums__WEBPACK_IMPORTED_MODULE_2__.EUserWordStatus.difficult,
        };
        const query = {
            group: group,
            page: page,
            wordsPerPage: `${_common__WEBPACK_IMPORTED_MODULE_0__.WORDS_PER_PAGE}`,
        };
        if (!isGroup) {
            query.filter = JSON.stringify(filter);
            query.wordsPerPage = `${_common__WEBPACK_IMPORTED_MODULE_0__.DIFFICULT_WORDS_PER_PAGE}`;
            delete query.group;
            delete query.page;
        }
        return query;
    }
    static async createUserWord(wordId, body) {
        return await _api__WEBPACK_IMPORTED_MODULE_1__.Api.createUserWord(wordId, body).catch((error) => console.log(error.errorMessage));
    }
    static async updateUserWord(wordId, body) {
        return await _api__WEBPACK_IMPORTED_MODULE_1__.Api.updateUserWord(wordId, body).catch((error) => console.log(error.errorMessage));
    }
}


/***/ }),

/***/ "./src/app/basic/types/index.ts":
/*!**************************************!*\
  !*** ./src/app/basic/types/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/app/basic/types/types.ts");



/***/ }),

/***/ "./src/app/basic/types/types.ts":
/*!**************************************!*\
  !*** ./src/app/basic/types/types.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/components/Advantages/advantages.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/Advantages/advantages.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Advantages": () => (/* binding */ Advantages)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _advantages_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./advantages.view */ "./src/app/components/Advantages/advantages.view.ts");


class Advantages extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
    constructor() {
        super(...arguments);
        this.element = document.createElement('div');
        this.template = (0,_advantages_view__WEBPACK_IMPORTED_MODULE_1__.getTemplate)();
    }
}


/***/ }),

/***/ "./src/app/components/Advantages/advantages.view.ts":
/*!**********************************************************!*\
  !*** ./src/app/components/Advantages/advantages.view.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _advantages_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./advantages.scss */ "./src/app/components/Advantages/advantages.scss");

function getTemplate() {
    return `<div class="advantages" >
            <div class="left-content-advantages">
              <h2 class="title-advantages">Learn English easily and simply with RS Lang</h2>
              <p class="text-advantages">Stop learning English, it's time to learn it!</p>
              <p class="text-advantages">Start right now!</p>
            </div>
            <div class="right-content-advantages">
              <img class="img-advantages" src="public/static/learn.png" alt="learn" />
            </div>
          </div>
  `;
}


/***/ }),

/***/ "./src/app/components/Advantages/index.ts":
/*!************************************************!*\
  !*** ./src/app/components/Advantages/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Advantages": () => (/* reexport safe */ _advantages__WEBPACK_IMPORTED_MODULE_0__.Advantages)
/* harmony export */ });
/* harmony import */ var _advantages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./advantages */ "./src/app/components/Advantages/advantages.ts");



/***/ }),

/***/ "./src/app/components/Burger/Burger.ts":
/*!*********************************************!*\
  !*** ./src/app/components/Burger/Burger.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Burger)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _burger_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./burger.scss */ "./src/app/components/Burger/burger.scss");


class Burger extends _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parent, cleaner) {
        super(parent, 'div', 'burger-menu', '<span class="burger-menu__span"></span>');
        this.parent = parent;
        this.cleaner = cleaner;
        this.menuItems = {
            'Main menu': '',
            Textbook: 'textbook',
            Games: 'games',
            Statistics: 'statistics',
        };
        this.burgerShown = false;
        this.node.onclick = () => this.clickHandler();
        this.outsideBurgerClickHandlerBind = this.outsideBurgerClickHandler.bind(this);
        window.addEventListener('click', this.outsideBurgerClickHandlerBind);
    }
    clickHandler() {
        this.burgerShown = !this.burgerShown;
        if (this.burgerShown) {
            // show
            this.node.classList.add('burger-menu_shown');
            this.wnd = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.parent, 'div', 'burger-menu__window');
            Object.entries(this.menuItems).forEach((entry) => {
                const [key, value] = entry;
                const item = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.wnd.node, 'div', 'burger-menu__item', `${key}`);
                item.node.onclick = () => {
                    this.destroy();
                    this.cleaner();
                    location.hash = `${value}`;
                };
            });
            setTimeout(() => (this.wnd.node.style.opacity = '1'), 0);
        }
        else {
            // удалить бургер
            this.hideBurger();
        }
    }
    hideBurger() {
        this.burgerShown = false;
        this.node.classList.remove('burger-menu_shown');
        this.wnd.node.style.opacity = '0';
        setTimeout(() => this.wnd.destroy(), 500);
    }
    outsideBurgerClickHandler(e) {
        if (!this.burgerShown)
            return;
        if (e.target.closest('.burger-menu'))
            return;
        this.hideBurger();
    }
    destroy() {
        window.removeEventListener('click', this.outsideBurgerClickHandlerBind);
        super.destroy();
    }
}


/***/ }),

/***/ "./src/app/components/Button/Button.ts":
/*!*********************************************!*\
  !*** ./src/app/components/Button/Button.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Button": () => (/* binding */ Button)
/* harmony export */ });
/* harmony import */ var _Creator___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Creator/ */ "./src/app/components/Creator/index.ts");

class Button extends _Creator___WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parent, className, text, onClick) {
        super(parent, 'button', className, text);
        this.node.onclick = () => onClick(text);
    }
}


/***/ }),

/***/ "./src/app/components/Button/index.ts":
/*!********************************************!*\
  !*** ./src/app/components/Button/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Button": () => (/* reexport safe */ _Button__WEBPACK_IMPORTED_MODULE_0__.Button)
/* harmony export */ });
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Button */ "./src/app/components/Button/Button.ts");



/***/ }),

/***/ "./src/app/components/CardOpportunities/card-opportunities.ts":
/*!********************************************************************!*\
  !*** ./src/app/components/CardOpportunities/card-opportunities.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CardOpportunities": () => (/* binding */ CardOpportunities)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _card_opportunities_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card-opportunities.view */ "./src/app/components/CardOpportunities/card-opportunities.view.ts");


class CardOpportunities extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
    constructor(root, settings) {
        super(root);
        this.settings = settings;
        this.element = document.createElement('div');
        this.template = (0,_card_opportunities_view__WEBPACK_IMPORTED_MODULE_1__.getTemplate)(this.settings);
    }
    get id() {
        return this.settings.id;
    }
}


/***/ }),

/***/ "./src/app/components/CardOpportunities/card-opportunities.view.ts":
/*!*************************************************************************!*\
  !*** ./src/app/components/CardOpportunities/card-opportunities.view.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _card_opportunities_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card-opportunities.scss */ "./src/app/components/CardOpportunities/card-opportunities.scss");

function getTemplate(settings) {
    return `<a href="#${settings.route}">
            <div class="card-opportunities" style="background-image: url('${settings.srcBackgr}')">
              <div class="content-card" style="background-image: url('${settings.srcIcon}')">
              </div>
              <div class="text-opportunities">${settings.text}</div>
            </div>
          </a>
  `;
}


/***/ }),

/***/ "./src/app/components/CardOpportunities/index.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/CardOpportunities/index.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CardOpportunities": () => (/* reexport safe */ _card_opportunities__WEBPACK_IMPORTED_MODULE_1__.CardOpportunities)
/* harmony export */ });
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models */ "./src/app/components/CardOpportunities/models/index.ts");
/* harmony import */ var _card_opportunities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card-opportunities */ "./src/app/components/CardOpportunities/card-opportunities.ts");




/***/ }),

/***/ "./src/app/components/CardOpportunities/models/card-opportunities.model.ts":
/*!*********************************************************************************!*\
  !*** ./src/app/components/CardOpportunities/models/card-opportunities.model.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/components/CardOpportunities/models/index.ts":
/*!**************************************************************!*\
  !*** ./src/app/components/CardOpportunities/models/index.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _card_opportunities_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card-opportunities.model */ "./src/app/components/CardOpportunities/models/card-opportunities.model.ts");



/***/ }),

/***/ "./src/app/components/CardTeam/card-team.ts":
/*!**************************************************!*\
  !*** ./src/app/components/CardTeam/card-team.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CardTeam": () => (/* binding */ CardTeam)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _card_team_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card-team.view */ "./src/app/components/CardTeam/card-team.view.ts");


class CardTeam extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
    constructor(root, settings) {
        super(root);
        this.settings = settings;
        this.element = document.createElement('div');
        this.template = (0,_card_team_view__WEBPACK_IMPORTED_MODULE_1__.getTemplate)(this.settings);
    }
}


/***/ }),

/***/ "./src/app/components/CardTeam/card-team.view.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/CardTeam/card-team.view.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _card_team_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card-team.scss */ "./src/app/components/CardTeam/card-team.scss");

function getTemplate(settings) {
    return `<a class="link-github-team" href="${settings.hrefPerson}" target="_blank">
            <div class="person" style="background-image: url('${settings.srcPerson}')">
              <div class="info-person">
                <h4 class="name-person">${settings.namePerson}</h4>
                <p class="done-person">${settings.donePerson}</p>
              </div>
            </div>
          </a>
  `;
}


/***/ }),

/***/ "./src/app/components/CardTeam/index.ts":
/*!**********************************************!*\
  !*** ./src/app/components/CardTeam/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CardTeam": () => (/* reexport safe */ _card_team__WEBPACK_IMPORTED_MODULE_1__.CardTeam)
/* harmony export */ });
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models */ "./src/app/components/CardTeam/models/index.ts");
/* harmony import */ var _card_team__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card-team */ "./src/app/components/CardTeam/card-team.ts");




/***/ }),

/***/ "./src/app/components/CardTeam/models/card-team.model.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/CardTeam/models/card-team.model.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/app/components/CardTeam/models/index.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/CardTeam/models/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _card_team_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card-team.model */ "./src/app/components/CardTeam/models/card-team.model.ts");



/***/ }),

/***/ "./src/app/components/Creator/Creator.ts":
/*!***********************************************!*\
  !*** ./src/app/components/Creator/Creator.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Creator": () => (/* binding */ Creator)
/* harmony export */ });
class Creator {
    constructor(parentNode, tagName = 'div', className = '', content = '') {
        const el = document.createElement(tagName);
        if (className)
            el.className = className;
        el.innerHTML = content;
        if (parentNode) {
            parentNode.append(el);
        }
        this.node = el;
    }
    destroy() {
        this.node.remove();
    }
}


/***/ }),

/***/ "./src/app/components/Creator/index.ts":
/*!*********************************************!*\
  !*** ./src/app/components/Creator/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Creator": () => (/* reexport safe */ _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Creator */ "./src/app/components/Creator/Creator.ts");



/***/ }),

/***/ "./src/app/components/Footer/footer.ts":
/*!*********************************************!*\
  !*** ./src/app/components/Footer/footer.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Footer": () => (/* binding */ Footer)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _footer_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./footer.view */ "./src/app/components/Footer/footer.view.ts");


class Footer extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
    constructor() {
        super(...arguments);
        this.element = document.createElement('footer');
        this.template = (0,_footer_view__WEBPACK_IMPORTED_MODULE_1__.getTemplate)();
    }
}


/***/ }),

/***/ "./src/app/components/Footer/footer.view.ts":
/*!**************************************************!*\
  !*** ./src/app/components/Footer/footer.view.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _footer_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./footer.scss */ "./src/app/components/Footer/footer.scss");

function getTemplate() {
    return `
  <div class="content-footer">
    <ul class="link-github">
      <li class="item-link-github">&copy;2022</li>
      <a class="link-github-footer" href="https://github.com/fromarys" target="_blank"
      ><li class="item-link-github">Yevgenii Mineyev</li></a
      >
      <a class="link-github-footer" href="https://github.com/OksanaSeregina" target="_blank"
      ><li class="item-link-github">Oksana Seregina</li></a
      >
      <a class="link-github-footer" href="https://github.com/Andronio2" target="_blank"
      ><li class="item-link-github">Andrey Smirnov</li></a
      >
    </ul>
    <a class="rslink-footer" href="https://rs.school/js/" target="_blank"
        ><img src="public/static/rs_school_js.svg" alt="logo" style="height: 50px"
    /></a>
   </div>
  `;
}


/***/ }),

/***/ "./src/app/components/Footer/index.ts":
/*!********************************************!*\
  !*** ./src/app/components/Footer/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Footer": () => (/* reexport safe */ _footer__WEBPACK_IMPORTED_MODULE_0__.Footer)
/* harmony export */ });
/* harmony import */ var _footer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./footer */ "./src/app/components/Footer/footer.ts");



/***/ }),

/***/ "./src/app/components/Games/games.ts":
/*!*******************************************!*\
  !*** ./src/app/components/Games/games.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Games": () => (/* binding */ Games)
/* harmony export */ });
/* harmony import */ var _games_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./games.view */ "./src/app/components/Games/games.view.ts");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");


class Games extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
    constructor() {
        super(...arguments);
        this.element = document.createElement('main');
        this.template = (0,_games_view__WEBPACK_IMPORTED_MODULE_0__.getTemplate)();
    }
}


/***/ }),

/***/ "./src/app/components/Games/games.view.ts":
/*!************************************************!*\
  !*** ./src/app/components/Games/games.view.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _games_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./games.scss */ "./src/app/components/Games/games.scss");


function getTemplate() {
    return `
  <div class="mini-games">
    <a href="#${_basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.audiocall}" class="item-game audio-call">
      <h3 class="title-game game-audio">Audio call</h3>
    </a>
    <a href="#${_basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.sprint}" class="item-game sprint">
      <h3 class="title-game game-sprint">Sprint</h3>
    </a>
  </div>
  `;
}


/***/ }),

/***/ "./src/app/components/Games/index.ts":
/*!*******************************************!*\
  !*** ./src/app/components/Games/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Games": () => (/* reexport safe */ _games__WEBPACK_IMPORTED_MODULE_0__.Games)
/* harmony export */ });
/* harmony import */ var _games__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./games */ "./src/app/components/Games/games.ts");



/***/ }),

/***/ "./src/app/components/Header/header.ts":
/*!*********************************************!*\
  !*** ./src/app/components/Header/header.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Header": () => (/* binding */ Header)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _header_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./header.view */ "./src/app/components/Header/header.view.ts");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _pages_AuthPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../pages/AuthPage */ "./src/app/pages/AuthPage/index.ts");




class Header extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
    constructor() {
        super(...arguments);
        this.authButton = null;
        this.auth = new _pages_AuthPage__WEBPACK_IMPORTED_MODULE_3__.AuthPage(document.body);
        this.element = document.createElement('header');
        this.template = (0,_header_view__WEBPACK_IMPORTED_MODULE_1__.getTemplate)(_basic__WEBPACK_IMPORTED_MODULE_2__.IHeaderMenu);
    }
    init() {
        super.init();
        this.listen();
    }
    destroy() {
        this.authButton.removeEventListener('click', this.onAuthClick.bind(this));
        super.destroy();
    }
    async attachElement() {
        this.root?.prepend(this.element);
        this.authButton = document.querySelector('[data-role="auth"]');
        if (this.auth.isAuthorized()) {
            this.authButton.setAttribute('autorized', '');
            const { name } = await this.getUser();
            this.authButton.innerHTML = `${name} <a href="#" class="condition"><span>${_basic__WEBPACK_IMPORTED_MODULE_2__.IHeaderMenu.Logout}</span></a>`;
        }
        else {
            this.authButton.removeAttribute('autorized');
            this.authButton.innerHTML = `<a href="#${_basic__WEBPACK_IMPORTED_MODULE_2__.ERoutes.auth}" class="condition"><span>${_basic__WEBPACK_IMPORTED_MODULE_2__.IHeaderMenu.Login}</span></a>`;
        }
    }
    async getUser() {
        try {
            const user = (await _basic__WEBPACK_IMPORTED_MODULE_2__.Api.getUserInfo());
            return user;
        }
        catch {
            return {};
        }
    }
    listen() {
        this.authButton.addEventListener('click', this.onAuthClick.bind(this));
    }
    onAuthClick(event) {
        const isAutorized = !!event.target.closest('[autorized]');
        if (isAutorized) {
            this.auth.unloginUser();
            window.location.reload();
        }
    }
}


/***/ }),

/***/ "./src/app/components/Header/header.view.ts":
/*!**************************************************!*\
  !*** ./src/app/components/Header/header.view.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _header_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./header.scss */ "./src/app/components/Header/header.scss");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");


function getTemplate(menu) {
    return `
        <div class="content-header">
          <div class="logo">
            <a href="${_basic__WEBPACK_IMPORTED_MODULE_1__.EDeploy.url + _basic__WEBPACK_IMPORTED_MODULE_1__.ERoutes.main}" class="link-logo">
              <img class="img-logo" src="public/static/logo.jpg" alt="logo" />
              <h1 class="title-logo">RSLang</h1>
            </a>
          </div>

          <nav data-role="header-menu" class="header-menu">
            <div class="menu">
              <div data-id="${menu.Main}" class="item">
                <a href="${_basic__WEBPACK_IMPORTED_MODULE_1__.EDeploy.url + _basic__WEBPACK_IMPORTED_MODULE_1__.ERoutes.main}"><span>${menu.Main}</span></a>
              </div>
              <div data-id="${menu.Textbook}" class="item">
                <a href="#${_basic__WEBPACK_IMPORTED_MODULE_1__.ERoutes.textbook}"><span>${menu.Textbook}</span></a>
              </div>
              <div data-id="${menu.Games}" class="item">
                <a href="#${_basic__WEBPACK_IMPORTED_MODULE_1__.ERoutes.games}"><span>${menu.Games}</span></a>
              </div>
              <div data-id="${menu.Statistics}" class="item">
                <a href="#${_basic__WEBPACK_IMPORTED_MODULE_1__.ERoutes.statistics}"><span>${menu.Statistics}</span></a>
              </div>
            </div>
          </nav>

          <div data-role="auth" class="visible"></div>
          `;
}


/***/ }),

/***/ "./src/app/components/Header/index.ts":
/*!********************************************!*\
  !*** ./src/app/components/Header/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Header": () => (/* reexport safe */ _header__WEBPACK_IMPORTED_MODULE_0__.Header)
/* harmony export */ });
/* harmony import */ var _header__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./header */ "./src/app/components/Header/header.ts");



/***/ }),

/***/ "./src/app/components/Input/Input.ts":
/*!*******************************************!*\
  !*** ./src/app/components/Input/Input.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Input": () => (/* binding */ Input)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Creator */ "./src/app/components/Creator/index.ts");

class Input extends _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parent, className) {
        super(parent, 'input', className);
        this.node.type = 'text';
    }
    /**
     * Получает значение поля инпута
     * @returns Текст в поле инпута
     */
    getValue() {
        return this.node.value;
    }
}


/***/ }),

/***/ "./src/app/components/Input/index.ts":
/*!*******************************************!*\
  !*** ./src/app/components/Input/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Input": () => (/* reexport safe */ _Input__WEBPACK_IMPORTED_MODULE_0__.Input)
/* harmony export */ });
/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Input */ "./src/app/components/Input/Input.ts");



/***/ }),

/***/ "./src/app/components/Main/constants.ts":
/*!**********************************************!*\
  !*** ./src/app/components/Main/constants.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CARD_OPPORTUNITIES": () => (/* binding */ CARD_OPPORTUNITIES),
/* harmony export */   "CARD_TEAM": () => (/* binding */ CARD_TEAM)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");

const CARD_OPPORTUNITIES = [
    {
        srcBackgr: 'public/static/card-backgr1.jpeg',
        srcIcon: 'public/static/textbook.png',
        text: 'Electronic <mark>textbook</mark> with a database of words to study',
        id: _basic__WEBPACK_IMPORTED_MODULE_0__.IHeaderMenu.Textbook,
        route: _basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.textbook,
    },
    {
        srcBackgr: 'public/static/card-backgr2.jpeg',
        srcIcon: 'public/static/play.png',
        text: '<mark>Mini-games</mark> for repeating the learned words',
        id: _basic__WEBPACK_IMPORTED_MODULE_0__.IHeaderMenu.Games,
        route: _basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.games,
    },
    {
        srcBackgr: 'public/static/card-backgr3.jpeg',
        srcIcon: 'public/static/stat.png',
        text: 'Detailed <mark>statistics</mark> of your achievements',
        id: _basic__WEBPACK_IMPORTED_MODULE_0__.IHeaderMenu.Statistics,
        route: _basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.statistics,
    },
];
const CARD_TEAM = [
    {
        srcPerson: 'public/static/yevgenii-foto.jpg',
        hrefPerson: 'https://github.com/fromarys',
        namePerson: 'Yevgenii Mineyev',
        donePerson: '<mark>Team Lead</mark>Configured configs,created a MongoDB database, configured routing, created Textbook',
    },
    {
        srcPerson: 'public/static/oksana-foto.jpg',
        hrefPerson: 'https://github.com/OksanaSeregina',
        namePerson: 'Oksana Seregina',
        donePerson: 'Created the Main page, created the Games page, created Statistics',
    },
    {
        srcPerson: 'public/static/andrey-foto.jpg',
        hrefPerson: 'https://github.com/Andronio2',
        namePerson: 'Andrey Smirnov',
        donePerson: 'Created the Registration page, created API functions, created mini-games "Audio Call" and "Sprint"',
    },
];


/***/ }),

/***/ "./src/app/components/Main/index.ts":
/*!******************************************!*\
  !*** ./src/app/components/Main/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Main": () => (/* reexport safe */ _main__WEBPACK_IMPORTED_MODULE_1__.Main),
/* harmony export */   "Root": () => (/* reexport safe */ _models__WEBPACK_IMPORTED_MODULE_0__.Root)
/* harmony export */ });
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models */ "./src/app/components/Main/models/index.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main */ "./src/app/components/Main/main.ts");




/***/ }),

/***/ "./src/app/components/Main/main.ts":
/*!*****************************************!*\
  !*** ./src/app/components/Main/main.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Main": () => (/* binding */ Main)
/* harmony export */ });
/* harmony import */ var _Advantages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Advantages */ "./src/app/components/Advantages/index.ts");
/* harmony import */ var _CardOpportunities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../CardOpportunities */ "./src/app/components/CardOpportunities/index.ts");
/* harmony import */ var _CardTeam__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../CardTeam */ "./src/app/components/CardTeam/index.ts");
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./models */ "./src/app/components/Main/models/index.ts");
/* harmony import */ var _main_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./main.view */ "./src/app/components/Main/main.view.ts");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../base-component */ "./src/app/components/base-component.ts");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./constants */ "./src/app/components/Main/constants.ts");







class Main extends _base_component__WEBPACK_IMPORTED_MODULE_5__.BaseComponent {
    constructor() {
        super(...arguments);
        this.cardsOpportunities = [];
        this.cardsTeam = [];
        this.element = document.createElement('main');
        this.template = (0,_main_view__WEBPACK_IMPORTED_MODULE_4__.getTemplate)();
    }
    attachElement() {
        super.attachElement();
        this.initAdvantages();
        this.initOpportunities();
        this.initTeam();
    }
    initAdvantages() {
        const root = document.querySelector(_models__WEBPACK_IMPORTED_MODULE_3__.Root.Advantages);
        const advantages = new _Advantages__WEBPACK_IMPORTED_MODULE_0__.Advantages(root);
        advantages.init();
    }
    initOpportunities() {
        const root = document.querySelector(_models__WEBPACK_IMPORTED_MODULE_3__.Root.Opportunities);
        _constants__WEBPACK_IMPORTED_MODULE_6__.CARD_OPPORTUNITIES.forEach((value) => {
            this.cardsOpportunities = [...this.cardsOpportunities, new _CardOpportunities__WEBPACK_IMPORTED_MODULE_1__.CardOpportunities(root, value)];
        });
        this.cardsOpportunities.forEach((card) => card.init());
    }
    initTeam() {
        const root = document.querySelector(_models__WEBPACK_IMPORTED_MODULE_3__.Root.Team);
        _constants__WEBPACK_IMPORTED_MODULE_6__.CARD_TEAM.forEach((value) => {
            this.cardsTeam = [...this.cardsTeam, new _CardTeam__WEBPACK_IMPORTED_MODULE_2__.CardTeam(root, value)];
            this.cardsTeam.forEach((member) => member.init());
        });
    }
}


/***/ }),

/***/ "./src/app/components/Main/main.view.ts":
/*!**********************************************!*\
  !*** ./src/app/components/Main/main.view.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTemplate": () => (/* binding */ getTemplate)
/* harmony export */ });
/* harmony import */ var _main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main.scss */ "./src/app/components/Main/main.scss");

const getTemplate = () => {
    return `<div data-root="advantages"></div>

          <div class="opportunities" data-root="opportunities"></div>

          <div class="our-team">
            <h2 class="title-team">Our team</h2>
            <div class="container-team" data-root="our-team"></div>
          </div>
          `;
};


/***/ }),

/***/ "./src/app/components/Main/models/index.ts":
/*!*************************************************!*\
  !*** ./src/app/components/Main/models/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Root": () => (/* reexport safe */ _root_enum__WEBPACK_IMPORTED_MODULE_0__.Root)
/* harmony export */ });
/* harmony import */ var _root_enum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./root.enum */ "./src/app/components/Main/models/root.enum.ts");



/***/ }),

/***/ "./src/app/components/Main/models/root.enum.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/Main/models/root.enum.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Root": () => (/* binding */ Root)
/* harmony export */ });
var Root;
(function (Root) {
    Root["Advantages"] = "[data-root=\"advantages\"]";
    Root["Opportunities"] = "[data-root=\"opportunities\"]";
    Root["Team"] = "[data-root=\"our-team\"]";
})(Root || (Root = {}));


/***/ }),

/***/ "./src/app/components/Textbook/GameLinks/gameLinks.ts":
/*!************************************************************!*\
  !*** ./src/app/components/Textbook/GameLinks/gameLinks.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GameLinks": () => (/* binding */ GameLinks)
/* harmony export */ });
/* harmony import */ var _gameLinks_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gameLinks.view */ "./src/app/components/Textbook/GameLinks/gameLinks.view.ts");

class GameLinks {
    constructor(parentNode) {
        this.parentNode = parentNode;
        this.view = new _gameLinks_view__WEBPACK_IMPORTED_MODULE_0__.GameLinksView(this.parentNode);
        this.sprint = this.view.sprint.node;
        this.audiocall = this.view.audiocall.node;
        document.addEventListener('DisableLinks', () => this.disableLinks());
        document.addEventListener('EnableLinks', () => this.enableLinks());
    }
    /**
     * Присваивает стили при деактивации ссылок
     */
    disableLinks() {
        this.sprint.style.opacity = '0.8';
        this.audiocall.style.opacity = '0.8';
        this.sprint.style.pointerEvents = 'none';
        this.audiocall.style.pointerEvents = 'none';
    }
    /**
     * Присваивает стили при активации ссылок
     */
    enableLinks() {
        this.sprint.style.opacity = '1';
        this.audiocall.style.opacity = '1';
        this.sprint.style.pointerEvents = 'auto';
        this.audiocall.style.pointerEvents = 'auto';
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/GameLinks/gameLinks.view.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/Textbook/GameLinks/gameLinks.view.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GameLinksView": () => (/* binding */ GameLinksView)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _gameLinks_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gameLinks.scss */ "./src/app/components/Textbook/GameLinks/gameLinks.scss");



class GameLinksView {
    constructor(parentNode) {
        this.wrapper = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(parentNode, 'div', 'textbook__games');
        this.sprint = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.wrapper.node, 'a', 'textbook__game');
        this.sprint.node.href = `#${_basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.sprint}`;
        this.audiocall = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.wrapper.node, 'a', 'textbook__game');
        this.audiocall.node.href = `#${_basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.audiocall}`;
        this.sprintTitle = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.sprint.node, 'h3', 'textbook__title', _basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.sprint);
        this.audiocallTitle = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.audiocall.node, 'h3', 'textbook__title', _basic__WEBPACK_IMPORTED_MODULE_0__.ERoutes.audiocall);
        this.sprintImage = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.sprint.node, 'img', 'textbook__image');
        this.sprintImage.node.src = 'public/static/sprint.jpg';
        this.audiocallImage = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.audiocall.node, 'img', 'textbook__image');
        this.audiocallImage.node.src = 'public/static/audio-call.jpg';
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/GameLinks/index.ts":
/*!********************************************************!*\
  !*** ./src/app/components/Textbook/GameLinks/index.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GameLinks": () => (/* reexport safe */ _gameLinks__WEBPACK_IMPORTED_MODULE_0__.GameLinks)
/* harmony export */ });
/* harmony import */ var _gameLinks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gameLinks */ "./src/app/components/Textbook/GameLinks/gameLinks.ts");



/***/ }),

/***/ "./src/app/components/Textbook/WordCard/index.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/Textbook/WordCard/index.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordCard": () => (/* reexport safe */ _wordCard__WEBPACK_IMPORTED_MODULE_0__.WordCard),
/* harmony export */   "WordDetails": () => (/* reexport safe */ _WordDetails_wordDetails__WEBPACK_IMPORTED_MODULE_1__.WordDetails)
/* harmony export */ });
/* harmony import */ var _wordCard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wordCard */ "./src/app/components/Textbook/WordCard/wordCard.ts");
/* harmony import */ var _WordDetails_wordDetails__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../WordDetails/wordDetails */ "./src/app/components/Textbook/WordDetails/wordDetails.ts");




/***/ }),

/***/ "./src/app/components/Textbook/WordCard/wordCard.ts":
/*!**********************************************************!*\
  !*** ./src/app/components/Textbook/WordCard/wordCard.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordCard": () => (/* binding */ WordCard)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _wordCard_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordCard.view */ "./src/app/components/Textbook/WordCard/wordCard.view.ts");
/* harmony import */ var _WordDetails_wordDetails__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../WordDetails/wordDetails */ "./src/app/components/Textbook/WordDetails/wordDetails.ts");



class WordCard {
    constructor(wordGroup, textbook, wordInfo, className) {
        this.wordGroup = wordGroup;
        this.textbook = textbook;
        this.wordInfo = wordInfo;
        this.className = className;
        this.wordsContainer = this.wordGroup.wordsContainer.node;
        this.difficulty = wordInfo.userWord?.difficulty;
        this.wordCard = new _wordCard_view__WEBPACK_IMPORTED_MODULE_1__["default"](this.wordsContainer, wordInfo, className);
        if (this.difficulty)
            this.wordCard.node.classList.add(this.difficulty);
        if (this.className)
            this.wordGroup.activeElement = this.wordCard.node;
        if (this.className)
            this.renderDetails();
        this.wordCard.node.onclick = () => this.clickHandler();
    }
    /**
     * Обработчик кликов
     */
    clickHandler() {
        this.wordGroup.activeElement.classList.remove(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
        this.wordGroup.activeElement = this.wordCard.node;
        this.wordGroup.activeElement.classList.add(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
        this.renderDetails();
    }
    /**
     * Генерирует детали для слова
     */
    renderDetails() {
        const wordsWrapper = this.wordGroup.details.node;
        new _WordDetails_wordDetails__WEBPACK_IMPORTED_MODULE_2__.WordDetails(this.textbook, wordsWrapper, this.wordInfo);
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordCard/wordCard.view.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/Textbook/WordCard/wordCard.view.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WordCardView)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _wordCard_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordCard.scss */ "./src/app/components/Textbook/WordCard/wordCard.scss");


class WordCardView extends _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parentNode, wordInfo, className) {
        const content = `<h2 class="words__word">${wordInfo.word}</h2>
    <h3 class="words__translate">${wordInfo.wordTranslate}</h3>`;
        super(parentNode, 'button', `words__card ${className}`, content);
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordDetails/index.ts":
/*!**********************************************************!*\
  !*** ./src/app/components/Textbook/WordDetails/index.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordDetails": () => (/* reexport safe */ _wordDetails__WEBPACK_IMPORTED_MODULE_0__.WordDetails)
/* harmony export */ });
/* harmony import */ var _wordDetails__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wordDetails */ "./src/app/components/Textbook/WordDetails/wordDetails.ts");



/***/ }),

/***/ "./src/app/components/Textbook/WordDetails/wordDetails.ts":
/*!****************************************************************!*\
  !*** ./src/app/components/Textbook/WordDetails/wordDetails.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordDetails": () => (/* binding */ WordDetails)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _WordGroup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../WordGroup */ "./src/app/components/Textbook/WordGroup/index.ts");
/* harmony import */ var _wordDetails_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wordDetails.view */ "./src/app/components/Textbook/WordDetails/wordDetails.view.ts");



class WordDetails {
    constructor(textbook, parentNode, wordInfo) {
        this.textbook = textbook;
        this.parentNode = parentNode;
        this.wordInfo = wordInfo;
        this.userWord = wordInfo.userWord;
        this.view = new _wordDetails_view__WEBPACK_IMPORTED_MODULE_2__["default"](this.parentNode, this.wordInfo);
        this.audio = this.view.audioButton.node;
        this.audio.onclick = () => this.audioClickHandler(this.wordInfo);
        if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized()) {
            this.setButtons();
        }
        if (!WordDetails.instance) {
            WordDetails.instance = this;
        }
        return WordDetails.instance;
    }
    /**
     * Обрабатывает клики по иконке аудио
     * @param wordInfo объект слова IWord
     */
    audioClickHandler(wordInfo) {
        const button = this.view.audioButton.node;
        const icon = button.children[0];
        const audio = new Audio(`${_basic__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/${wordInfo.audio}`);
        void audio.play();
        icon?.classList.add(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
        audio.onended = () => icon?.classList.remove(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
    }
    /**
     * Обрабатывает клики по кнопке 'Mark as difficult'
     * @param state
     */
    async diffButtonClickHandler(state) {
        const body = state !== _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult
            ? this.setDifficulty(_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult)
            : this.setDifficulty(_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal);
        if (this.userWord) {
            await _basic__WEBPACK_IMPORTED_MODULE_0__.TextbookService.updateUserWord(this.wordInfo._id, body);
        }
        else {
            await _basic__WEBPACK_IMPORTED_MODULE_0__.TextbookService.createUserWord(this.wordInfo._id, body);
        }
        this.reloadWords();
    }
    /**
     * Обрабатывает клики по кнопке 'Add to studied'
     * @param state Сложность слова
     */
    async studButtonClickHandler(state) {
        const body = state !== _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied
            ? this.setDifficulty(_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied)
            : this.setDifficulty(_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal);
        if (this.userWord) {
            await _basic__WEBPACK_IMPORTED_MODULE_0__.TextbookService.updateUserWord(this.wordInfo._id, body);
        }
        else {
            await _basic__WEBPACK_IMPORTED_MODULE_0__.TextbookService.createUserWord(this.wordInfo._id, body);
        }
        this.reloadWords();
    }
    /**
     * Генерирует кнопки для сложных и изученных слов
     */
    setButtons() {
        const difficulty = this.wordInfo.userWord?.difficulty || _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal;
        const difficultButton = this.view.difficultButton?.node;
        const studiedButton = this.view.studiedButton?.node;
        if (difficultButton) {
            difficultButton.innerHTML = _basic__WEBPACK_IMPORTED_MODULE_0__.DiffButtonState[difficulty] || _basic__WEBPACK_IMPORTED_MODULE_0__.DiffButtonState[_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal];
            difficultButton.onclick = () => this.diffButtonClickHandler(difficulty);
        }
        if (studiedButton) {
            studiedButton.innerHTML = _basic__WEBPACK_IMPORTED_MODULE_0__.StudButtonState[difficulty] || _basic__WEBPACK_IMPORTED_MODULE_0__.StudButtonState[_basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal];
            studiedButton.onclick = () => this.studButtonClickHandler(difficulty);
        }
    }
    /**
     * Создает тело запроса к базе данных
     * @param state Сложность слова
     * @returns Объект IUserWord, для дальнейшего обновления слова
     */
    setDifficulty(state) {
        if (this.userWord) {
            this.userWord.difficulty = state;
            return this.userWord;
        }
        else {
            const userWord = _basic__WEBPACK_IMPORTED_MODULE_0__.USER_WORD_TEMPLATE;
            userWord.difficulty = state;
            return userWord;
        }
    }
    /**
     * Обновляет группу при нажатии на кнопку
     */
    reloadWords() {
        const group = new _WordGroup__WEBPACK_IMPORTED_MODULE_1__.WordGroup(this.textbook);
        group.renderGroup();
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordDetails/wordDetails.view.ts":
/*!*********************************************************************!*\
  !*** ./src/app/components/Textbook/WordDetails/wordDetails.view.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WordDetailsView)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _wordDetails_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wordDetails.scss */ "./src/app/components/Textbook/WordDetails/wordDetails.scss");



class WordDetailsView {
    constructor(details, word) {
        this.details = details;
        this.word = word;
        this.image = `<img src="${_basic__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/${this.word.image}" class="words__image"></img>`;
        this.headerContent = this.renderHeader(this.word);
        this.descriptionContent = this.renderDescription(this.word);
        this.details.innerHTML = this.image;
        if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized())
            this.renderButtons();
        this.information = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.details, 'div', 'words__information');
        this.header = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.information.node, 'div', 'words__header', this.headerContent);
        this.description = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.information.node, 'div', 'words__description', this.descriptionContent);
        this.audioButton = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.header.node, 'button', 'words__audio', this.renderAudioButton());
        if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized())
            this.details.insertAdjacentHTML('beforeend', this.renderStatistics());
    }
    /**
     * Создает шапку блока для определенного слова
     * @param word Объект слова
     * @returns  Шапка блока
     */
    renderHeader(word) {
        return `
      <h2 class="words__word">${word.word}</h2>
      <h3 class="words__translate">${word.wordTranslate}</h3>
      <span class="words__transcription">${word.transcription}</span>
    `;
    }
    /**
     * Создает элемент description для определенного слова
     * @param word Объект слова
     * @returns  Элемент description
     */
    renderDescription(word) {
        return `
      <h3 class="words__subtitle">Значение</h3>
      <p>${word.textMeaning}</p>
      <p>${word.textMeaningTranslate}</p>
      <h3 class="words__subtitle">Пример</h3>
      <p>${word.textExample}</p>
      <p>${word.textExampleTranslate}</p>
    `;
    }
    /**
     * Создает иконку для кнопки аудио
     * @returns svg иконку
     */
    renderAudioButton() {
        return `
    <svg class="words__audio-icon">
      <use xlink:href="public/static/audio.svg#audio"></use>
    </svg>
    `;
    }
    /**
     * Если пользователь авторизован создает кнопки для блока
     */
    renderButtons() {
        this.detailsButtons = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.details, 'div', 'words__buttons');
        const diffBtnClass = 'words__buttons-difficult';
        const studBtnClass = 'words__buttons-studied';
        this.difficultButton = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.detailsButtons.node, 'button', diffBtnClass, _basic__WEBPACK_IMPORTED_MODULE_0__.DiffButtonState.normal);
        this.studiedButton = new _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.detailsButtons.node, 'button', studBtnClass, _basic__WEBPACK_IMPORTED_MODULE_0__.StudButtonState.normal);
    }
    /**
     * Если пользователь авторизован создает статистику для блока
     * @returns Статистика по играм
     */
    renderStatistics() {
        const statistics = this.word.userWord?.optional;
        const audiocall = statistics?.audioCall;
        const sprint = statistics?.sprint;
        return `
      <div class="words__statistics">
        <div class="words__statistics-wrapper">
          <div class="words__statistics-game">Audiocall</div>
          <div class="words__statistics-score">
            <span class="words__statistics-right">${audiocall?.right || 0}</span>
            <span class="words__statistics-wrong">${audiocall?.wrong || 0}</span>
          </div>
        </div>
        <div class="words__statistics-wrapper">
          <div class="words__statistics-game">Sprint</div>
          <div class="words__statistics-score">
            <span class="words__statistics-right">${sprint?.right || 0}</span>
            <span class="words__statistics-wrong">${sprint?.wrong || 0}</span>
          </div>
        </div>
      </div>
      `;
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordGroup/index.ts":
/*!********************************************************!*\
  !*** ./src/app/components/Textbook/WordGroup/index.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordGroup": () => (/* reexport safe */ _wordGroup__WEBPACK_IMPORTED_MODULE_0__.WordGroup)
/* harmony export */ });
/* harmony import */ var _wordGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wordGroup */ "./src/app/components/Textbook/WordGroup/wordGroup.ts");



/***/ }),

/***/ "./src/app/components/Textbook/WordGroup/wordGroup.ts":
/*!************************************************************!*\
  !*** ./src/app/components/Textbook/WordGroup/wordGroup.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordGroup": () => (/* binding */ WordGroup)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../.. */ "./src/app/components/index.ts");
/* harmony import */ var _wordGroup_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wordGroup.view */ "./src/app/components/Textbook/WordGroup/wordGroup.view.ts");



class WordGroup {
    constructor(textbook) {
        this.textbook = textbook;
        if (!_wordGroup_view__WEBPACK_IMPORTED_MODULE_2__["default"].instance) {
            this.view = new _wordGroup_view__WEBPACK_IMPORTED_MODULE_2__["default"](this.textbook);
        }
        if (!WordGroup.instance) {
            WordGroup.instance = this;
        }
        return WordGroup.instance;
    }
    /**
     * Обрабатывает полученные данные о словах
     * @param group номер группы
     * @param page номер страницы
     * @param isGroup проверка, является ли вкладка группой для слов или же разделом Difficult words
     */
    async getCards(group, page, isGroup) {
        const words = await _basic__WEBPACK_IMPORTED_MODULE_0__.TextbookService.getWords(group, page, isGroup);
        this.clearContainers();
        if (words) {
            words.forEach((item, index) => {
                let className = '';
                if (index === 0)
                    className = _basic__WEBPACK_IMPORTED_MODULE_0__.activityClass;
                this.renderCard(item, className);
            });
            const allStudied = words.every((item) => item.userWord?.difficulty !== _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal && item.userWord?.difficulty !== undefined);
            allStudied ? this.disableLinks() : this.enableLinks();
        }
        if (isGroup)
            this.renderPagination();
    }
    /**
     * Получает из localstorage или принимает в качестве аргументов и передает данные группы и страницы
     * @param group номер группы
     * @param page номер страницы
     * @param isGroup проверка, является ли вкладка группой для слов или же разделом Difficult words
     */
    renderGroup(group, page, isGroup = true) {
        let storagedPage = Number(localStorage.getItem(_basic__WEBPACK_IMPORTED_MODULE_0__.EStorage.page)) || 0;
        let storagedGroup = Number(localStorage.getItem(_basic__WEBPACK_IMPORTED_MODULE_0__.EStorage.group)) || 0;
        if (page)
            storagedPage = page;
        if (group)
            storagedGroup = group;
        void this.getCards(storagedGroup.toString(), storagedPage.toString(), isGroup);
    }
    /**
     * Создает пагинацию для группы
     */
    renderPagination() {
        const pagination = new ___WEBPACK_IMPORTED_MODULE_1__.WordPagination(this.textbook);
        pagination.paginate();
    }
    /**
     * Создает инстанс класса карточки слова
     * @param item объект слова
     * @param className класс активности
     */
    renderCard(item, className) {
        if (this.view)
            new ___WEBPACK_IMPORTED_MODULE_1__.WordCard(this.view, this.textbook, item, className);
    }
    /**
     * Очищает родительские элементы для генерации нового содержимого
     */
    clearContainers() {
        if (this.view) {
            this.view.wordsContainer.node.innerHTML = '';
            this.view.details.node.innerHTML = '';
            this.textbook.pagination.node.innerHTML = '';
        }
    }
    /**
     * Создает event для деактивации ссылок и диспатчит на объект document
     */
    disableLinks() {
        const event = new Event('DisableLinks', { bubbles: true });
        document.dispatchEvent(event);
    }
    /**
     * Создает event для активации ссылок и диспатчит на объект document
     */
    enableLinks() {
        const event = new Event('EnableLinks', { bubbles: true });
        document.dispatchEvent(event);
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordGroup/wordGroup.view.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/Textbook/WordGroup/wordGroup.view.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WordGroupView)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");

class WordGroupView {
    constructor(textbook) {
        this.textbook = textbook;
        this.activeElement = textbook.words.node;
        this.wordsContainer = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.words.node, 'div', 'words__container');
        this.details = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.words.node, 'div', 'words__details');
        if (!WordGroupView.instance) {
            WordGroupView.instance = this;
        }
        return WordGroupView.instance;
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordPagination/index.ts":
/*!*************************************************************!*\
  !*** ./src/app/components/Textbook/WordPagination/index.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordPagination": () => (/* reexport safe */ _wordPagination__WEBPACK_IMPORTED_MODULE_0__.WordPagination)
/* harmony export */ });
/* harmony import */ var _wordPagination__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wordPagination */ "./src/app/components/Textbook/WordPagination/wordPagination.ts");



/***/ }),

/***/ "./src/app/components/Textbook/WordPagination/wordPagination.ts":
/*!**********************************************************************!*\
  !*** ./src/app/components/Textbook/WordPagination/wordPagination.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordPagination": () => (/* binding */ WordPagination)
/* harmony export */ });
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../.. */ "./src/app/components/index.ts");
/* harmony import */ var _wordPagination_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordPagination.view */ "./src/app/components/Textbook/WordPagination/wordPagination.view.ts");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");



class WordPagination {
    constructor(textbook) {
        this.textbook = textbook;
        this.wordsContainer = this.textbook.words.node;
    }
    /**
     * Создает пагинацию, выполняет перемещение по страницам
     * @param totalPages максимальное количество страниц
     * @param page номер страницы
     */
    paginate(totalPages = _basic__WEBPACK_IMPORTED_MODULE_2__.maxWordsPages, page) {
        const currentPage = page || Number(localStorage.getItem('page')) + 1 || 1;
        this.destroyPagination();
        const pagination = new _wordPagination_view__WEBPACK_IMPORTED_MODULE_1__.WordPaginationView(this.textbook);
        if (currentPage > 1) {
            this.showPreviousButton(pagination, totalPages, currentPage);
        }
        if (currentPage > 2) {
            this.showFirstItem(pagination, totalPages, currentPage);
        }
        this.showActiveItem(pagination, totalPages, currentPage);
        if (currentPage < totalPages - 1) {
            this.showLastItem(pagination, totalPages, currentPage);
        }
        if (currentPage < totalPages) {
            this.showNextButton(pagination, totalPages, currentPage);
        }
    }
    /**
     * Обрабатывает клик по номеру страницы
     * @param totalPages максимальное количество страниц
     * @param page номер страницы
     */
    clickHandler(totalPages, page) {
        const serverPagination = page - 1;
        this.paginate(totalPages, page);
        this.renderWordGroup(undefined, serverPagination);
    }
    /**
     * Отображает первый элемент пагинации, назначет обработчик события click
     * @param pagination инстанс класса WordPaginationView
     * @param totalPages максимально количество страниц
     * @param page номер страницы
     */
    showFirstItem(pagination, totalPages, page) {
        const element = pagination.createPage('first number', `<span>1</span>`);
        element.onclick = () => this.clickHandler(totalPages, 1);
        if (page > 3) {
            pagination.createPage('dots', '<span>...</span>');
        }
    }
    /**
     * Отображает кнопку для перемещения по страницам назад, назначет обработчик события click
     * @param pagination нстанс класса WordPaginationView
     * @param totalPages максимально количество страниц
     * @param page номер страницы
     */
    showPreviousButton(pagination, totalPages, page) {
        const element = pagination.createPage('pagination__button prev', 'Previous');
        element.onclick = () => this.clickHandler(totalPages, page - 1);
    }
    /**
     * Отображает кнопку для перемещения по страницам вперёд, назначет обработчик события click
     * @param pagination нстанс класса WordPaginationView
     * @param totalPages максимально количество страниц
     * @param page номер страницы
     */
    showNextButton(pagination, totalPages, page) {
        const element = pagination.createPage('pagination__button next', `<span>Next</span>`);
        element.onclick = () => this.clickHandler(totalPages, page + 1);
    }
    showActiveItem(pagination, totalPages, page) {
        let beforePage = page - 1;
        let afterPage = page + 1;
        let active;
        if (page == totalPages) {
            beforePage = beforePage - 2;
        }
        else if (page == totalPages - 1) {
            beforePage = beforePage - 1;
        }
        if (page == 1) {
            afterPage = afterPage + 2;
        }
        else if (page == 2) {
            afterPage = afterPage + 1;
        }
        for (let plength = beforePage; plength <= afterPage; plength++) {
            if (plength > totalPages) {
                continue;
            }
            if (plength == 0) {
                plength = plength + 1;
            }
            if (page == plength) {
                active = _basic__WEBPACK_IMPORTED_MODULE_2__.activityClass;
            }
            else {
                active = '';
            }
            const element = pagination.createPage(`number ${active}`, `<span>${plength}</span>`);
            element.onclick = () => this.clickHandler(totalPages, plength);
        }
    }
    /**
     * Отображает последний элемент пагинации, назначет обработчик события click
     * @param pagination инстанс класса WordPaginationView
     * @param totalPages максимально количество страниц
     * @param page номер страницы
     */
    showLastItem(pagination, totalPages, page) {
        if (page < totalPages - 2) {
            pagination.createPage('dots', '<span>...</span>');
        }
        const element = pagination.createPage('last number', `<span>${totalPages}</span>`);
        element.onclick = () => this.clickHandler(totalPages, totalPages);
    }
    /**
     * Обновляет группу при пагинации
     * @param group номер группы
     * @param page номер страницы
     */
    renderWordGroup(group, page) {
        console.log(page);
        const wordGroup = new ___WEBPACK_IMPORTED_MODULE_0__.WordGroup(this.textbook);
        localStorage.setItem(_basic__WEBPACK_IMPORTED_MODULE_2__.EStorage.page, JSON.stringify(page));
        void wordGroup.renderGroup(group, page);
    }
    /**
     * Очищает родительский блок для пагинации
     */
    destroyPagination() {
        this.textbook.pagination.node.innerHTML = '';
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordPagination/wordPagination.view.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/Textbook/WordPagination/wordPagination.view.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordPaginationView": () => (/* binding */ WordPaginationView)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _wordPagination_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordPagination.scss */ "./src/app/components/Textbook/WordPagination/wordPagination.scss");


class WordPaginationView {
    constructor(textbook) {
        this.textbook = textbook;
        this.pagination = this.textbook.pagination.node;
        this.list = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.pagination, 'ul');
    }
    /**
     * Создает элементы пагинации, присваивает класс активности
     * @param className класс активности
     * @param content номер страницы
     * @returns
     */
    createPage(className, content) {
        const page = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.list.node, 'li', className, content);
        return page.node;
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordTab/index.ts":
/*!******************************************************!*\
  !*** ./src/app/components/Textbook/WordTab/index.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordTab": () => (/* reexport safe */ _wordTab__WEBPACK_IMPORTED_MODULE_0__.WordTab)
/* harmony export */ });
/* harmony import */ var _wordTab__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wordTab */ "./src/app/components/Textbook/WordTab/wordTab.ts");



/***/ }),

/***/ "./src/app/components/Textbook/WordTab/wordTab.ts":
/*!********************************************************!*\
  !*** ./src/app/components/Textbook/WordTab/wordTab.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WordTab": () => (/* binding */ WordTab)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _WordGroup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../WordGroup */ "./src/app/components/Textbook/WordGroup/index.ts");
/* harmony import */ var _wordTab_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wordTab.view */ "./src/app/components/Textbook/WordTab/wordTab.view.ts");



class WordTab {
    constructor(textbook, groupData) {
        this.textbook = textbook;
        this.groupData = groupData;
        this.isGroup = !!this.groupData[0];
        this.parentNode = this.textbook.group.node;
        this.groupNumber = this.isGroup ? Object.keys(_basic__WEBPACK_IMPORTED_MODULE_0__.groups).indexOf(this.groupData[0]) : _basic__WEBPACK_IMPORTED_MODULE_0__.TOTAL_GROUPS;
        this.view = new _wordTab_view__WEBPACK_IMPORTED_MODULE_2__["default"](this.parentNode, this.groupData);
        this.groupButton = this.view.groupButton.node;
        this.groupButton.onclick = () => this.clickHandler();
        this.setActiveTab();
    }
    /**
     * Обрабатывает клики по вкладкам
     */
    clickHandler() {
        const group = new _WordGroup__WEBPACK_IMPORTED_MODULE_1__.WordGroup(this.textbook);
        localStorage.setItem(_basic__WEBPACK_IMPORTED_MODULE_0__.EStorage.group, JSON.stringify(this.groupNumber));
        group.renderGroup(this.groupNumber, undefined, this.isGroup);
        this.switchStyles();
    }
    /**
     * Добавляет и удаляет класс active
     */
    switchStyles() {
        this.textbook.activeGroup.classList.remove(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
        this.textbook.activeGroup = this.groupButton;
        this.textbook.activeGroup.classList.add(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
    }
    /**
     * Создает группу при создании инстанса класса
     */
    renderGroupOnLoad() {
        if (!_WordGroup__WEBPACK_IMPORTED_MODULE_1__.WordGroup.instance) {
            const group = new _WordGroup__WEBPACK_IMPORTED_MODULE_1__.WordGroup(this.textbook);
            group.renderGroup(this.groupNumber, undefined, this.isGroup);
        }
    }
    /**
     * Устанавливает вкладку в качестве активной
     */
    setActiveTab() {
        const currentGroup = Number(localStorage.getItem(_basic__WEBPACK_IMPORTED_MODULE_0__.EStorage.group));
        if (currentGroup === this.groupNumber)
            this.groupButton.classList.add(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass);
        if (this.groupButton.classList.contains(_basic__WEBPACK_IMPORTED_MODULE_0__.activityClass)) {
            this.textbook.activeGroup = this.groupButton;
            this.renderGroupOnLoad();
        }
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/WordTab/wordTab.view.ts":
/*!*************************************************************!*\
  !*** ./src/app/components/Textbook/WordTab/wordTab.view.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WordTabView)
/* harmony export */ });
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _wordTab_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordTab.scss */ "./src/app/components/Textbook/WordTab/wordTab.scss");


class WordTabView {
    constructor(parentNode, item) {
        this.parentNode = parentNode;
        this.item = item;
        this.groupButton = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.parentNode, 'button', 'group__button');
        this.left = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.groupButton.node, 'div', 'group__button-left', this.item[1]);
        this.right = new _Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.groupButton.node, 'div', 'group__button-right', this.item[0]);
    }
}


/***/ }),

/***/ "./src/app/components/Textbook/index.ts":
/*!**********************************************!*\
  !*** ./src/app/components/Textbook/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GameLinks": () => (/* reexport safe */ _GameLinks__WEBPACK_IMPORTED_MODULE_5__.GameLinks),
/* harmony export */   "WordCard": () => (/* reexport safe */ _WordCard__WEBPACK_IMPORTED_MODULE_0__.WordCard),
/* harmony export */   "WordDetails": () => (/* reexport safe */ _WordCard__WEBPACK_IMPORTED_MODULE_0__.WordDetails),
/* harmony export */   "WordGroup": () => (/* reexport safe */ _WordGroup__WEBPACK_IMPORTED_MODULE_2__.WordGroup),
/* harmony export */   "WordPagination": () => (/* reexport safe */ _WordPagination__WEBPACK_IMPORTED_MODULE_4__.WordPagination),
/* harmony export */   "WordTab": () => (/* reexport safe */ _WordTab__WEBPACK_IMPORTED_MODULE_3__.WordTab)
/* harmony export */ });
/* harmony import */ var _WordCard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WordCard */ "./src/app/components/Textbook/WordCard/index.ts");
/* harmony import */ var _WordDetails__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WordDetails */ "./src/app/components/Textbook/WordDetails/index.ts");
/* harmony import */ var _WordGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WordGroup */ "./src/app/components/Textbook/WordGroup/index.ts");
/* harmony import */ var _WordTab__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WordTab */ "./src/app/components/Textbook/WordTab/index.ts");
/* harmony import */ var _WordPagination__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WordPagination */ "./src/app/components/Textbook/WordPagination/index.ts");
/* harmony import */ var _GameLinks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GameLinks */ "./src/app/components/Textbook/GameLinks/index.ts");








/***/ }),

/***/ "./src/app/components/base-component.ts":
/*!**********************************************!*\
  !*** ./src/app/components/base-component.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseComponent": () => (/* binding */ BaseComponent)
/* harmony export */ });
class BaseComponent {
    constructor(root) {
        this.root = root;
    }
    get instance() {
        return this.element;
    }
    init() {
        this.render();
    }
    render() {
        this.element.innerHTML = this.template;
        if (this.root) {
            this.attachElement();
        }
    }
    destroy() {
        if (this.root) {
            this.root.innerHTML = '';
        }
    }
    attachElement() {
        this.root?.appendChild(this.element);
    }
}


/***/ }),

/***/ "./src/app/components/index.ts":
/*!*************************************!*\
  !*** ./src/app/components/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Advantages": () => (/* reexport safe */ _Advantages__WEBPACK_IMPORTED_MODULE_4__.Advantages),
/* harmony export */   "Button": () => (/* reexport safe */ _Button__WEBPACK_IMPORTED_MODULE_2__.Button),
/* harmony export */   "CardOpportunities": () => (/* reexport safe */ _CardOpportunities__WEBPACK_IMPORTED_MODULE_5__.CardOpportunities),
/* harmony export */   "CardTeam": () => (/* reexport safe */ _CardTeam__WEBPACK_IMPORTED_MODULE_6__.CardTeam),
/* harmony export */   "Creator": () => (/* reexport safe */ _Creator__WEBPACK_IMPORTED_MODULE_1__.Creator),
/* harmony export */   "Footer": () => (/* reexport safe */ _Footer__WEBPACK_IMPORTED_MODULE_7__.Footer),
/* harmony export */   "GameLinks": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.GameLinks),
/* harmony export */   "Games": () => (/* reexport safe */ _Games__WEBPACK_IMPORTED_MODULE_8__.Games),
/* harmony export */   "Header": () => (/* reexport safe */ _Header__WEBPACK_IMPORTED_MODULE_9__.Header),
/* harmony export */   "Input": () => (/* reexport safe */ _Input__WEBPACK_IMPORTED_MODULE_3__.Input),
/* harmony export */   "Main": () => (/* reexport safe */ _Main__WEBPACK_IMPORTED_MODULE_10__.Main),
/* harmony export */   "Root": () => (/* reexport safe */ _Main__WEBPACK_IMPORTED_MODULE_10__.Root),
/* harmony export */   "WordCard": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.WordCard),
/* harmony export */   "WordDetails": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.WordDetails),
/* harmony export */   "WordGroup": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.WordGroup),
/* harmony export */   "WordPagination": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.WordPagination),
/* harmony export */   "WordTab": () => (/* reexport safe */ _Textbook__WEBPACK_IMPORTED_MODULE_0__.WordTab)
/* harmony export */ });
/* harmony import */ var _Textbook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Textbook */ "./src/app/components/Textbook/index.ts");
/* harmony import */ var _Creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Input */ "./src/app/components/Input/index.ts");
/* harmony import */ var _Advantages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Advantages */ "./src/app/components/Advantages/index.ts");
/* harmony import */ var _CardOpportunities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CardOpportunities */ "./src/app/components/CardOpportunities/index.ts");
/* harmony import */ var _CardTeam__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CardTeam */ "./src/app/components/CardTeam/index.ts");
/* harmony import */ var _Footer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Footer */ "./src/app/components/Footer/index.ts");
/* harmony import */ var _Games__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Games */ "./src/app/components/Games/index.ts");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Header */ "./src/app/components/Header/index.ts");
/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Main */ "./src/app/components/Main/index.ts");













/***/ }),

/***/ "./src/app/index.ts":
/*!**************************!*\
  !*** ./src/app/index.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Advantages": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Advantages),
/* harmony export */   "App": () => (/* reexport safe */ _app__WEBPACK_IMPORTED_MODULE_1__.App),
/* harmony export */   "Button": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Button),
/* harmony export */   "CardOpportunities": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.CardOpportunities),
/* harmony export */   "CardTeam": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.CardTeam),
/* harmony export */   "Creator": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Creator),
/* harmony export */   "Footer": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Footer),
/* harmony export */   "GameLinks": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.GameLinks),
/* harmony export */   "Games": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Games),
/* harmony export */   "Header": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Header),
/* harmony export */   "Input": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Input),
/* harmony export */   "Main": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Main),
/* harmony export */   "Root": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.Root),
/* harmony export */   "WordCard": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.WordCard),
/* harmony export */   "WordDetails": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.WordDetails),
/* harmony export */   "WordGroup": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.WordGroup),
/* harmony export */   "WordPagination": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.WordPagination),
/* harmony export */   "WordTab": () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_0__.WordTab)
/* harmony export */ });
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components */ "./src/app/components/index.ts");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app */ "./src/app/app.ts");




/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCall.model.ts":
/*!********************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCall.model.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AudioCallModel)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _basic_api_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../basic/api/api */ "./src/app/basic/api/api.ts");


const NORMAL_DIFFICULTY = 3;
const DIFFICULT_DIFFICULTY = 5;
class AudioCallModel {
    saveResultToServer(word, answer) {
        void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.getUserWord(word.id).then((wordInfo) => {
            if ('difficulty' in wordInfo) {
                // Если запись уже существует, то исправляем и обновляем
                delete wordInfo.id;
                delete wordInfo.wordId;
                if (answer) {
                    // Если правильный ответ
                    wordInfo.optional.audioCall.right++;
                    wordInfo.optional.audioCall.longRight++;
                    if ((wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal &&
                        wordInfo.optional.audioCall.longRight > NORMAL_DIFFICULTY) ||
                        (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult &&
                            wordInfo.optional.audioCall.longRight > DIFFICULT_DIFFICULTY)) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied;
                    }
                }
                else {
                    // Если неправильный
                    wordInfo.optional.audioCall.wrong++;
                    wordInfo.optional.audioCall.longRight = 0;
                    if (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult;
                    }
                    else if (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal;
                    }
                }
                void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.updateUserWord(word.id, wordInfo);
            }
            else {
                // Иначе создаем новую запись
                const newWordInfo = {
                    difficulty: answer ? _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal : _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult,
                    optional: {
                        sprint: {
                            right: 0,
                            wrong: 0,
                            longRight: 0,
                        },
                        audioCall: {
                            right: answer ? 1 : 0,
                            wrong: !answer ? 1 : 0,
                            longRight: answer ? 1 : 0,
                        },
                    },
                };
                void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.createUserWord(word.id, newWordInfo);
            }
        });
    }
    saveRightSequenceToStatistics(result) {
        let max = 0;
        let curMax = 0;
        result.forEach((res) => {
            if (res) {
                curMax++;
                max = curMax > max ? curMax : max;
            }
            else {
                curMax = 0;
            }
        });
        void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.getUserStatistics().then((stat) => {
            let newStat;
            if ('error' in stat) {
                newStat = {
                    learnedWords: 0,
                    optional: {
                        audioCall: `${max}`,
                        sprint: '0',
                    },
                };
            }
            else {
                newStat = stat;
                delete newStat.id;
                const oldMax = parseInt(newStat.optional.audioCall);
                max = max > oldMax ? max : oldMax;
                newStat.optional.audioCall = `${max}`;
            }
            void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.updateUserStatistics(newStat);
        });
    }
}


/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCall.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCall.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioCall": () => (/* binding */ AudioCall)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LoadingPage/LoadingPage */ "./src/app/pages/LoadingPage/LoadingPage.ts");
/* harmony import */ var _AudioCall_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioCall.model */ "./src/app/pages/AudioCallPage/AudioCall.model.ts");
/* harmony import */ var _AudioCallGamePage_AudioCallGamePage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AudioCallGamePage/AudioCallGamePage */ "./src/app/pages/AudioCallPage/AudioCallGamePage/AudioCallGamePage.ts");
/* harmony import */ var _GameResultPage_GameResultPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../GameResultPage/GameResultPage */ "./src/app/pages/GameResultPage/GameResultPage.ts");
/* harmony import */ var _AudioCallRules_AudioCallRules__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AudioCallRules/AudioCallRules */ "./src/app/pages/AudioCallPage/AudioCallRules/AudioCallRules.ts");
/* harmony import */ var _AuthPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../AuthPage */ "./src/app/pages/AuthPage/index.ts");
/* harmony import */ var _utils_GamesGetData__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/GamesGetData */ "./src/app/utils/GamesGetData/index.ts");








const WORDS_IN_GAME = 20;
class AudioCall {
    constructor(parent, group, page) {
        this.group = group;
        this.page = page;
        this.parent = parent;
        this.audioCallModel = new _AudioCall_model__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.gamesGetData = new _utils_GamesGetData__WEBPACK_IMPORTED_MODULE_7__.GamesGetData();
    }
    render() {
        this.rules = new _AudioCallRules_AudioCallRules__WEBPACK_IMPORTED_MODULE_5__["default"](this.parent, this.page !== undefined);
        this.rules.onClick = (group) => {
            this.rules.destroy();
            void this.mainCycle(group);
        };
    }
    async mainCycle(group) {
        const loading = new _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_1__["default"](this.parent);
        const currGroup = this.group !== undefined ? this.group : group;
        const auth = new _AuthPage__WEBPACK_IMPORTED_MODULE_6__.AuthPage(document.body);
        const words = group !== -1 || !auth.isAuthorized()
            ? await this.gamesGetData.getWordsFromGroup(currGroup, this.page)
            : await this.gamesGetData.getAggregatedWordsFromGroup(this.group, this.page);
        loading.destroy();
        const answerResult = [];
        const gameWords = words.sort(() => Math.random() - 0.5).slice(0, WORDS_IN_GAME);
        for (let i = 0; i < gameWords.length; i++) {
            const promise = new Promise((resolve) => {
                this.game = new _AudioCallGamePage_AudioCallGamePage__WEBPACK_IMPORTED_MODULE_3__["default"](this.parent, i, gameWords, (str) => resolve(str));
            });
            const result = await promise;
            this.game.destroy();
            answerResult.push(result);
            if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized()) {
                void this.audioCallModel.saveResultToServer(gameWords[i], result);
            }
        }
        if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized()) {
            void this.audioCallModel.saveRightSequenceToStatistics(answerResult);
        }
        new _GameResultPage_GameResultPage__WEBPACK_IMPORTED_MODULE_4__["default"](this.parent, gameWords, answerResult, () => this.exitGame());
    }
    exitGame() {
        this.parent.innerHTML = '';
        location.href = '';
    }
}


/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCallGamePage/AudioCallGamePage.ts":
/*!****************************************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCallGamePage/AudioCallGamePage.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AudioCallGamePage)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components_Burger_Burger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/Burger/Burger */ "./src/app/components/Burger/Burger.ts");
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _gamepage_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gamepage.scss */ "./src/app/pages/AudioCallPage/AudioCallGamePage/gamepage.scss");





const ANSWER_BUTTONS = 5;
class AudioCallGamePage extends _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator {
    constructor(parent, curIndex, gameWords, onNext) {
        super(parent, 'div', 'gamepage');
        this.onNext = onNext;
        this.btnMass = [];
        this.answer = false;
        this.word = gameWords[curIndex];
        new _components_Burger_Burger__WEBPACK_IMPORTED_MODULE_1__["default"](parent, () => this.destroy());
        const progressWnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.node, 'div', 'gamepage__progress-window');
        for (let i = 0; i < gameWords.length; i++) {
            const item = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(progressWnd.node, 'div', 'gamepage__progress-item');
            if (i <= curIndex)
                item.node.style.backgroundColor = '#202020';
        }
        this.audioWindow = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.node, 'div', 'gamepage__audio-window');
        this.btnPlay = new _components_Button__WEBPACK_IMPORTED_MODULE_2__.Button(this.audioWindow.node, 'gamepage__play', '', () => this.playWord());
        this.audio = new Audio(`${_basic__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/${this.word.audio}`);
        this.audio.oncanplaythrough = () => this.playWord();
        const btnWrapper1 = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.node, 'div', 'gamepage__btn-wrapper');
        const answersNum = this.generateRandomSequence(ANSWER_BUTTONS - 1, gameWords.length, curIndex);
        answersNum.push(curIndex);
        this.answers = answersNum.sort(() => Math.random() - 0.5).map((num) => gameWords[num].wordTranslate);
        this.answers.forEach((btnText, index) => {
            this.btnMass.push(new _components_Button__WEBPACK_IMPORTED_MODULE_2__.Button(btnWrapper1.node, 'gamepage__answer', `${index + 1}. ${btnText}`, () => this.onAnswer(index)));
        });
        const btnWrapper2 = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.node, 'div', 'gamepage__btn-wrapper');
        this.btnNext = new _components_Button__WEBPACK_IMPORTED_MODULE_2__.Button(btnWrapper2.node, 'gamepage__next', 'Next', () => {
            if (this.isAnswered)
                this.onNext(this.answer);
        });
        this.keyHandlerBind = this.keyHandler.bind(this);
        window.addEventListener('keyup', this.keyHandlerBind);
        this.isAnswered = false;
    }
    /**
     * Обработчик события KeyboardEvent для выбора с клавиатуры
     * @param e Событие KeyboardEvent
     */
    keyHandler(e) {
        if (e.key > '0' && e.key <= `${ANSWER_BUTTONS}`) {
            this.onAnswer(parseInt(e.key) - 1);
        }
        if (e.key === 'Enter' && this.isAnswered) {
            this.onNext(this.answer);
        }
    }
    destroy() {
        window.removeEventListener('keyup', this.keyHandlerBind);
        super.destroy();
    }
    onAnswer(index) {
        if (this.isAnswered)
            return;
        this.isAnswered = true;
        this.answer = this.answers[index] === this.word.wordTranslate;
        this.btnMass[index].node.classList.add(this.answer ? 'answer_right' : 'answer_wrong');
        this.btnPlay.destroy();
        const img = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.audioWindow.node, 'img', 'audio-window__img');
        img.node.src = `${_basic__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/${this.word.image}`;
        img.node.alt = `${this.word.word}`;
        const rightWnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(this.audioWindow.node, 'div', 'audio-window__right-box');
        new _components_Button__WEBPACK_IMPORTED_MODULE_2__.Button(rightWnd.node, 'audio-window__play', '', () => this.playWord());
        new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(rightWnd.node, 'span', '', this.word.word);
        new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(rightWnd.node, 'span', 'audio-window__trascript', this.word.transcription);
        new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(rightWnd.node, 'span', '', ` - ${this.word.wordTranslate}`);
        new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(rightWnd.node, 'div', 'audio-window__text', this.word.textExample);
        new _components_Creator__WEBPACK_IMPORTED_MODULE_3__.Creator(rightWnd.node, 'div', 'audio-window__text', this.word.textExampleTranslate);
    }
    playWord() {
        void this.audio.play();
    }
    /**
     * Возвращает случайное число, не больше maxInt
     * @param maxInt Максимальное число
     * @returns Случайное числе не больше maxInt
     */
    getRandomInt(maxInt) {
        return Math.floor(Math.random() * maxInt);
    }
    /**
     * Возвращает массив случайных чисел
     * @param amount Количество чисел в массиве
     * @param maxNumber Максимальное число
     * @param exclude Исключить число
     * @returns Массив случайных чисел
     */
    generateRandomSequence(amount, maxNumber, exclude) {
        const mass = [];
        while (mass.length < amount) {
            const n = this.getRandomInt(maxNumber);
            if (n === exclude || mass.includes(n))
                continue;
            mass.push(n);
        }
        return mass;
    }
}


/***/ }),

/***/ "./src/app/pages/AudioCallPage/AudioCallRules/AudioCallRules.ts":
/*!**********************************************************************!*\
  !*** ./src/app/pages/AudioCallPage/AudioCallRules/AudioCallRules.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AudioCallRules)
/* harmony export */ });
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _basic_common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../basic/common/constants */ "./src/app/basic/common/constants.ts");
/* harmony import */ var _rules_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./rules.scss */ "./src/app/pages/AudioCallPage/AudioCallRules/rules.scss");




class AudioCallRules extends _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator {
    constructor(parent, fromBook = false) {
        super(parent, 'div', 'rules');
        const wnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.node, 'div', 'rules__window', `
        <h2 class="rules__title">Правила игры "Аудиовызов"</h2>
        <p class="rules__rules">Игра "Аудиовызов" позволяет улучшить восприятие слов на слух.</p>
        <p class="rules__rules">Вы должны выбрать перевод услышанного слова.</p>
        <p class="rules__rules">Управлять можно кнопками 1 - 5 выбор, Enter - следущий</p>
      `);
        const btnWrapper = new _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(wnd.node, 'div', 'rules__btn-wrapper');
        if (fromBook) {
            new _components_Button__WEBPACK_IMPORTED_MODULE_0__.Button(btnWrapper.node, 'rules__button', 'Ok', () => this.onClick(-1));
        }
        else {
            btnWrapper.node.innerHTML += '<p class="rules__rules">Выберите группу сложности:</p>';
            for (let i = 1; i <= _basic_common_constants__WEBPACK_IMPORTED_MODULE_2__.GROUP_AMOUNT; i++) {
                const btn = new _components_Button__WEBPACK_IMPORTED_MODULE_0__.Button(btnWrapper.node, 'rules__button', `${i}`, () => this.onClick(i));
                btn.node.style.backgroundColor = this.getColorFromNumber(i);
            }
        }
        this.keyHandlerBind = this.keyHandler.bind(this);
        window.addEventListener('keyup', this.keyHandlerBind);
    }
    /**
     * Обработчик события KeyboardEvent для выбора с клавиатуры
     * @param e Событие KeyboardEvent
     */
    keyHandler(e) {
        if (e.key > '0' && e.key <= `${_basic_common_constants__WEBPACK_IMPORTED_MODULE_2__.GROUP_AMOUNT}`) {
            this.onClick(parseInt(e.key));
        }
    }
    destroy() {
        window.removeEventListener('keyup', this.keyHandlerBind);
        super.destroy();
    }
    getColorFromNumber(num) {
        let str = '#';
        str += num & 1 ? 'ff' : '00';
        str += num & 2 ? 'ff' : '00';
        str += num & 4 ? 'ff' : '00';
        return str;
    }
}


/***/ }),

/***/ "./src/app/pages/AudioCallPage/index.ts":
/*!**********************************************!*\
  !*** ./src/app/pages/AudioCallPage/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioCall": () => (/* reexport safe */ _AudioCall__WEBPACK_IMPORTED_MODULE_0__.AudioCall)
/* harmony export */ });
/* harmony import */ var _AudioCall__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioCall */ "./src/app/pages/AudioCallPage/AudioCall.ts");



/***/ }),

/***/ "./src/app/pages/AuthPage/AuthPage.model.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/AuthPage/AuthPage.model.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AuthPageModel)
/* harmony export */ });
/* harmony import */ var _basic_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic/api */ "./src/app/basic/api/index.ts");

class AuthPageModel {
    /**
     * Производит регистрацию нового пользователя
     * @param name Имя пользователя
     * @param email е-мейл пользователя
     * @param password Пароль пользователя
     * @returns Данные о регистрации или ошибку
     */
    async registerNewUser(name, email, password) {
        return _basic_api__WEBPACK_IMPORTED_MODULE_0__.Api.createNewUser({ name, email, password });
    }
    /**
     * Производит логин пользователя
     * @param email Логин пользователя
     * @param password Пароль пользователя
     * @returns Токен логина или ошибка
     */
    async loginUser(email, password) {
        return _basic_api__WEBPACK_IMPORTED_MODULE_0__.Api.loginUser({ email, password });
    }
    /**
     * Записыват токен и ИД пользователя для дальнейших запросов
     * @param response Токен логина и ИД
     */
    setAuthData(response) {
        _basic_api__WEBPACK_IMPORTED_MODULE_0__.Api.setAuthData(response);
    }
}


/***/ }),

/***/ "./src/app/pages/AuthPage/AuthPage.ts":
/*!********************************************!*\
  !*** ./src/app/pages/AuthPage/AuthPage.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AuthPage": () => (/* binding */ AuthPage)
/* harmony export */ });
/* harmony import */ var _AuthPage_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AuthPage.model */ "./src/app/pages/AuthPage/AuthPage.model.ts");
/* harmony import */ var _AuthPage_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AuthPage.view */ "./src/app/pages/AuthPage/AuthPage.view.ts");
/* harmony import */ var _basic_enums_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../basic/enums/enums */ "./src/app/basic/enums/enums.ts");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");




const TOKEN_WORK_TIME = 4; //часа
class AuthPage {
    constructor(parent) {
        this.parent = parent;
        if (typeof AuthPage.instance === 'object')
            return AuthPage.instance;
        this.authPageModel = new _AuthPage_model__WEBPACK_IMPORTED_MODULE_0__["default"]();
        this.authPageView = new _AuthPage_view__WEBPACK_IMPORTED_MODULE_1__["default"](this.parent);
        this.authPageView.onClick = (text) => this.onClick(text);
        AuthPage.instance = this;
    }
    render() {
        this.authPageView.render();
    }
    /**
     * Обработчик нажатия кнопки регистрации или логина
     * @param text Строка нажатой кнопки
     */
    onClick(text) {
        const [name, login, password] = this.authPageView.getLoginData();
        if (text === _basic_enums_enums__WEBPACK_IMPORTED_MODULE_2__.ERegisterButtonText.cancel) {
            this.destroy();
            this.tryLaunchExit();
        }
        else if (text === _basic_enums_enums__WEBPACK_IMPORTED_MODULE_2__.ERegisterButtonText.login) {
            this.authPageView.setMessageText('Logining ...', 'green');
            this.loginUser(login, password);
        }
        else {
            void this.authPageModel.registerNewUser(name, login, password).then((response) => {
                if ('errorMessage' in response) {
                    this.authPageView.setMessageText(response.errorMessage);
                }
                else {
                    this.loginUser(login, password);
                }
            });
        }
    }
    /**
     * Производит логин пользователя. В случае успеха закрывает окно
     * @param login Логин
     * @param password Пароль
     */
    loginUser(login, password) {
        void this.authPageModel.loginUser(login, password).then((response) => {
            if ('errorMessage' in response) {
                this.authPageView.setMessageText(response.errorMessage);
            }
            else {
                this.authPageModel.setAuthData(response);
                this.saveAuthToLocalStorage();
                this.destroy();
                this.tryLaunchExit();
            }
        });
    }
    /**
     * Удаляет окно из DOM
     */
    destroy() {
        this.authPageView.destroy();
    }
    /**
     * Функция запускает переданную функцию перед выходом
     */
    tryLaunchExit() {
        if (this.onExit !== undefined) {
            this.onExit();
        }
    }
    saveAuthToLocalStorage() {
        const auth = _basic__WEBPACK_IMPORTED_MODULE_3__.Api.getAuthToken();
        if (auth !== null) {
            auth.time = Date.now();
            localStorage.setItem('rslang-auth', JSON.stringify(auth));
        }
    }
    restoreAuthFromLocalStorage() {
        const str = localStorage.getItem('rslang-auth');
        if (!str)
            return false;
        try {
            const auth = JSON.parse(str);
            if (!auth)
                return false;
            if (!auth.userId || typeof auth.userId !== 'string')
                return false;
            if (!auth.token || typeof auth.token !== 'string')
                return false;
            if (!auth.refreshToken || typeof auth.refreshToken !== 'string')
                return false;
            if (!auth.time || typeof auth.time !== 'number')
                return false;
            const timePast = (Date.now() - auth.time) / 60 / 60 / 1000; // в часах
            if (timePast < TOKEN_WORK_TIME) {
                _basic__WEBPACK_IMPORTED_MODULE_3__.Api.setAuthData({
                    message: '',
                    token: auth.token,
                    refreshToken: auth.refreshToken,
                    userId: auth.userId,
                    name: '',
                }, auth.time);
                return true;
            }
            else {
                return false;
            }
        }
        catch {
            return false;
        }
    }
    isAuthorized() {
        if (_basic__WEBPACK_IMPORTED_MODULE_3__.Api.isAuthorized())
            return true;
        if (this.restoreAuthFromLocalStorage())
            return true;
        return false;
    }
    unloginUser() {
        _basic__WEBPACK_IMPORTED_MODULE_3__.Api.unloginUser();
        this.clearAuthInLocalStorage();
    }
    clearAuthInLocalStorage() {
        localStorage.removeItem('rslang-auth');
    }
}


/***/ }),

/***/ "./src/app/pages/AuthPage/AuthPage.view.ts":
/*!*************************************************!*\
  !*** ./src/app/pages/AuthPage/AuthPage.view.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AuthPageView)
/* harmony export */ });
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _LabelInput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LabelInput */ "./src/app/pages/AuthPage/LabelInput.ts");
/* harmony import */ var _register_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./register.scss */ "./src/app/pages/AuthPage/register.scss");
/* harmony import */ var _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../basic/enums/enums */ "./src/app/basic/enums/enums.ts");





class AuthPageView {
    constructor(parent) {
        this.parent = parent;
        this.loginState = true;
    }
    render() {
        this.loginState = true;
        this.screen = new _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.parent, 'div', 'register');
        this.wnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.screen.node, 'div', 'register__window');
        this.name = new _LabelInput__WEBPACK_IMPORTED_MODULE_2__["default"](this.wnd.node, 'Name');
        this.name.showInput(!this.loginState);
        this.email = new _LabelInput__WEBPACK_IMPORTED_MODULE_2__["default"](this.wnd.node, 'E-Mail');
        this.email.setInputType('email');
        this.password = new _LabelInput__WEBPACK_IMPORTED_MODULE_2__["default"](this.wnd.node, 'Password');
        this.password.setInputType('password');
        this.message = new _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.wnd.node, 'div', 'register__message');
        this.btnSwitch = new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(this.wnd.node, 'register__button_switch', 'register', () => this.onSwitch());
        this.btnLogin = new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(this.wnd.node, 'register__button', _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.login, (text) => this.checkFields(text));
        this.btnLogin.node.style.display = this.loginState ? 'inline-block' : 'none';
        this.btnPassword = new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(this.wnd.node, 'register__button', _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.register, (text) => this.checkFields(text));
        this.btnPassword.node.style.display = !this.loginState ? 'inline-block' : 'none';
        this.btnCancel = new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(this.wnd.node, 'register__button', _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.cancel, (text) => this.checkFields(text));
        setTimeout(() => (this.screen.node.style.opacity = '1'), 0);
        this.keyboardHandlerThis = this.keyboardHandler.bind(this);
        window.addEventListener('keyup', this.keyboardHandlerThis);
    }
    destroy() {
        this.screen.node.style.opacity = '0';
        setTimeout(() => this.screen.destroy(), 500);
        window.removeEventListener('keyup', this.keyboardHandlerThis);
    }
    /**
     * Получает из формы имя, логин и пароль
     * @returns Имя, логин и пароль
     */
    getLoginData() {
        return [this.name.getValue().trim(), this.email.getValue().trim(), this.password.getValue().trim()];
    }
    /**
     * Выводит сообщение об ошибке
     * @param text Текст для вывода
     */
    setMessageText(text, color) {
        this.message.node.textContent = text;
        this.message.node.style.color = color ? color : '';
    }
    onSwitch() {
        this.loginState = !this.loginState;
        this.name.showInput(!this.loginState);
        this.btnLogin.node.style.display = this.loginState ? 'inline-block' : 'none';
        this.btnPassword.node.style.display = !this.loginState ? 'inline-block' : 'none';
        this.btnSwitch.node.textContent = this.loginState ? 'register' : 'login';
    }
    checkFields(text) {
        if (text !== _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.cancel) {
            const [name, email, password] = this.getLoginData();
            if (!this.loginState && !/^\w+$/.test(name))
                return this.setMessageText('В имени использованы недопустимые символы');
            if (!/^(.+)@(\S+)$/.test(email))
                return this.setMessageText('Не правильный e-mail');
            if (!/[A-Za-z0-9]+/.test(password))
                return this.setMessageText('Для пароля допустимы латинские символы и цифры');
            if (password.length < 8)
                return this.setMessageText('Длина пароля должна быть не менее 8 символов');
        }
        this.onClick(text);
    }
    keyboardHandler(e) {
        if (e.key === 'Enter')
            this.checkFields(this.loginState ? _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.login : _basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.register);
        if (e.key === 'Escape')
            this.onClick(_basic_enums_enums__WEBPACK_IMPORTED_MODULE_4__.ERegisterButtonText.cancel);
        return;
    }
}


/***/ }),

/***/ "./src/app/pages/AuthPage/LabelInput.ts":
/*!**********************************************!*\
  !*** ./src/app/pages/AuthPage/LabelInput.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LabelInput)
/* harmony export */ });
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _components_Input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/Input */ "./src/app/components/Input/index.ts");


class LabelInput {
    constructor(parent, name) {
        this.wnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(parent, 'div', 'input__wrapper');
        this.span = new _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator(this.wnd.node, 'span', 'input__span', name);
        this.input = new _components_Input__WEBPACK_IMPORTED_MODULE_1__.Input(this.wnd.node, 'input__input');
    }
    /**
     * Получает значение поля инпута
     * @returns Текст в поле инпута
     */
    getValue() {
        return this.input.getValue();
    }
    /**
     * Устанавливает тип инпута отличный от type='text'
     * @param type Тип инпута
     */
    setInputType(type) {
        this.input.node.type = type;
    }
    showInput(show) {
        this.wnd.node.style.display = show ? 'block' : 'none';
    }
}


/***/ }),

/***/ "./src/app/pages/AuthPage/index.ts":
/*!*****************************************!*\
  !*** ./src/app/pages/AuthPage/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AuthPage": () => (/* reexport safe */ _AuthPage__WEBPACK_IMPORTED_MODULE_0__.AuthPage)
/* harmony export */ });
/* harmony import */ var _AuthPage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AuthPage */ "./src/app/pages/AuthPage/AuthPage.ts");



/***/ }),

/***/ "./src/app/pages/GameResultPage/GameResultPage.ts":
/*!********************************************************!*\
  !*** ./src/app/pages/GameResultPage/GameResultPage.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ GameResultPage)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components */ "./src/app/components/index.ts");
/* harmony import */ var _result_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./result.scss */ "./src/app/pages/GameResultPage/result.scss");



class GameResultPage extends _components__WEBPACK_IMPORTED_MODULE_1__.Creator {
    constructor(parent, gameWords, gameResult, onExit) {
        super(parent, 'div', 'result', ` <input type="radio" class="result__radio" name="radio" id="radio1" checked>
        <input type="radio" class="result__radio" name="radio" id="radio2">`);
        const rightAnswers = gameResult.filter((el) => el).length;
        const wnd = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(this.node, 'div', 'result__main-window');
        // Левое окно
        const wndLeft = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(wnd.node, 'div', 'result__window-left', ` <div class="result__word_middle"><div class="result__result-sign result-sign_right"></div>
          <span>Правильных ответов: ${rightAnswers}</span></div>
        <div class="result__word_middle"><div class="result__result-sign result-sign_wrong"></div>
          <span>Неправильных ответов: ${gameResult.length - rightAnswers}</span></div>
        <br>
        <div class="result__word_middle">Ваш результат: ${Math.round((rightAnswers * 100) / gameResult.length)} %</div>`);
        const svgWrapper = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(wndLeft.node, 'div', 'result__svg-wrapper');
        const diagram = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        diagram.setAttributeNS(null, 'viewBox', '0 0 100 100');
        diagram.setAttributeNS(null, 'width', '200');
        diagram.setAttributeNS(null, 'height', '200');
        this.drawPie(diagram, rightAnswers / gameResult.length);
        svgWrapper.node.append(diagram);
        // Правое окно
        const rightWnd = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(wnd.node, 'div', 'result__window-right');
        const frame = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(rightWnd.node, 'div', 'result__frame');
        gameWords.forEach((word, index) => {
            const audio = new Audio(`${_basic__WEBPACK_IMPORTED_MODULE_0__.baseUrl}/${word.audio}`);
            const line = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(frame.node, 'div', 'result__line');
            const result = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(line.node, 'div', 'result__result-sign');
            result.node.classList.add(gameResult[index] ? 'result-sign_right' : 'result-sign_wrong');
            const btn = new _components__WEBPACK_IMPORTED_MODULE_1__.Button(line.node, 'result__play', '', () => audio.play());
            btn.node.disabled = true;
            audio.oncanplaythrough = () => {
                btn.node.disabled = false;
            };
            new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(line.node, 'span', 'result__word', word.word);
            new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(line.node, 'span', 'result__trascript', word.transcription);
            new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(line.node, 'span', 'result__word', ` - ${word.wordTranslate}`);
        });
        const lowBar = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(this.node, 'div', 'low-bar', `<div></div><div class="low-bar__label-wrapper">
          <label for="radio1" class="low-bar__label"></label>
          <label for="radio2" class="low-bar__label"></label>
        </div>`);
        new _components__WEBPACK_IMPORTED_MODULE_1__.Button(lowBar.node, 'result__exit', 'Exit', () => onExit());
    }
    drawPie(element, angle) {
        const drSegment = function (style, ange1, ange2) {
            let dir = '0';
            if (ange2 - ange1 > 0.5)
                dir = '1';
            const angle1 = Math.PI * 2 * ange1;
            const angle2 = Math.PI * 2 * ange2;
            const rad = 45, cx = 50, cy = 50;
            const dx1 = Math.sin(angle1) * rad + cx;
            const dy1 = -Math.cos(angle1) * rad + cy;
            const dx2 = Math.sin(angle2) * rad + cx;
            const dy2 = -Math.cos(angle2) * rad + cy;
            const el = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            el.setAttributeNS(null, 'style', style);
            el.setAttributeNS(null, 'd', `M ${dx1},${dy1} A ${rad},${rad} 0 ${dir} 1 ${dx2},${dy2} L ${cx},${cy} Z`);
            element.appendChild(el);
        };
        if (angle !== 0) {
            drSegment('fill:lime; stroke:black; stroke-width:3;', 0, angle);
            drSegment('fill:red; stroke:black; stroke-width:3;', angle, 1);
        }
        else {
            drSegment('fill:red; stroke:black; stroke-width:3;', 0, 0.99);
        }
    }
}


/***/ }),

/***/ "./src/app/pages/LoadingPage/LoadingPage.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/LoadingPage/LoadingPage.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LoadingPage)
/* harmony export */ });
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _loadingpage_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadingpage.scss */ "./src/app/pages/LoadingPage/loadingpage.scss");


class LoadingPage extends _components_Creator__WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parent) {
        super(parent, 'div', 'loading');
        this.node.innerHTML = `
      <div class="loading__text">Loading...</div>
      <div class="loading__outer-box">
        <div class="loading__inner-box inner-box1"></div>
        <div class="loading__inner-box inner-box2"></div>
        <div class="loading__inner-box inner-box3"></div>
        <div class="loading__inner-box inner-box4"></div>
      </div>
    `;
    }
}


/***/ }),

/***/ "./src/app/pages/SprintPage/Sprint.model.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/SprintPage/Sprint.model.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ sprintModel)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _basic_api_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../basic/api/api */ "./src/app/basic/api/api.ts");


const NORMAL_DIFFICULTY = 3;
const DIFFICULT_DIFFICULTY = 5;
class sprintModel {
    saveResultToServer(word, answer) {
        void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.getUserWord(word.id).then((wordInfo) => {
            if ('difficulty' in wordInfo) {
                // Если запись уже существует, то исправляем и обновляем
                delete wordInfo.id;
                delete wordInfo.wordId;
                if (answer) {
                    // Если правильный ответ
                    wordInfo.optional.sprint.right++;
                    wordInfo.optional.sprint.longRight++;
                    if ((wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal &&
                        wordInfo.optional.sprint.longRight > NORMAL_DIFFICULTY) ||
                        (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult &&
                            wordInfo.optional.sprint.longRight > DIFFICULT_DIFFICULTY)) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied;
                    }
                }
                else {
                    // Если неправильный
                    wordInfo.optional.sprint.wrong++;
                    wordInfo.optional.sprint.longRight = 0;
                    if (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult;
                    }
                    else if (wordInfo.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied) {
                        wordInfo.difficulty = _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal;
                    }
                }
                void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.updateUserWord(word.id, wordInfo);
            }
            else {
                // Иначе создаем новую запись
                const newWordInfo = {
                    difficulty: answer ? _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.normal : _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.difficult,
                    optional: {
                        audioCall: {
                            right: 0,
                            wrong: 0,
                            longRight: 0,
                        },
                        sprint: {
                            right: answer ? 1 : 0,
                            wrong: !answer ? 1 : 0,
                            longRight: answer ? 1 : 0,
                        },
                    },
                };
                void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.createUserWord(word.id, newWordInfo);
            }
        });
    }
    saveRightSequenceToStatistics(result) {
        let max = 0;
        let curMax = 0;
        result.forEach((res) => {
            if (res) {
                curMax++;
                max = curMax > max ? curMax : max;
            }
            else {
                curMax = 0;
            }
        });
        void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.getUserStatistics().then((stat) => {
            let newStat;
            if ('error' in stat) {
                newStat = {
                    learnedWords: 0,
                    optional: {
                        sprint: `${max}`,
                        audioCall: '0',
                    },
                };
            }
            else {
                newStat = stat;
                delete newStat.id;
                const oldMax = parseInt(newStat.optional.sprint);
                max = max > oldMax ? max : oldMax;
                newStat.optional.sprint = `${max}`;
            }
            void _basic_api_api__WEBPACK_IMPORTED_MODULE_1__.Api.updateUserStatistics(newStat);
        });
    }
}


/***/ }),

/***/ "./src/app/pages/SprintPage/Sprint.ts":
/*!********************************************!*\
  !*** ./src/app/pages/SprintPage/Sprint.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sprint": () => (/* binding */ Sprint)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LoadingPage/LoadingPage */ "./src/app/pages/LoadingPage/LoadingPage.ts");
/* harmony import */ var _Sprint_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sprint.model */ "./src/app/pages/SprintPage/Sprint.model.ts");
/* harmony import */ var _SprintGamePage_SprintGamePage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SprintGamePage/SprintGamePage */ "./src/app/pages/SprintPage/SprintGamePage/SprintGamePage.ts");
/* harmony import */ var _GameResultPage_GameResultPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../GameResultPage/GameResultPage */ "./src/app/pages/GameResultPage/GameResultPage.ts");
/* harmony import */ var _SprintRules_SprintRules__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SprintRules/SprintRules */ "./src/app/pages/SprintPage/SprintRules/SprintRules.ts");
/* harmony import */ var _utils_GamesGetData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/GamesGetData */ "./src/app/utils/GamesGetData/index.ts");
/* harmony import */ var _AuthPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../AuthPage */ "./src/app/pages/AuthPage/index.ts");








class Sprint {
    constructor(parent, group, page) {
        this.group = group;
        this.page = page;
        this.parent = parent;
        this.sprintModel = new _Sprint_model__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.gamesGetData = new _utils_GamesGetData__WEBPACK_IMPORTED_MODULE_6__.GamesGetData();
    }
    render() {
        this.rules = new _SprintRules_SprintRules__WEBPACK_IMPORTED_MODULE_5__["default"](this.parent, this.page !== undefined);
        this.rules.onClick = (group) => {
            this.rules.destroy();
            void this.mainCycle(group);
        };
    }
    async mainCycle(group) {
        const audioWrong = new Audio('public/static/sound/wrong.mp3');
        audioWrong.volume = 0.5;
        const audioRight = new Audio('public/static/sound/right.mp3');
        const loading = new _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_1__["default"](this.parent);
        const currGroup = this.group !== undefined ? this.group : group;
        const auth = new _AuthPage__WEBPACK_IMPORTED_MODULE_7__.AuthPage(document.body);
        const words = group !== -1 || !auth.isAuthorized()
            ? await this.gamesGetData.getWordsFromGroup(currGroup, this.page)
            : await this.gamesGetData.getAggregatedWordsFromGroup(this.group, this.page);
        loading.destroy();
        this.answerResult = [];
        this.gameWords = words.sort(() => Math.random() - 0.5);
        this.counter = 60;
        this.timer = setInterval(() => this.timerHandler(), 1000);
        for (this.index = 0; this.index < this.gameWords.length; this.index++) {
            const promise = new Promise((resolve) => {
                this.game = new _SprintGamePage_SprintGamePage__WEBPACK_IMPORTED_MODULE_3__["default"](this.parent, this.index, this.gameWords, (str) => resolve(str), audioRight, audioWrong, this.counter);
            });
            const result = await promise;
            this.game.destroy();
            this.answerResult.push(result);
            if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized()) {
                void this.sprintModel.saveResultToServer(this.gameWords[this.index], result);
            }
        }
        this.endGame();
    }
    timerHandler() {
        this.counter--;
        if (this.game instanceof _SprintGamePage_SprintGamePage__WEBPACK_IMPORTED_MODULE_3__["default"]) {
            this.game.showCount(this.counter);
        }
        if (!this.counter) {
            this.game.destroy();
            this.endGame();
        }
    }
    endGame() {
        clearInterval(this.timer);
        const words = this.gameWords.slice(0, this.index);
        const answers = this.answerResult.slice(0, this.index);
        if (_basic__WEBPACK_IMPORTED_MODULE_0__.Api.isAuthorized()) {
            void this.sprintModel.saveRightSequenceToStatistics(answers);
        }
        new _GameResultPage_GameResultPage__WEBPACK_IMPORTED_MODULE_4__["default"](this.parent, words, answers, () => this.exitGame());
    }
    exitGame() {
        this.parent.innerHTML = '';
        location.hash = '';
    }
}


/***/ }),

/***/ "./src/app/pages/SprintPage/SprintGamePage/SprintGamePage.ts":
/*!*******************************************************************!*\
  !*** ./src/app/pages/SprintPage/SprintGamePage/SprintGamePage.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SprintGamePage)
/* harmony export */ });
/* harmony import */ var _components_Burger_Burger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/Burger/Burger */ "./src/app/components/Burger/Burger.ts");
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _gamepage_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gamepage.scss */ "./src/app/pages/SprintPage/SprintGamePage/gamepage.scss");




const ANSWER_BUTTONS = 2;
var EAnswer;
(function (EAnswer) {
    EAnswer[EAnswer["right"] = 0] = "right";
    EAnswer[EAnswer["wrong"] = 1] = "wrong";
})(EAnswer || (EAnswer = {}));
class SprintGamePage extends _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator {
    constructor(parent, curIndex, gameWords, onNext, audioRight, audioWrong, curTimer) {
        super(parent, 'div', 'gamepage-sprint');
        this.onNext = onNext;
        this.audioRight = audioRight;
        this.audioWrong = audioWrong;
        this.btnMass = [];
        this.word = gameWords[curIndex];
        this.burger = new _components_Burger_Burger__WEBPACK_IMPORTED_MODULE_0__["default"](parent, () => this.destroy());
        this.timer = new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(this.node, 'div', 'gamepage-sprint__timer', ('0' + `${curTimer}`).slice(-2));
        if (curTimer < 10)
            this.timer.node.classList.add('timer_time-expire');
        new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(this.node, 'div', 'gamepage-sprint__progress-window', `Слов: ${curIndex}`);
        const wordWnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(this.node, 'div', 'gamepage-sprint__word-window');
        new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(wordWnd.node, 'div', 'gamepage-sprint__word', `${gameWords[curIndex].word}`);
        let randomInt;
        do {
            randomInt = this.getRandomInt(gameWords.length);
        } while (randomInt === curIndex);
        this.translate = gameWords[Math.round(Math.random() * 10) % 2 ? randomInt : curIndex].wordTranslate;
        new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(wordWnd.node, 'div', 'gamepage-sprint__word', `${this.translate}`);
        const btnWrapper1 = new _components_Creator__WEBPACK_IMPORTED_MODULE_2__.Creator(this.node, 'div', 'gamepage-sprint__btn-wrapper');
        this.btnMass.push(new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(btnWrapper1.node, 'gamepage-sprint__answer btn_right', '1 Верно', () => this.onAnswer(EAnswer.right)));
        this.btnMass.push(new _components_Button__WEBPACK_IMPORTED_MODULE_1__.Button(btnWrapper1.node, 'gamepage-sprint__answer btn_wrong', '2 Не верно', () => this.onAnswer(EAnswer.wrong)));
        // const btnWrapper2 = new Creator(this.node, 'div', 'gamepage-sprint__btn-wrapper');
        // this.btnBack = new Button(btnWrapper2.node, 'gamepage-sprint__back', 'Quit', () => onExit());
        this.keyHandlerBind = this.keyHandler.bind(this);
        window.addEventListener('keyup', this.keyHandlerBind);
    }
    /**
     * Обработчик события KeyboardEvent для выбора с клавиатуры
     * @param e Событие KeyboardEvent
     */
    keyHandler(e) {
        if (e.key > '0' && e.key <= `${ANSWER_BUTTONS}`) {
            this.onAnswer(e.key === '1' ? EAnswer.right : EAnswer.wrong);
        }
    }
    destroy() {
        window.removeEventListener('keyup', this.keyHandlerBind);
        this.burger.destroy();
        super.destroy();
    }
    onAnswer(index) {
        const answer = (this.translate === this.word.wordTranslate) === (index === EAnswer.right);
        this.btnMass[index].node.classList.add(answer ? 'answer_right' : 'answer_wrong');
        if (answer) {
            void this.audioRight.play();
        }
        else {
            void this.audioWrong.play();
        }
        setTimeout(() => this.onNext(answer), 500);
    }
    /**
     * Возвращает случайное число, не больше maxInt
     * @param maxInt Максимальное число
     * @returns Случайное числе не больше maxInt
     */
    getRandomInt(maxInt) {
        return Math.floor(Math.random() * maxInt);
    }
    showCount(count) {
        this.timer.node.textContent = ('0' + `${count}`).slice(-2);
        if (count < 10)
            this.timer.node.classList.add('timer_time-expire');
        this.timer.node.classList.add('timer_tick');
        setTimeout(() => this.timer.node.classList.remove('timer_tick'), 300);
    }
}


/***/ }),

/***/ "./src/app/pages/SprintPage/SprintRules/SprintRules.ts":
/*!*************************************************************!*\
  !*** ./src/app/pages/SprintPage/SprintRules/SprintRules.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SprintRules)
/* harmony export */ });
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/Button */ "./src/app/components/Button/index.ts");
/* harmony import */ var _components_Creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/Creator */ "./src/app/components/Creator/index.ts");
/* harmony import */ var _basic_common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../basic/common/constants */ "./src/app/basic/common/constants.ts");
/* harmony import */ var _rules_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./rules.scss */ "./src/app/pages/SprintPage/SprintRules/rules.scss");




class SprintRules extends _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator {
    constructor(parent, fromBook = false) {
        super(parent, 'div', 'rules');
        const wnd = new _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(this.node, 'div', 'rules__window', `
        <h2 class="rules__title">Правила игры "Спринт"</h2>
        <p class="rules__rules">Игра "Спринт" развивает визуальное восприятие слов.</p>
        <p class="rules__rules">Вы должны ответить правильный перевод или нет.</p>
        <p class="rules__rules">Вы должны ответить как можно больше слов за 60 секунд.</p>
        <p class="rules__rules">Управлять можно кнопками 1, 2</p>
      `);
        const btnWrapper = new _components_Creator__WEBPACK_IMPORTED_MODULE_1__.Creator(wnd.node, 'div', 'rules__btn-wrapper');
        if (fromBook) {
            new _components_Button__WEBPACK_IMPORTED_MODULE_0__.Button(btnWrapper.node, 'rules__button', 'Ok', () => this.onClick(-1));
        }
        else {
            btnWrapper.node.innerHTML += '<p class="rules__rules">Выберите группу сложности:</p>';
            for (let i = 1; i <= _basic_common_constants__WEBPACK_IMPORTED_MODULE_2__.GROUP_AMOUNT; i++) {
                const btn = new _components_Button__WEBPACK_IMPORTED_MODULE_0__.Button(btnWrapper.node, 'rules__button', `${i}`, () => this.onClick(i));
                btn.node.style.backgroundColor = this.getColorFromNumber(i);
            }
        }
        this.keyHandlerBind = this.keyHandler.bind(this);
        window.addEventListener('keyup', this.keyHandlerBind);
    }
    /**
     * Обработчик события KeyboardEvent для выбора с клавиатуры
     * @param e Событие KeyboardEvent
     */
    keyHandler(e) {
        if (e.key > '0' && e.key <= `${_basic_common_constants__WEBPACK_IMPORTED_MODULE_2__.GROUP_AMOUNT}`) {
            this.onClick(parseInt(e.key));
        }
    }
    destroy() {
        window.removeEventListener('keyup', this.keyHandlerBind);
        super.destroy();
    }
    getColorFromNumber(num) {
        let str = '#';
        str += num & 1 ? 'ff' : '00';
        str += num & 2 ? 'ff' : '00';
        str += num & 4 ? 'ff' : '00';
        return str;
    }
}


/***/ }),

/***/ "./src/app/pages/SprintPage/index.ts":
/*!*******************************************!*\
  !*** ./src/app/pages/SprintPage/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sprint": () => (/* reexport safe */ _Sprint__WEBPACK_IMPORTED_MODULE_0__.Sprint)
/* harmony export */ });
/* harmony import */ var _Sprint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprint */ "./src/app/pages/SprintPage/Sprint.ts");



/***/ }),

/***/ "./src/app/pages/StatisticsPage/Statistics.ts":
/*!****************************************************!*\
  !*** ./src/app/pages/StatisticsPage/Statistics.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Statistics": () => (/* binding */ Statistics)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components */ "./src/app/components/index.ts");
/* harmony import */ var _AuthPage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../AuthPage */ "./src/app/pages/AuthPage/index.ts");
/* harmony import */ var _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../LoadingPage/LoadingPage */ "./src/app/pages/LoadingPage/LoadingPage.ts");
/* harmony import */ var _statistics_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./statistics.scss */ "./src/app/pages/StatisticsPage/statistics.scss");
/* harmony import */ var _StatisticsGames_StatisticsGames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StatisticsGames/StatisticsGames */ "./src/app/pages/StatisticsPage/StatisticsGames/StatisticsGames.ts");
/* harmony import */ var _StatisticsWords_StatisticsWords__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StatisticsWords/StatisticsWords */ "./src/app/pages/StatisticsPage/StatisticsWords/StatisticsWords.ts");







class Statistics {
    constructor(parent) {
        this.parent = parent;
        this.auth = new _AuthPage__WEBPACK_IMPORTED_MODULE_2__.AuthPage(this.parent);
    }
    render() {
        this.mainWnd = new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(this.parent, 'main', 'statistics__main-window');
        if (!this.auth.isAuthorized()) {
            // Не авторизирован
            new _components__WEBPACK_IMPORTED_MODULE_1__.Creator(this.mainWnd.node, 'div', 'statistics__not-authorized', 'Только авторизированные пользователи могут просматривать статистику');
        }
        else {
            //Авторизирован
            const load = new _LoadingPage_LoadingPage__WEBPACK_IMPORTED_MODULE_3__["default"](this.parent);
            const filter = {
                userWord: { $ne: null },
            };
            const obj = {
                // group: '1',
                // page: '1',
                wordsPerPage: '4000',
                filter: JSON.stringify(filter),
            };
            const promises = [
                _basic__WEBPACK_IMPORTED_MODULE_0__.Api.getUserStatistics(),
                _basic__WEBPACK_IMPORTED_MODULE_0__.Api.getUserAllAgregatedWords(obj),
            ];
            void Promise.all(promises).then(([stat, words]) => {
                load.destroy();
                new _StatisticsGames_StatisticsGames__WEBPACK_IMPORTED_MODULE_5__["default"](this.mainWnd.node, 'error' in stat ? null : stat, 'error' in words ? null : words);
                new _StatisticsWords_StatisticsWords__WEBPACK_IMPORTED_MODULE_6__["default"](this.mainWnd.node, 'error' in words ? null : words);
            });
        }
    }
}


/***/ }),

/***/ "./src/app/pages/StatisticsPage/StatisticsGames/StatisticsGames.ts":
/*!*************************************************************************!*\
  !*** ./src/app/pages/StatisticsPage/StatisticsGames/StatisticsGames.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StatisticsGames)
/* harmony export */ });
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components */ "./src/app/components/index.ts");

class StatisticsGames extends _components__WEBPACK_IMPORTED_MODULE_0__.Creator {
    constructor(parent, stat, words) {
        const newWordAudioCall = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.audioCall.right > 0)
                        return true;
                    if (userWord.optional.audioCall.wrong > 0)
                        return true;
                }
                return false;
            });
        const audioCallRight = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.audioCall.right > 0)
                        return true;
                }
                return false;
            });
        const audioCallWrong = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.audioCall.wrong > 0)
                        return true;
                }
                return false;
            });
        const newWordSprint = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.sprint.right > 0)
                        return true;
                    if (userWord.optional.sprint.wrong > 0)
                        return true;
                }
                return false;
            });
        const sprintRight = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.sprint.right > 0)
                        return true;
                }
                return false;
            });
        const sprintWrong = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.sprint.wrong > 0)
                        return true;
                }
                return false;
            });
        super(parent, 'div', 'statistics__window games-window', `
        <div class="statistics__window-title">Статистика игр</div>
        <div class="games-window__games-window">
          <div class="games-window__title-game">Игра "Аудиовызов"</div>
          <div class="games-window__statistic">
            <span class="sing-new"></span>
            <span class="statistics__text">Новых слов за день: ${newWordAudioCall ? newWordAudioCall.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-pie"></span>
            <span class="statistics__text">Процент правильных: ${audioCallRight && audioCallWrong && (audioCallRight.length > 0 || audioCallWrong.length > 0)
            ? Math.round((audioCallRight.length * 100) / (audioCallRight.length + audioCallWrong.length))
            : 0} %</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-right"></span>
            <span class="statistics__text">Отгадано правильно: ${audioCallRight ? audioCallRight.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-wrong"></span>
            <span class="statistics__text">Отгадано неправильно: ${audioCallWrong ? audioCallWrong.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-right"></span>
            <span class="statistics__text">
              Самая длинная правильная последовательность: ${stat ? stat.optional.audioCall : 0}
            </span>
          </div>
        </div>
        
        <div class="games-window__games-window">
          <div class="games-window__title-game">Игра "Спринт"</div>
          <div class="games-window__statistic">
            <span class="sing-new"></span>
            <span class="statistics__text">Новых слов за день: ${newWordSprint ? newWordSprint.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-pie"></span>
            <span class="statistics__text">Процент правильных: ${sprintRight && sprintWrong && (sprintRight.length > 0 || sprintWrong.length > 0)
            ? Math.round((sprintRight.length * 100) / (sprintRight.length + sprintWrong.length))
            : 0} %</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-right"></span>
            <span class="statistics__text">Отгадано правильно: ${sprintRight ? sprintRight.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-wrong"></span>
            <span class="statistics__text">Отгадано неправильно: ${sprintWrong ? sprintWrong.length : 0}</span>
          </div>
          <div class="games-window__statistic">
            <span class="sing-right"></span>
            <span class="statistics__text">
              Самая длинная правильная последовательность: ${stat ? stat.optional.sprint : 0}
            </span>
          </div>
        </div>
      `);
    }
}


/***/ }),

/***/ "./src/app/pages/StatisticsPage/StatisticsWords/StatisticsWords.ts":
/*!*************************************************************************!*\
  !*** ./src/app/pages/StatisticsPage/StatisticsWords/StatisticsWords.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StatisticsWords)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components */ "./src/app/components/index.ts");


class StatisticsWords extends _components__WEBPACK_IMPORTED_MODULE_1__.Creator {
    constructor(parent, words) {
        const totalNewWords = words && words[0] && words[0].totalCount[0] ? words[0].totalCount[0].count : 0;
        const totalStudiedWords = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                return !!userWord && userWord.difficulty === _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied;
            });
        const audioCallRight = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.audioCall.right > 0)
                        return true;
                }
                return false;
            });
        const audioCallWrong = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.audioCall.wrong > 0)
                        return true;
                }
                return false;
            });
        const sprintRight = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.sprint.right > 0)
                        return true;
                }
                return false;
            });
        const sprintWrong = !words
            ? null
            : words[0].paginatedResults.filter((word) => {
                const userWord = word.userWord;
                if (userWord) {
                    if (userWord.optional.sprint.wrong > 0)
                        return true;
                }
                return false;
            });
        let percent;
        if (sprintRight &&
            sprintWrong &&
            audioCallRight &&
            audioCallWrong &&
            (sprintRight.length > 0 || audioCallRight.length > 0 || sprintWrong.length > 0 || audioCallWrong.length > 0)) {
            percent = Math.round(((sprintRight.length + audioCallRight.length) * 100) /
                (sprintRight.length + sprintWrong.length + audioCallRight.length + audioCallWrong.length));
        }
        else
            percent = 0;
        super(parent, 'div', 'statistics__window words-window', `
        <div class="statistics__window-title">Статистика по словам</div>
        <div class="words-window__words-window">
          <div class="words-window__statistic">
            <span class="sing-new"></span>
            <span class="statistics__text">Новых слов за день: ${totalNewWords}</span>
          </div>
          <div class="words-window__statistic">
            <span class="sing-exclamation"></span>
            <span class="statistics__text">Изученных слов за день: ${totalStudiedWords ? totalStudiedWords.length : 0}</span>
          </div>
          <div class="words-window__statistic">
            <span class="sing-pie"></span>
            <span class="statistics__text">процент правильных ответов за день: ${percent} %</span>
          </div>
        </div>
      `);
    }
}


/***/ }),

/***/ "./src/app/pages/StatisticsPage/index.ts":
/*!***********************************************!*\
  !*** ./src/app/pages/StatisticsPage/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Statistics": () => (/* reexport safe */ _Statistics__WEBPACK_IMPORTED_MODULE_0__.Statistics)
/* harmony export */ });
/* harmony import */ var _Statistics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Statistics */ "./src/app/pages/StatisticsPage/Statistics.ts");



/***/ }),

/***/ "./src/app/pages/TextbookPage/index.ts":
/*!*********************************************!*\
  !*** ./src/app/pages/TextbookPage/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Textbook": () => (/* reexport safe */ _textbook__WEBPACK_IMPORTED_MODULE_0__.Textbook),
/* harmony export */   "TextbookView": () => (/* reexport safe */ _textbook_view__WEBPACK_IMPORTED_MODULE_1__.TextbookView)
/* harmony export */ });
/* harmony import */ var _textbook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textbook */ "./src/app/pages/TextbookPage/textbook.ts");
/* harmony import */ var _textbook_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textbook.view */ "./src/app/pages/TextbookPage/textbook.view.ts");




/***/ }),

/***/ "./src/app/pages/TextbookPage/textbook.ts":
/*!************************************************!*\
  !*** ./src/app/pages/TextbookPage/textbook.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Textbook": () => (/* binding */ Textbook)
/* harmony export */ });
/* harmony import */ var _textbook_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textbook.view */ "./src/app/pages/TextbookPage/textbook.view.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/ */ "./src/app/components/index.ts");
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");
/* harmony import */ var _components_Textbook_WordGroup_wordGroup_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/Textbook/WordGroup/wordGroup.view */ "./src/app/components/Textbook/WordGroup/wordGroup.view.ts");





class Textbook {
    constructor(parentNode) {
        this.parentNode = parentNode;
        _components__WEBPACK_IMPORTED_MODULE_1__.WordGroup.instance = undefined;
        _components_Textbook_WordGroup_wordGroup_view__WEBPACK_IMPORTED_MODULE_3__["default"].instance = undefined;
    }
    /**
     * Создает инстанс класса страницы
     */
    render() {
        const textbook = new _textbook_view__WEBPACK_IMPORTED_MODULE_0__.TextbookView(this.parentNode);
        this.renderGroupButtons(textbook);
        this.renderGameLinks(textbook);
    }
    /**
     * Создает переключатели групп
     * @param textbook Инстанс класса страницы
     */
    renderGroupButtons(textbook) {
        Object.entries(_basic__WEBPACK_IMPORTED_MODULE_2__.groups).forEach((item) => {
            new _components__WEBPACK_IMPORTED_MODULE_1__.WordTab(textbook, item);
        });
        if (_basic__WEBPACK_IMPORTED_MODULE_2__.Api.isAuthorized()) {
            new _components__WEBPACK_IMPORTED_MODULE_1__.WordTab(textbook, Object.entries(_basic__WEBPACK_IMPORTED_MODULE_2__.difficult)[0]);
        }
    }
    /**
     * Создает ссылки на игры в учебнике
     * @param textbook Инстанс класса страницы
     */
    renderGameLinks(textbook) {
        new _components__WEBPACK_IMPORTED_MODULE_1__.GameLinks(textbook.textbook.node);
    }
}


/***/ }),

/***/ "./src/app/pages/TextbookPage/textbook.view.ts":
/*!*****************************************************!*\
  !*** ./src/app/pages/TextbookPage/textbook.view.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextbookView": () => (/* binding */ TextbookView)
/* harmony export */ });
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components */ "./src/app/components/index.ts");
/* harmony import */ var _textbook_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textbook.scss */ "./src/app/pages/TextbookPage/textbook.scss");


class TextbookView {
    constructor(parentNode) {
        this.textbook = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(parentNode, 'div', 'textbook');
        this.textbookHeader = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.node, 'div', 'textbook__header');
        this.group = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbookHeader.node, 'div', 'group');
        this.title = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.node, 'h1', 'textbook__title', 'Words');
        this.words = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.node, 'div', 'words');
        this.pagination = new _components__WEBPACK_IMPORTED_MODULE_0__.Creator(this.textbook.node, 'div', 'pagination');
        this.activeGroup = this.title.node;
    }
}


/***/ }),

/***/ "./src/app/pages/index.ts":
/*!********************************!*\
  !*** ./src/app/pages/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Textbook": () => (/* reexport safe */ _TextbookPage__WEBPACK_IMPORTED_MODULE_0__.Textbook),
/* harmony export */   "TextbookView": () => (/* reexport safe */ _TextbookPage__WEBPACK_IMPORTED_MODULE_0__.TextbookView)
/* harmony export */ });
/* harmony import */ var _TextbookPage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextbookPage */ "./src/app/pages/TextbookPage/index.ts");



/***/ }),

/***/ "./src/app/utils/GamesGetData/GamesGetData.ts":
/*!****************************************************!*\
  !*** ./src/app/utils/GamesGetData/GamesGetData.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GamesGetData": () => (/* binding */ GamesGetData)
/* harmony export */ });
/* harmony import */ var _basic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../basic */ "./src/app/basic/index.ts");

class GamesGetData {
    /**
     * Возвращает список слов из определенного раздела
     * @param group Номер раздела
     * @returns Список слов
     */
    async getWordsFromGroup(group, page) {
        const promises = [];
        const maxPages = page ? page : _basic__WEBPACK_IMPORTED_MODULE_0__.PAGES_PER_GROUP;
        for (let i = 0; i < maxPages; i++) {
            promises.push(_basic__WEBPACK_IMPORTED_MODULE_0__.Api.getWords(`${group}`, `${i}`));
        }
        return Promise.all(promises).then((pages) => {
            let words = [];
            pages.forEach((page) => {
                if (!('error' in page)) {
                    words = words.concat(page);
                }
            });
            return words;
        });
    }
    /**
     * Возвращает список неизученных слов из определенного раздела
     * @param group Номер раздела
     * @param page Номер страницы
     * @returns Список слов
     */
    async getAggregatedWordsFromGroup(group, page) {
        const promises = [];
        const filter = {
            'userWord.difficulty': { $ne: _basic__WEBPACK_IMPORTED_MODULE_0__.EUserWordStatus.studied },
        };
        const obj = {
            group: `${group}`,
            page: '0',
            wordsPerPage: `${_basic__WEBPACK_IMPORTED_MODULE_0__.WORDS_PER_PAGE}`,
            filter: JSON.stringify(filter),
        };
        for (let i = 0; i <= page; i++) {
            obj.page = `${i}`;
            promises.push(_basic__WEBPACK_IMPORTED_MODULE_0__.Api.getUserAllAgregatedWords(obj));
        }
        return Promise.all(promises).then((pages) => {
            let words = [];
            pages.forEach((page) => {
                if (!('error' in page)) {
                    words = words.concat(page[0].paginatedResults);
                }
            });
            words = words.map((item) => {
                item.id = item._id;
                return item;
            });
            return words.reverse();
        });
    }
}


/***/ }),

/***/ "./src/app/utils/GamesGetData/index.ts":
/*!*********************************************!*\
  !*** ./src/app/utils/GamesGetData/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GamesGetData": () => (/* reexport safe */ _GamesGetData__WEBPACK_IMPORTED_MODULE_0__.GamesGetData)
/* harmony export */ });
/* harmony import */ var _GamesGetData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GamesGetData */ "./src/app/utils/GamesGetData/GamesGetData.ts");



/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_index_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/index.scss */ "./src/styles/index.scss");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app */ "./src/app/index.ts");


const app = new _app__WEBPACK_IMPORTED_MODULE_1__.App();
app.start();

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNEO0FBQzVCLGdCQUFnQixxQ0FBRztBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9BZHZhbnRhZ2VzL2FkdmFudGFnZXMuc2Nzcz85OGZlIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9CdXJnZXIvYnVyZ2VyLnNjc3M/OTMyNiIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvQ2FyZE9wcG9ydHVuaXRpZXMvY2FyZC1vcHBvcnR1bml0aWVzLnNjc3M/YjA5NSIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvQ2FyZFRlYW0vY2FyZC10ZWFtLnNjc3M/OTkxNSIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvRm9vdGVyL2Zvb3Rlci5zY3NzPzIxYTUiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0dhbWVzL2dhbWVzLnNjc3M/NmIxMSIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvSGVhZGVyL2hlYWRlci5zY3NzP2U5ZWIiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL01haW4vbWFpbi5zY3NzP2QzODkiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL0dhbWVMaW5rcy9nYW1lTGlua3Muc2Nzcz9iMmM2Iiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkQ2FyZC93b3JkQ2FyZC5zY3NzPzQ4NjQiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL1dvcmREZXRhaWxzL3dvcmREZXRhaWxzLnNjc3M/NjVmOCIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZFBhZ2luYXRpb24vd29yZFBhZ2luYXRpb24uc2Nzcz80MTBiIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkVGFiL3dvcmRUYWIuc2Nzcz8xMWZiIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvQXVkaW9DYWxsUGFnZS9BdWRpb0NhbGxHYW1lUGFnZS9nYW1lcGFnZS5zY3NzP2ZhOTciLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9BdWRpb0NhbGxQYWdlL0F1ZGlvQ2FsbFJ1bGVzL3J1bGVzLnNjc3M/NDQ1YSIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL0F1dGhQYWdlL3JlZ2lzdGVyLnNjc3M/NGY1OSIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL0dhbWVSZXN1bHRQYWdlL3Jlc3VsdC5zY3NzP2MzMzQiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9Mb2FkaW5nUGFnZS9sb2FkaW5ncGFnZS5zY3NzPzVlOGMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9TcHJpbnRQYWdlL1NwcmludEdhbWVQYWdlL2dhbWVwYWdlLnNjc3M/NTlhZiIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1NwcmludFBhZ2UvU3ByaW50UnVsZXMvcnVsZXMuc2Nzcz8zYjFiIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvU3RhdGlzdGljc1BhZ2Uvc3RhdGlzdGljcy5zY3NzPzI1NTYiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9UZXh0Ym9va1BhZ2UvdGV4dGJvb2suc2Nzcz8xOTU2Iiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9zdHlsZXMvaW5kZXguc2Nzcz8zOGE1Iiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYXBwLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYXBwLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9hcGkvYXBpLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvYXBpL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvY29tbW9uL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2NvbW1vbi9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2VudW1zL2VudW1zLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvZW51bXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9ldmVudHMvYXV0aC1idXR0b24tY2xpY2suZXZlbnQudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9ldmVudHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9ldmVudHMvbW9kZWxzL2hlYWRlci1tZW51Lm1vZGVsLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvZXZlbnRzL21vZGVscy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvaW50ZXJmYWNlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2ludGVyZmFjZXMvaW50ZXJmYWNlcy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2ludGVyZmFjZXMvdGV4dGJvb2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9pbnRlcmZhY2VzL3RleHRib29rL3RleHRib29rLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvYmFzaWMvaW50ZXJmYWNlcy90ZXh0Ym9vay93b3JkQ2FyZC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2ludGVyZmFjZXMvdGV4dGJvb2svd29yZERldGFpbHMudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9pbnRlcmZhY2VzL3RleHRib29rL3dvcmRHcm91cC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL2ludGVyZmFjZXMvdGV4dGJvb2svd29yZFRhYi50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL3JvdXRlci9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL3JvdXRlci9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy9zZXJ2aWNlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL3NlcnZpY2VzL3RleHRib29rLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9iYXNpYy90eXBlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2Jhc2ljL3R5cGVzL3R5cGVzLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9BZHZhbnRhZ2VzL2FkdmFudGFnZXMudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0FkdmFudGFnZXMvYWR2YW50YWdlcy52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9BZHZhbnRhZ2VzL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9CdXJnZXIvQnVyZ2VyLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9CdXR0b24vQnV0dG9uLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9CdXR0b24vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0NhcmRPcHBvcnR1bml0aWVzL2NhcmQtb3Bwb3J0dW5pdGllcy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvQ2FyZE9wcG9ydHVuaXRpZXMvY2FyZC1vcHBvcnR1bml0aWVzLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0NhcmRPcHBvcnR1bml0aWVzL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9DYXJkT3Bwb3J0dW5pdGllcy9tb2RlbHMvY2FyZC1vcHBvcnR1bml0aWVzLm1vZGVsLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9DYXJkT3Bwb3J0dW5pdGllcy9tb2RlbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0NhcmRUZWFtL2NhcmQtdGVhbS50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvQ2FyZFRlYW0vY2FyZC10ZWFtLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0NhcmRUZWFtL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9DYXJkVGVhbS9tb2RlbHMvY2FyZC10ZWFtLm1vZGVsLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9DYXJkVGVhbS9tb2RlbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0NyZWF0b3IvQ3JlYXRvci50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvQ3JlYXRvci9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvRm9vdGVyL2Zvb3Rlci50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvRm9vdGVyL2Zvb3Rlci52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9Gb290ZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0dhbWVzL2dhbWVzLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9HYW1lcy9nYW1lcy52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9HYW1lcy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvSGVhZGVyL2hlYWRlci50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvSGVhZGVyL2hlYWRlci52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9IZWFkZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL0lucHV0L0lucHV0LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9JbnB1dC9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFpbi9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL01haW4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL01haW4vbWFpbi50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFpbi9tYWluLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL01haW4vbW9kZWxzL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9NYWluL21vZGVscy9yb290LmVudW0udHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL0dhbWVMaW5rcy9nYW1lTGlua3MudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL0dhbWVMaW5rcy9nYW1lTGlua3Mudmlldy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svR2FtZUxpbmtzL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkQ2FyZC9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZENhcmQvd29yZENhcmQudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL1dvcmRDYXJkL3dvcmRDYXJkLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL1dvcmREZXRhaWxzL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkRGV0YWlscy93b3JkRGV0YWlscy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZERldGFpbHMvd29yZERldGFpbHMudmlldy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZEdyb3VwL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkR3JvdXAvd29yZEdyb3VwLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkR3JvdXAvd29yZEdyb3VwLnZpZXcudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL1RleHRib29rL1dvcmRQYWdpbmF0aW9uL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkUGFnaW5hdGlvbi93b3JkUGFnaW5hdGlvbi50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZFBhZ2luYXRpb24vd29yZFBhZ2luYXRpb24udmlldy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZFRhYi9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svV29yZFRhYi93b3JkVGFiLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkVGFiL3dvcmRUYWIudmlldy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2NvbXBvbmVudHMvVGV4dGJvb2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9jb21wb25lbnRzL2Jhc2UtY29tcG9uZW50LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvY29tcG9uZW50cy9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvQXVkaW9DYWxsUGFnZS9BdWRpb0NhbGwubW9kZWwudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9BdWRpb0NhbGxQYWdlL0F1ZGlvQ2FsbC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL0F1ZGlvQ2FsbFBhZ2UvQXVkaW9DYWxsR2FtZVBhZ2UvQXVkaW9DYWxsR2FtZVBhZ2UudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9BdWRpb0NhbGxQYWdlL0F1ZGlvQ2FsbFJ1bGVzL0F1ZGlvQ2FsbFJ1bGVzLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvQXVkaW9DYWxsUGFnZS9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL0F1dGhQYWdlL0F1dGhQYWdlLm1vZGVsLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvQXV0aFBhZ2UvQXV0aFBhZ2UudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9BdXRoUGFnZS9BdXRoUGFnZS52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvQXV0aFBhZ2UvTGFiZWxJbnB1dC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL0F1dGhQYWdlL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvR2FtZVJlc3VsdFBhZ2UvR2FtZVJlc3VsdFBhZ2UudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9Mb2FkaW5nUGFnZS9Mb2FkaW5nUGFnZS50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1NwcmludFBhZ2UvU3ByaW50Lm1vZGVsLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvU3ByaW50UGFnZS9TcHJpbnQudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9TcHJpbnRQYWdlL1NwcmludEdhbWVQYWdlL1NwcmludEdhbWVQYWdlLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvU3ByaW50UGFnZS9TcHJpbnRSdWxlcy9TcHJpbnRSdWxlcy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1NwcmludFBhZ2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9TdGF0aXN0aWNzUGFnZS9TdGF0aXN0aWNzLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvU3RhdGlzdGljc1BhZ2UvU3RhdGlzdGljc0dhbWVzL1N0YXRpc3RpY3NHYW1lcy50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1N0YXRpc3RpY3NQYWdlL1N0YXRpc3RpY3NXb3Jkcy9TdGF0aXN0aWNzV29yZHMudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC9wYWdlcy9TdGF0aXN0aWNzUGFnZS9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1RleHRib29rUGFnZS9pbmRleC50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1RleHRib29rUGFnZS90ZXh0Ym9vay50cyIsIndlYnBhY2s6Ly9yc2xhbmcvLi9zcmMvYXBwL3BhZ2VzL1RleHRib29rUGFnZS90ZXh0Ym9vay52aWV3LnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvcGFnZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcnNsYW5nLy4vc3JjL2FwcC91dGlscy9HYW1lc0dldERhdGEvR2FtZXNHZXREYXRhLnRzIiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9hcHAvdXRpbHMvR2FtZXNHZXREYXRhL2luZGV4LnRzIiwid2VicGFjazovL3JzbGFuZy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yc2xhbmcvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3JzbGFuZy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3JzbGFuZy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3JzbGFuZy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCJpbXBvcnQgeyBBcHBWaWV3IH0gZnJvbSAnLi9hcHAudmlldyc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJy4vYmFzaWMnO1xyXG5pbXBvcnQgeyBHYW1lcywgTWFpbiB9IGZyb20gJy4vY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IFRleHRib29rIH0gZnJvbSAnLi9wYWdlcyc7XHJcbmltcG9ydCB7IEF1ZGlvQ2FsbCB9IGZyb20gJy4vcGFnZXMvQXVkaW9DYWxsUGFnZSc7XHJcbmltcG9ydCB7IEF1dGhQYWdlIH0gZnJvbSAnLi9wYWdlcy9BdXRoUGFnZSc7XHJcbmltcG9ydCB7IFNwcmludCB9IGZyb20gJy4vcGFnZXMvU3ByaW50UGFnZSc7XHJcbmltcG9ydCB7IFN0YXRpc3RpY3MgfSBmcm9tICcuL3BhZ2VzL1N0YXRpc3RpY3NQYWdlJztcclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucm9vdCcpO1xyXG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBBcHBWaWV3KHRoaXMucm9vdCk7XHJcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSB7XHJcbiAgICAgICAgICAgICcvJzogTWFpbixcclxuICAgICAgICAgICAgYXV0aDogQXV0aFBhZ2UsXHJcbiAgICAgICAgICAgIGdhbWVzOiBHYW1lcyxcclxuICAgICAgICAgICAgc3ByaW50OiBTcHJpbnQsXHJcbiAgICAgICAgICAgIHRleHRib29rOiBUZXh0Ym9vayxcclxuICAgICAgICAgICAgYXVkaW9jYWxsOiBBdWRpb0NhbGwsXHJcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IFN0YXRpc3RpY3MsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJvdXRlciA9IG5ldyBSb3V0ZXIodGhpcy5yb290LCB0aGlzLnZpZXcsIHRoaXMucm91dGVzKTtcclxuICAgIH1cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMucm91dGVyLnJ1bigpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEhlYWRlciwgTWFpbiwgRm9vdGVyIH0gZnJvbSAnLi8nO1xyXG5leHBvcnQgY2xhc3MgQXBwVmlldyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb290KSB7XHJcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcclxuICAgICAgICB0aGlzLmhlYWRlciA9IG5ldyBIZWFkZXIocm9vdCk7XHJcbiAgICAgICAgdGhpcy5oZWFkZXIuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMubWFpbiA9IG5ldyBNYWluKHJvb3QpO1xyXG4gICAgICAgIHRoaXMubWFpbi5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5mb290ZXIgPSBuZXcgRm9vdGVyKHJvb3QpO1xyXG4gICAgICAgIHRoaXMuZm9vdGVyLmluaXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JPQtdC90LXRgNC40YDRg9C10YIg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgICogQHBhcmFtIHJvdXRlINCY0L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCDRgNC+0YPRgtCwXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckdhbWUocm91dGUpIHtcclxuICAgICAgICBpZiAodGhpcy5yb290KVxyXG4gICAgICAgICAgICB0aGlzLnJvb3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgcm91dGUucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXJQYWdlKHJvdXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdClcclxuICAgICAgICAgICAgdGhpcy5yb290LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyLmluaXQoKTtcclxuICAgICAgICB0aGlzLm1haW4uaW5pdCgpO1xyXG4gICAgICAgIHRoaXMubWFpbi5pbnN0YW5jZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB0aGlzLmZvb3Rlci5pbml0KCk7XHJcbiAgICAgICAgcm91dGUucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXJNYWluKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJvb3QpXHJcbiAgICAgICAgICAgIHRoaXMucm9vdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB0aGlzLmhlYWRlci5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5tYWluLmluaXQoKTtcclxuICAgICAgICB0aGlzLmZvb3Rlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXJNb2RhbChyb3V0ZSwgcHJldmlvdXNSb3V0ZSkge1xyXG4gICAgICAgIHJvdXRlLm9uRXhpdCA9ICgpID0+ICh3aW5kb3cubG9jYXRpb24uaGFzaCA9IHByZXZpb3VzUm91dGUpO1xyXG4gICAgICAgIHJvdXRlLnJlbmRlcigpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGJhc2VVcmwgfSBmcm9tICcuLi9jb21tb24vY29uc3RhbnRzJztcclxuZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5yZXN0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBjbGFzcyBjYW4ndCBiZSBpbnZva2VkIHRocm91Z2ggY29uc3RydWN0b3JcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCf0YDQvtCy0LXRgNGP0LXRgiDQsNCy0YLQvtGA0LjQt9C40YDQvtCy0LDQvSDQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjFxyXG4gICAgICogQHJldHVybnMgdHJ1ZSAtINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQsNCy0YLQvtGA0LjQt9C40YDQvtCy0LDQvVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaXNBdXRob3JpemVkKCkge1xyXG4gICAgICAgIGlmIChBcGkubWFpblRva2VuICYmIERhdGUubm93KCkgLSBBcGkudG9rZW5UaW1lIDwgNCAqIDYwICogNjAgKiAxMDAwKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gNCDRh9Cw0YHQsFxyXG4gICAgICAgIEFwaS5tYWluVG9rZW4gPSAnJztcclxuICAgICAgICBBcGkucmVmcmVzaFRva2VuID0gJyc7XHJcbiAgICAgICAgQXBpLnVzZXJJZCA9ICcnO1xyXG4gICAgICAgIEFwaS50b2tlblRpbWUgPSAwO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YLQvtC60LXQvS3RgdGC0YDQvtC60YMg0LjQu9C4IG51bGwsINC10YHQu9C4INC90LUg0LDQstGC0L7RgNC40LfQuNGA0L7QstCw0L1cclxuICAgICAqIEByZXR1cm5zINCi0L7QutC10L0t0YHRgtGA0L7QutCwINC40LvQuCBudWxsLCDQtdGB0LvQuCDQvdC1INCw0LLRgtC+0YDQuNC30LjRgNC+0LLQsNC9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRBdXRoVG9rZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5pc0F1dGhvcml6ZWQoKSA/IHsgdG9rZW46IEFwaS5tYWluVG9rZW4sIHVzZXJJZDogQXBpLnVzZXJJZCwgcmVmcmVzaFRva2VuOiBBcGkucmVmcmVzaFRva2VuIH0gOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQodC+0YXRgNCw0L3Rj9C10YIg0YLQvtC60LXQvSDQuCDQmNCUINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQtNC70Y8g0LTQsNC70YzQvdC10LnRiNC40YUg0LfQsNC/0YDQvtGB0L7QslxyXG4gICAgICogQHBhcmFtIHJlc3BvbnNlINCi0L7QutC10L0g0LvQvtCz0LjQvdCwINC4INCY0JRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNldEF1dGhEYXRhKHJlc3BvbnNlLCB0aW1lKSB7XHJcbiAgICAgICAgQXBpLm1haW5Ub2tlbiA9IHJlc3BvbnNlLnRva2VuO1xyXG4gICAgICAgIEFwaS5yZWZyZXNoVG9rZW4gPSByZXNwb25zZS5yZWZyZXNoVG9rZW47XHJcbiAgICAgICAgQXBpLnVzZXJJZCA9IHJlc3BvbnNlLnVzZXJJZDtcclxuICAgICAgICBBcGkudG9rZW5UaW1lID0gdGltZSA/IHRpbWUgOiBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgLy9zdGF0aWMgYXN5bmMgcmVzcG9uc2VIYW5kbGVyPFQ+KHJlc3BvbnNlOiBSZXNwb25zZSk6IFByb21pc2U8VCB8IElFcnJvcj4ge31cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC/0YDQsNCy0LvRj9C10YIgUE9TVCDQt9Cw0L/RgNC+0YFcclxuICAgICAqIEBwYXJhbSB1cmwgVVJMINCw0LTRgNC10YFcclxuICAgICAqIEBwYXJhbSBib2R5INCe0YLQv9GA0LDQstC70Y/QtdC80YvQtSDQtNCw0L3QvdGL0LVcclxuICAgICAqIEByZXR1cm5zIFJlc3Bvc2Ut0L7RgtCy0LXRgiDQsdC10Lcg0LTQtdC60L7QtNC40YDQvtCy0LDQvdC40Y9cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHNlbmRQb3N0KHVybCwgYm9keSwgYXV0aCA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYXV0aCA/IGBCZWFyZXIgJHtBcGkubWFpblRva2VufWAgOiAnJyxcclxuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICAgICAgfSkudGhlbihhc3luYyAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcC5vayA/IChhd2FpdCByZXNwLmpzb24oKSkgOiB7IGVycm9yOiB0cnVlLCBlcnJvck1lc3NhZ2U6IGF3YWl0IHJlc3AudGV4dCgpIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCe0YLQv9GA0LDQstC70Y/QtdGCIEdFVCDQt9Cw0L/RgNC+0YEg0YEg0LDQstGC0L7RgNC40LfQsNGG0LjQtdC5XHJcbiAgICAgKiBAcGFyYW0gdXJsIFVSTCDQsNC00YDQtdGBXHJcbiAgICAgKiBAcmV0dXJucyBSZXNwb3NlLdC+0YLQstC10YIg0LHQtdC3INC00LXQutC+0LTQuNGA0L7QstCw0L3QuNGPXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRHZXRBdXRoKHVybCwgbWFpblRva2VuID0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke21haW5Ub2tlbiA/IEFwaS5tYWluVG9rZW4gOiBBcGkucmVmcmVzaFRva2VufWAsXHJcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KS50aGVuKGFzeW5jIChyZXNwKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwLm9rID8gKGF3YWl0IHJlc3AuanNvbigpKSA6IHsgZXJyb3I6IHRydWUsIGVycm9yTWVzc2FnZTogYXdhaXQgcmVzcC50ZXh0KCkgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC/0YDQsNCy0LvRj9C10YIgR0VUINC30LDQv9GA0L7RgSDQsdC10Lcg0LDQstGC0L7RgNC40LfQsNGG0LjQuFxyXG4gICAgICogQHBhcmFtIHVybCBVUkwg0LDQtNGA0LXRgVxyXG4gICAgICogQHJldHVybnMgUmVzcG9zZS3QvtGC0LLQtdGCINCx0LXQtyDQtNC10LrQvtC00LjRgNC+0LLQsNC90LjRj1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0R2V0KHVybCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkudGhlbihhc3luYyAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcC5vayA/IChhd2FpdCByZXNwLmpzb24oKSkgOiB7IGVycm9yOiB0cnVlLCBlcnJvck1lc3NhZ2U6IGF3YWl0IHJlc3AudGV4dCgpIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCe0YLQv9GA0LDQstC70Y/QtdGCIFBVVCDQt9Cw0L/RgNC+0YFcclxuICAgICAqIEBwYXJhbSB1cmwgVVJMINCw0LTRgNC10YFcclxuICAgICAqIEBwYXJhbSBib2R5INCe0YLQv9GA0LDQstC70Y/QtdC80YvQtSDQtNCw0L3QvdGL0LVcclxuICAgICAqIEByZXR1cm5zIFJlc3Bvc2Ut0L7RgtCy0LXRgiDQsdC10Lcg0LTQtdC60L7QtNC40YDQvtCy0LDQvdC40Y9cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHNlbmRQdXQodXJsLCBib2R5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7QXBpLm1haW5Ub2tlbn1gLFxyXG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgICAgICB9KS50aGVuKGFzeW5jIChyZXNwKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwLm9rID8gKGF3YWl0IHJlc3AuanNvbigpKSA6IHsgZXJyb3I6IHRydWUsIGVycm9yTWVzc2FnZTogYXdhaXQgcmVzcC50ZXh0KCkgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC/0YDQsNCy0LvRj9C10YIgREVMRVRFINC30LDQv9GA0L7RgVxyXG4gICAgICogQHBhcmFtIHVybCBVUkwg0LDQtNGA0LXRgVxyXG4gICAgICogQHJldHVybnMgUmVzcG9zZS3QvtGC0LLQtdGCINCx0LXQtyDQtNC10LrQvtC00LjRgNC+0LLQsNC90LjRj1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgc2VuZERlbGV0ZSh1cmwpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtBcGkubWFpblRva2VufWAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkudGhlbigocmVzcCkgPT4gcmVzcC5vayk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICpcclxuICAgICAqICDQoNCw0LfQtNC10LsgV29yZHNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQv9C40YHQvtC6INGB0LvQvtCyINC30LDQtNCw0L3QvdC+0Lkg0LPRgNGD0L/Qv9GLINC4INGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAqIEBwYXJhbSBncm91cCDQndC+0LzQtdGAINCz0YDRg9C/0L/Ri1xyXG4gICAgICogQHBhcmFtIHBhZ2Ug0J3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKiBAcmV0dXJucyDQnNCw0YHRgdC40LIg0YHQu9C+0LIg0LfQsNC00LDQvdC90L7QuSDQs9GA0YPQv9C/0Ysg0Lgg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0V29yZHMoZ3JvdXAsIHBhZ2UpIHtcclxuICAgICAgICByZXR1cm4gQXBpLmdldEdldChgJHtiYXNlVXJsfS93b3Jkcz9ncm91cD0ke2dyb3VwfSZwYWdlPSR7cGFnZX1gKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQu9C+0LLQviDQv9C+INCY0JRcclxuICAgICAqIEBwYXJhbSBpZCBJRCDRgdC70L7QstCwXHJcbiAgICAgKiBAcmV0dXJucyDQnNCw0YHRgdC40LIg0YHQu9C+0LIg0LfQsNC00LDQvdC90L7QuSDQs9GA0YPQv9C/0Ysg0Lgg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0V29yZHNCeUlkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXQoYCR7YmFzZVVybH0vd29yZHMvJHtpZH1gKTtcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAgKlxyXG4gICAgICogINCg0LDQt9C00LXQuyBVc2Vyc1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiDQodC+0LfQtNCw0LXRgiDQvdC+0LLQvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgKiBAcGFyYW0gdXNlciDQlNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XHJcbiAgICAgKiBAcmV0dXJucyDQntGC0LLQtdGCINC+INGA0LXQs9C40YHRgtGA0LDRhtC40Lgg0LjQu9C4INC+0YjQuNCx0LrQsFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlTmV3VXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5zZW5kUG9zdChgJHtiYXNlVXJsfS91c2Vyc2AsIHVzZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQuNC80Y8g0Lgg0L/QsNGA0L7Qu9GMINGC0LXQutGD0YnQtdCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgKiBAcmV0dXJucyDQmNC80Y8g0Lgg0L/QsNGA0L7Qu9GMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXRBdXRoKGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH1gKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyTmV3VG9rZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXRBdXRoKGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH0vdG9rZW5zYCwgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqXHJcbiAgICAgKiAg0KDQsNC30LTQtdC7IFVzZXJzL1dvcmRzXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICAvKipcclxuICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINC80LDRgdGB0LjQsiDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60LjRhSDRgdC70L7QslxyXG4gICAgICogQHJldHVybnMg0JzQsNGB0YHQuNCyINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNGFINGB0LvQvtCyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyQWxsV29yZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXRBdXRoKGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH0vd29yZHNgKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KHQvtC30LTQsNC10YIg0L3QvtCy0L7QtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60L7QtSDRgdC70L7QstC+XHJcbiAgICAgKiBAcGFyYW0gd29yZElkIElEINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQvtCz0L4g0YHQu9C+0LLQsFxyXG4gICAgICogQHBhcmFtIGJvZHkg0JjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0YHQu9C+0LLQtVxyXG4gICAgICogQHJldHVybnMg0JjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0YHQu9C+0LLQtVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlVXNlcldvcmQod29yZElkLCBib2R5KSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5zZW5kUG9zdChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3dvcmRzLyR7d29yZElkfWAsIGJvZHksIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDRgdC70L7QstC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICogQHBhcmFtIHdvcmRJZCBJRCDRgdC70L7QstCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICogQHJldHVybnMg0JjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0YHQu9C+0LLQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGdldFVzZXJXb3JkKHdvcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBBcGkuZ2V0R2V0QXV0aChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3dvcmRzLyR7d29yZElkfWApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0L3QvtCy0LvRj9C10YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC+0LUg0YHQu9C+0LLQvlxyXG4gICAgICogQHBhcmFtIHdvcmRJZCBJRCDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60L7Qs9C+INGB0LvQvtCy0LBcclxuICAgICAqIEBwYXJhbSBib2R5INCY0L3RhNC+0YDQvNCw0YbQuNGPINC+INGB0LvQvtCy0LVcclxuICAgICAqIEByZXR1cm5zINCY0L3RhNC+0YDQvNCw0YbQuNGPINC+INGB0LvQvtCy0LVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHVwZGF0ZVVzZXJXb3JkKHdvcmRJZCwgYm9keSkge1xyXG4gICAgICAgIHJldHVybiBBcGkuc2VuZFB1dChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3dvcmRzLyR7d29yZElkfWAsIGJvZHkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQo9C00LDQu9GP0LXRgiDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60L7QtSDRgdC70L7QstC+XHJcbiAgICAgKiBAcGFyYW0gd29yZElkIElEINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQvtCz0L4g0YHQu9C+0LLQsFxyXG4gICAgICogQHJldHVybnMg0KPQtNCw0YfQvdC+INC40LvQuCDQvdC10YJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZVVzZXJXb3JkKHdvcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBBcGkuc2VuZERlbGV0ZShgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3dvcmRzLyR7d29yZElkfWApO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqXHJcbiAgICAgKiAg0KDQsNC30LTQtdC7IFVzZXJzL0FnZ3JlZ2F0ZWRXb3Jkc1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQvNCw0YHRgdC40LIgQWdyZWdhdGVkINGB0LvQvtCyXHJcbiAgICAgKiBAcGFyYW0gcXVlcnkgcXVlcnkt0L/QsNGA0LDQvNC10YLRgNGLINC30LDQv9GA0L7RgdCwXHJcbiAgICAgKiBAcmV0dXJucyDQnNCw0YHRgdC40LIgQWdyZWdhdGVkINGB0LvQvtCyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyQWxsQWdyZWdhdGVkV29yZHMocXVlcnkpIHtcclxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgYCR7Y3VyWzBdfT0ke2N1clsxXX0mYCwgJz8nKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIHJldHVybiBBcGkuZ2V0R2V0QXV0aChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L2FnZ3JlZ2F0ZWRXb3JkcyR7cXVlcnlTdHJpbmd9YCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINC40L3RhNC+0YDQvNCw0YbQuNGOINC+IEFncmVnYXRlZCDRgdC70L7QstC1XHJcbiAgICAgKiBAcGFyYW0gd29yZElkIElEIEFncmVnYXRlZCDRgdC70L7QstCwXHJcbiAgICAgKiBAcmV0dXJucyDQmNC90YTQvtGA0LzQsNGG0LjRjiDQviBBZ3JlZ2F0ZWQg0YHQu9C+0LLQtVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlckFncmVnYXRlZFdvcmQod29yZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXRBdXRoKGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH0vYWdncmVnYXRlZFdvcmRzLyR7d29yZElkfWApO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqXHJcbiAgICAgKiAg0KDQsNC30LTQtdC7IFVzZXJzL1N0YXRpc3RpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgdGC0LDRgtC40YHRgtC40LrRgyDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcclxuICAgICAqIEByZXR1cm5zINCh0YLQsNGC0LjRgdGC0LjQutCwINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlclN0YXRpc3RpY3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5nZXRHZXRBdXRoKGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH0vc3RhdGlzdGljc2ApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDQvdC+0LLRg9GOINGB0YLQsNGC0LjRgdGC0LjQutGDXHJcbiAgICAgKiBAcGFyYW0gYm9keSDQndC+0LLQsNGPINGB0YLQsNGC0LjRgdGC0LjQutCwXHJcbiAgICAgKiBAcmV0dXJucyDQndC+0LLQsNGPINGB0YLQsNGC0LjRgdGC0LjQutCwXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVVc2VyU3RhdGlzdGljcyhib2R5KSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5zZW5kUHV0KGAke2Jhc2VVcmx9L3VzZXJzLyR7QXBpLnVzZXJJZH0vc3RhdGlzdGljc2AsIGJvZHkpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqXHJcbiAgICAgKiAg0KDQsNC30LTQtdC7IFVzZXJzL1NldHRpbmdcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0L3QsNGB0YLRgNC+0LnQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICogQHJldHVybnMg0J3QsNGB0YLRgNC+0LnQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlclNldHRpbmdzKCkge1xyXG4gICAgICAgIHJldHVybiBBcGkuZ2V0R2V0QXV0aChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3NldHRpbmdzYCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC90L7QstGL0LUg0L3QsNGB0YLRgNC+0LnQutC4XHJcbiAgICAgKiBAcGFyYW0gYm9keSDQndC+0LLQsNGPINGB0YLQsNGC0LjRgdGC0LjQutCwXHJcbiAgICAgKiBAcmV0dXJucyDQndC+0LLQsNGPINGB0YLQsNGC0LjRgdGC0LjQutCwXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVVc2VyU2V0dGluZ3MoYm9keSkge1xyXG4gICAgICAgIHJldHVybiBBcGkuc2VuZFB1dChgJHtiYXNlVXJsfS91c2Vycy8ke0FwaS51c2VySWR9L3NldHRpbmdzYCwgYm9keSk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICpcclxuICAgICAqICDQoNCw0LfQtNC10LsgU2lnbiBJblxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiDQn9GA0L7QuNC30LLQvtC00LjRgiDQu9C+0LPQuNC9INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICogQHBhcmFtIHVzZXIg0JjQvNGPINC4INC/0LDRgNC+0LvRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqIEByZXR1cm5zINCi0L7QutC10L0g0LvQvtCz0LjQvdCwINC40LvQuCDQvtGI0LjQsdC60LBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGxvZ2luVXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIEFwaS5zZW5kUG9zdChgJHtiYXNlVXJsfS9zaWduaW5gLCB1c2VyKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB1bmxvZ2luVXNlcigpIHtcclxuICAgICAgICBBcGkubWFpblRva2VuID0gJyc7XHJcbiAgICAgICAgQXBpLnJlZnJlc2hUb2tlbiA9ICcnO1xyXG4gICAgICAgIEFwaS51c2VySWQgPSAnJztcclxuICAgICAgICBBcGkudG9rZW5UaW1lID0gMDtcclxuICAgIH1cclxufVxyXG5BcGkubWFpblRva2VuID0gJyc7XHJcbkFwaS5yZWZyZXNoVG9rZW4gPSAnJztcclxuQXBpLnVzZXJJZCA9ICcnO1xyXG5BcGkudG9rZW5UaW1lID0gMDtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9hcGknO1xyXG4iLCJpbXBvcnQgeyBFVXNlcldvcmRTdGF0dXMgfSBmcm9tICcuLi9lbnVtcyc7XHJcbmV4cG9ydCBjb25zdCBncm91cHMgPSB7XHJcbiAgICBBMTogJ0Vhc3knLFxyXG4gICAgQTI6ICdFYXN5JyxcclxuICAgIEIxOiAnTWVkaXVtJyxcclxuICAgIEIyOiAnTWVkaXVtJyxcclxuICAgIEMxOiAnSGFyZCcsXHJcbiAgICBDMjogJ0hhcmQnLFxyXG59O1xyXG5leHBvcnQgY29uc3QgZGlmZmljdWx0ID0ge1xyXG4gICAgJyc6ICdEaWZmaWN1bHQgd29yZHMnLFxyXG59O1xyXG5leHBvcnQgY29uc3QgbWF4V29yZHNQYWdlcyA9IDMwO1xyXG5leHBvcnQgY29uc3QgY2FyZE9uTG9hZCA9IDA7XHJcbmV4cG9ydCBjb25zdCBhY3Rpdml0eUNsYXNzID0gJ2FjdGl2ZSc7XHJcbmV4cG9ydCBjb25zdCBiYXNlVXJsID0gJ2h0dHBzOi8vcnNsYW5nLWZyb21hcnlzLmhlcm9rdWFwcC5jb20nO1xyXG5leHBvcnQgY29uc3QgR1JPVVBfQU1PVU5UID0gNjtcclxuZXhwb3J0IGNvbnN0IFBBR0VTX1BFUl9HUk9VUCA9IDMwO1xyXG5leHBvcnQgY29uc3QgV09SRFNfUEVSX1BBR0UgPSAyMDtcclxuZXhwb3J0IGNvbnN0IERJRkZJQ1VMVF9XT1JEU19QRVJfUEFHRSA9IDM2MDA7XHJcbmV4cG9ydCBjb25zdCBVU0VSX1dPUkRfVEVNUExBVEUgPSB7XHJcbiAgICBkaWZmaWN1bHR5OiBFVXNlcldvcmRTdGF0dXMubm9ybWFsLFxyXG4gICAgb3B0aW9uYWw6IHtcclxuICAgICAgICBzcHJpbnQ6IHtcclxuICAgICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICAgIHdyb25nOiAwLFxyXG4gICAgICAgICAgICBsb25nUmlnaHQ6IDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdWRpb0NhbGw6IHtcclxuICAgICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICAgIHdyb25nOiAwLFxyXG4gICAgICAgICAgICBsb25nUmlnaHQ6IDAsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn07XHJcbmV4cG9ydCBjb25zdCBEaWZmQnV0dG9uU3RhdGUgPSB7XHJcbiAgICBub3JtYWw6ICdNYXJrIGFzIGRpZmZpY3VsdCcsXHJcbiAgICBkaWZmaWN1bHQ6ICdNYXJrIGFzIGVhc3knLFxyXG59O1xyXG5leHBvcnQgY29uc3QgU3R1ZEJ1dHRvblN0YXRlID0ge1xyXG4gICAgbm9ybWFsOiAnQWRkIHRvIHN0dWRpZWQnLFxyXG4gICAgc3R1ZGllZDogJ1JlbW92ZSBmcm9tIHN0dWRpZWQnLFxyXG59O1xyXG5leHBvcnQgY29uc3QgVE9UQUxfR1JPVVBTID0gNztcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMnO1xyXG4iLCJleHBvcnQgdmFyIEVSZWdpc3RlckJ1dHRvblRleHQ7XHJcbihmdW5jdGlvbiAoRVJlZ2lzdGVyQnV0dG9uVGV4dCkge1xyXG4gICAgRVJlZ2lzdGVyQnV0dG9uVGV4dFtcInJlZ2lzdGVyXCJdID0gXCJSZWdpc3RlclwiO1xyXG4gICAgRVJlZ2lzdGVyQnV0dG9uVGV4dFtcImxvZ2luXCJdID0gXCJMb2dpblwiO1xyXG4gICAgRVJlZ2lzdGVyQnV0dG9uVGV4dFtcImNhbmNlbFwiXSA9IFwiQ2FuY2VsXCI7XHJcbn0pKEVSZWdpc3RlckJ1dHRvblRleHQgfHwgKEVSZWdpc3RlckJ1dHRvblRleHQgPSB7fSkpO1xyXG5leHBvcnQgdmFyIEVSb3V0ZXM7XHJcbihmdW5jdGlvbiAoRVJvdXRlcykge1xyXG4gICAgRVJvdXRlc1tcIm1haW5cIl0gPSBcIi9cIjtcclxuICAgIEVSb3V0ZXNbXCJ0ZXh0Ym9va1wiXSA9IFwidGV4dGJvb2tcIjtcclxuICAgIEVSb3V0ZXNbXCJnYW1lc1wiXSA9IFwiZ2FtZXNcIjtcclxuICAgIEVSb3V0ZXNbXCJzdGF0aXN0aWNzXCJdID0gXCJzdGF0aXN0aWNzXCI7XHJcbiAgICBFUm91dGVzW1wiYXVkaW9jYWxsXCJdID0gXCJhdWRpb2NhbGxcIjtcclxuICAgIEVSb3V0ZXNbXCJzcHJpbnRcIl0gPSBcInNwcmludFwiO1xyXG4gICAgRVJvdXRlc1tcImF1dGhcIl0gPSBcImF1dGhcIjtcclxufSkoRVJvdXRlcyB8fCAoRVJvdXRlcyA9IHt9KSk7XHJcbmV4cG9ydCB2YXIgRVVzZXJXb3JkU3RhdHVzO1xyXG4oZnVuY3Rpb24gKEVVc2VyV29yZFN0YXR1cykge1xyXG4gICAgRVVzZXJXb3JkU3RhdHVzW1wic3R1ZGllZFwiXSA9IFwic3R1ZGllZFwiO1xyXG4gICAgRVVzZXJXb3JkU3RhdHVzW1wibm9ybWFsXCJdID0gXCJub3JtYWxcIjtcclxuICAgIEVVc2VyV29yZFN0YXR1c1tcImRpZmZpY3VsdFwiXSA9IFwiZGlmZmljdWx0XCI7XHJcbn0pKEVVc2VyV29yZFN0YXR1cyB8fCAoRVVzZXJXb3JkU3RhdHVzID0ge30pKTtcclxuZXhwb3J0IHZhciBFU3RvcmFnZTtcclxuKGZ1bmN0aW9uIChFU3RvcmFnZSkge1xyXG4gICAgRVN0b3JhZ2VbXCJwYWdlXCJdID0gXCJwYWdlXCI7XHJcbiAgICBFU3RvcmFnZVtcImdyb3VwXCJdID0gXCJncm91cFwiO1xyXG59KShFU3RvcmFnZSB8fCAoRVN0b3JhZ2UgPSB7fSkpO1xyXG5leHBvcnQgdmFyIEVEZXBsb3k7XHJcbihmdW5jdGlvbiAoRURlcGxveSkge1xyXG4gICAgRURlcGxveVtcInVybFwiXSA9IFwiaHR0cHM6Ly9mcm9tYXJ5cy5naXRodWIuaW8vcnNsYW5nL3JzbGFuZ1wiO1xyXG59KShFRGVwbG95IHx8IChFRGVwbG95ID0ge30pKTtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9lbnVtcyc7XHJcbiIsImltcG9ydCB7IElIZWFkZXJNZW51IH0gZnJvbSAnLi9tb2RlbHMnO1xyXG5leHBvcnQgY29uc3QgQVVUSF9CVVRUT05fQ0xJQ0tfRVZFTlQgPSBuZXcgRXZlbnQoSUhlYWRlck1lbnUuTG9naW4pO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2F1dGgtYnV0dG9uLWNsaWNrLmV2ZW50JztcclxuZXhwb3J0ICogZnJvbSAnLi9tb2RlbHMnO1xyXG4iLCJleHBvcnQgdmFyIElIZWFkZXJNZW51O1xyXG4oZnVuY3Rpb24gKElIZWFkZXJNZW51KSB7XHJcbiAgICBJSGVhZGVyTWVudVtcIk1haW5cIl0gPSBcIk1BSU5cIjtcclxuICAgIElIZWFkZXJNZW51W1wiVGV4dGJvb2tcIl0gPSBcIlRFWFRCT09LXCI7XHJcbiAgICBJSGVhZGVyTWVudVtcIkdhbWVzXCJdID0gXCJHQU1FU1wiO1xyXG4gICAgSUhlYWRlck1lbnVbXCJBdWRpb0NhbGxcIl0gPSBcIkFVRElPIENBTExcIjtcclxuICAgIElIZWFkZXJNZW51W1wiU3ByaW50XCJdID0gXCJTUFJJTlRcIjtcclxuICAgIElIZWFkZXJNZW51W1wiU3RhdGlzdGljc1wiXSA9IFwiU1RBVElTVElDU1wiO1xyXG4gICAgSUhlYWRlck1lbnVbXCJMb2dpblwiXSA9IFwiTE9HIElOXCI7XHJcbiAgICBJSGVhZGVyTWVudVtcIkxvZ291dFwiXSA9IFwiTE9HT1VUXCI7XHJcbn0pKElIZWFkZXJNZW51IHx8IChJSGVhZGVyTWVudSA9IHt9KSk7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vaGVhZGVyLW1lbnUubW9kZWwnO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2FwaSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vc2VydmljZXMnO1xyXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbic7XHJcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vZW51bXMnO1xyXG5leHBvcnQgKiBmcm9tICcuL2V2ZW50cyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vcm91dGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vdGV4dGJvb2snO1xyXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZXMnO1xyXG4iLCJleHBvcnQge307XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vdGV4dGJvb2snO1xyXG5leHBvcnQgKiBmcm9tICcuL3dvcmRDYXJkJztcclxuZXhwb3J0ICogZnJvbSAnLi93b3JkR3JvdXAnO1xyXG5leHBvcnQgKiBmcm9tICcuL3dvcmREZXRhaWxzJztcclxuZXhwb3J0ICogZnJvbSAnLi93b3JkVGFiJztcclxuIiwiZXhwb3J0IHt9O1xyXG4iLCJleHBvcnQge307XHJcbiIsImV4cG9ydCB7fTtcclxuIiwiZXhwb3J0IHt9O1xyXG4iLCJleHBvcnQge307XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vcm91dGVyJztcclxuIiwiaW1wb3J0IHsgRVJvdXRlcywgRVN0b3JhZ2UgfSBmcm9tICcuLi9lbnVtcyc7XHJcbmltcG9ydCB7IFRleHRib29rIH0gZnJvbSAnLi4vLi4vcGFnZXMnO1xyXG5leHBvcnQgY2xhc3MgUm91dGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHJvb3QsIG1haW4sIHJvdXRlcykge1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcbiAgICAgICAgdGhpcy5tYWluID0gbWFpbjtcclxuICAgICAgICB0aGlzLnJvdXRlcyA9IHJvdXRlcztcclxuICAgICAgICB0aGlzLnJvdXRlID0gJyc7XHJcbiAgICAgICAgdGhpcy5tYWluTm9kZSA9IHRoaXMubWFpbi5tYWluLmluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9ICcnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQndCw0LfQvdCw0YfQsNC10YIg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Lkg0Lgg0LfQsNC/0YPRgdC60LDQtdGCINGE0YPQvdC60YbQuNGOINC00LvRjyDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8g0YDQvtGD0YLQsFxyXG4gICAgICovXHJcbiAgICBydW4oKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hSb3V0ZSh0aGlzLmdldEhhc2goKSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoUm91dGUodGhpcy5nZXRIYXNoKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQn9C+0LvRg9GH0LDQtdGCIGhhc2gg0LjQtyBVUkxcclxuICAgICAqL1xyXG4gICAgZ2V0SGFzaCgpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCDRgNC+0YPRgtCwINC4INC/0LXRgNC10LTQsNC10YIg0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLINC4INCz0YDRg9C/0L/RiyDQsiDQutCw0YfQtdGB0YLQstC1INCw0YDQs9GD0LzQtdC90YLQsFxyXG4gICAgICogQHBhcmFtIGhhc2ggVVJMIGhhc2hcclxuICAgICAqL1xyXG4gICAgc3dpdGNoUm91dGUoaGFzaCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMucm91dGVzW2hhc2hdID8gaGFzaCA6IEVSb3V0ZXMubWFpbjtcclxuICAgICAgICBjb25zdCBSb3V0ZSA9IHRoaXMucm91dGVzW2tleV07XHJcbiAgICAgICAgaWYgKGtleSA9PT0gRVJvdXRlcy5zcHJpbnQgfHwga2V5ID09PSBFUm91dGVzLmF1ZGlvY2FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRHYW1lKFJvdXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBFUm91dGVzLmF1dGgpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkTW9kYWwoUm91dGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IEVSb3V0ZXMubWFpbikge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFpbi5yZW5kZXJNYWluKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRQYWdlKFJvdXRlLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByZXZpb3VzUm91dGUgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBsb2FkR2FtZShSb3V0ZSkge1xyXG4gICAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnByZXZpb3VzUm91dGUgPT09IEVSb3V0ZXMudGV4dGJvb2sgPyBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2UnKSkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLnByZXZpb3VzUm91dGUgPT09IEVSb3V0ZXMudGV4dGJvb2sgPyBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dyb3VwJykpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBuZXcgUm91dGUodGhpcy5yb290LCBncm91cCwgcGFnZSk7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGUgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5tYWluLnJlbmRlckdhbWUocm91dGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9hZFBhZ2UoUm91dGUsIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHJvdXRlID0gbmV3IFJvdXRlKHRoaXMubWFpbk5vZGUpO1xyXG4gICAgICAgIGlmIChrZXkgPT09IEVSb3V0ZXMudGV4dGJvb2spIHtcclxuICAgICAgICAgICAgdGhpcy5yb3V0ZSA9IEVSb3V0ZXMudGV4dGJvb2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJvdXRlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9IGtleTtcclxuICAgICAgICB0aGlzLm1haW4ucmVuZGVyUGFnZShyb3V0ZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhckxvY2FsU3RvcmFnZSgpO1xyXG4gICAgfVxyXG4gICAgbG9hZE1vZGFsKFJvdXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3V0ZSA9IG5ldyBSb3V0ZSh0aGlzLm1haW5Ob2RlKTtcclxuICAgICAgICAgICAgdGhpcy5tYWluLnJlbmRlck1vZGFsKHJvdXRlLCB0aGlzLnByZXZpb3VzUm91dGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFyTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IHJvdXRlID0gdGhpcy5yb3V0ZXNbdGhpcy5wcmV2aW91c1JvdXRlXTtcclxuICAgICAgICBpZiAoIShyb3V0ZSA9PT0gVGV4dGJvb2spKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEVTdG9yYWdlLmdyb3VwLCAnJyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEVTdG9yYWdlLnBhZ2UsICcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi90ZXh0Ym9vay5zZXJ2aWNlJztcclxuIiwiaW1wb3J0IHsgV09SRFNfUEVSX1BBR0UsIERJRkZJQ1VMVF9XT1JEU19QRVJfUEFHRSB9IGZyb20gJy4uL2NvbW1vbic7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2FwaSc7XHJcbmltcG9ydCB7IEVVc2VyV29yZFN0YXR1cyB9IGZyb20gJy4uL2VudW1zJztcclxuZXhwb3J0IGNsYXNzIFRleHRib29rU2VydmljZSB7XHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0V29yZHMoZ3JvdXAsIHBhZ2UsIGlzR3JvdXApIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IEFwaS5pc0F1dGhvcml6ZWQoKVxyXG4gICAgICAgICAgICA/IGF3YWl0IHRoaXMuZ2V0VXNlckFnZ3JlZ2F0ZWRXb3Jkcyhncm91cCwgcGFnZSwgaXNHcm91cClcclxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmdldEFsbFdvcmRzKGdyb3VwLCBwYWdlKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlckFnZ3JlZ2F0ZWRXb3Jkcyhncm91cCwgcGFnZSwgaXNHcm91cCkge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZXRRdWVyeShncm91cCwgcGFnZSwgaXNHcm91cCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBcGkuZ2V0VXNlckFsbEFncmVnYXRlZFdvcmRzKHF1ZXJ5KS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVswXS5wYWdpbmF0ZWRSZXN1bHRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBnZXRBbGxXb3Jkcyhncm91cCwgcGFnZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXBpLmdldFdvcmRzKGdyb3VwLCBwYWdlKS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2V0UXVlcnkoZ3JvdXAsIHBhZ2UsIGlzR3JvdXApIHtcclxuICAgICAgICBjb25zdCBmaWx0ZXIgPSB7XHJcbiAgICAgICAgICAgICd1c2VyV29yZC5kaWZmaWN1bHR5JzogRVVzZXJXb3JkU3RhdHVzLmRpZmZpY3VsdCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xyXG4gICAgICAgICAgICBncm91cDogZ3JvdXAsXHJcbiAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgIHdvcmRzUGVyUGFnZTogYCR7V09SRFNfUEVSX1BBR0V9YCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghaXNHcm91cCkge1xyXG4gICAgICAgICAgICBxdWVyeS5maWx0ZXIgPSBKU09OLnN0cmluZ2lmeShmaWx0ZXIpO1xyXG4gICAgICAgICAgICBxdWVyeS53b3Jkc1BlclBhZ2UgPSBgJHtESUZGSUNVTFRfV09SRFNfUEVSX1BBR0V9YDtcclxuICAgICAgICAgICAgZGVsZXRlIHF1ZXJ5Lmdyb3VwO1xyXG4gICAgICAgICAgICBkZWxldGUgcXVlcnkucGFnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVVzZXJXb3JkKHdvcmRJZCwgYm9keSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBBcGkuY3JlYXRlVXNlcldvcmQod29yZElkLCBib2R5KS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yLmVycm9yTWVzc2FnZSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIHVwZGF0ZVVzZXJXb3JkKHdvcmRJZCwgYm9keSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBBcGkudXBkYXRlVXNlcldvcmQod29yZElkLCBib2R5KS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yLmVycm9yTWVzc2FnZSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xyXG4iLCJleHBvcnQge307XHJcbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGdldFRlbXBsYXRlIH0gZnJvbSAnLi9hZHZhbnRhZ2VzLnZpZXcnO1xyXG5leHBvcnQgY2xhc3MgQWR2YW50YWdlcyBleHRlbmRzIEJhc2VDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZ2V0VGVtcGxhdGUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vYWR2YW50YWdlcy5zY3NzJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiYWR2YW50YWdlc1wiID5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnQtY29udGVudC1hZHZhbnRhZ2VzXCI+XHJcbiAgICAgICAgICAgICAgPGgyIGNsYXNzPVwidGl0bGUtYWR2YW50YWdlc1wiPkxlYXJuIEVuZ2xpc2ggZWFzaWx5IGFuZCBzaW1wbHkgd2l0aCBSUyBMYW5nPC9oMj5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtYWR2YW50YWdlc1wiPlN0b3AgbGVhcm5pbmcgRW5nbGlzaCwgaXQncyB0aW1lIHRvIGxlYXJuIGl0ITwvcD5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtYWR2YW50YWdlc1wiPlN0YXJ0IHJpZ2h0IG5vdyE8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHQtY29udGVudC1hZHZhbnRhZ2VzXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImltZy1hZHZhbnRhZ2VzXCIgc3JjPVwicHVibGljL3N0YXRpYy9sZWFybi5wbmdcIiBhbHQ9XCJsZWFyblwiIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgYDtcclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL2FkdmFudGFnZXMnO1xyXG4iLCJpbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vQ3JlYXRvcic7XHJcbmltcG9ydCAnLi9idXJnZXIuc2Nzcyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1cmdlciBleHRlbmRzIENyZWF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBjbGVhbmVyKSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCAnZGl2JywgJ2J1cmdlci1tZW51JywgJzxzcGFuIGNsYXNzPVwiYnVyZ2VyLW1lbnVfX3NwYW5cIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5jbGVhbmVyID0gY2xlYW5lcjtcclxuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IHtcclxuICAgICAgICAgICAgJ01haW4gbWVudSc6ICcnLFxyXG4gICAgICAgICAgICBUZXh0Ym9vazogJ3RleHRib29rJyxcclxuICAgICAgICAgICAgR2FtZXM6ICdnYW1lcycsXHJcbiAgICAgICAgICAgIFN0YXRpc3RpY3M6ICdzdGF0aXN0aWNzJyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYnVyZ2VyU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5vZGUub25jbGljayA9ICgpID0+IHRoaXMuY2xpY2tIYW5kbGVyKCk7XHJcbiAgICAgICAgdGhpcy5vdXRzaWRlQnVyZ2VyQ2xpY2tIYW5kbGVyQmluZCA9IHRoaXMub3V0c2lkZUJ1cmdlckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3V0c2lkZUJ1cmdlckNsaWNrSGFuZGxlckJpbmQpO1xyXG4gICAgfVxyXG4gICAgY2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuYnVyZ2VyU2hvd24gPSAhdGhpcy5idXJnZXJTaG93bjtcclxuICAgICAgICBpZiAodGhpcy5idXJnZXJTaG93bikge1xyXG4gICAgICAgICAgICAvLyBzaG93XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QuYWRkKCdidXJnZXItbWVudV9zaG93bicpO1xyXG4gICAgICAgICAgICB0aGlzLnduZCA9IG5ldyBDcmVhdG9yKHRoaXMucGFyZW50LCAnZGl2JywgJ2J1cmdlci1tZW51X193aW5kb3cnKTtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5tZW51SXRlbXMpLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ3JlYXRvcih0aGlzLnduZC5ub2RlLCAnZGl2JywgJ2J1cmdlci1tZW51X19pdGVtJywgYCR7a2V5fWApO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5ub2RlLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhbmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGAke3ZhbHVlfWA7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiAodGhpcy53bmQubm9kZS5zdHlsZS5vcGFjaXR5ID0gJzEnKSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDRg9C00LDQu9C40YLRjCDQsdGD0YDQs9C10YBcclxuICAgICAgICAgICAgdGhpcy5oaWRlQnVyZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlkZUJ1cmdlcigpIHtcclxuICAgICAgICB0aGlzLmJ1cmdlclNob3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2J1cmdlci1tZW51X3Nob3duJyk7XHJcbiAgICAgICAgdGhpcy53bmQubm9kZS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy53bmQuZGVzdHJveSgpLCA1MDApO1xyXG4gICAgfVxyXG4gICAgb3V0c2lkZUJ1cmdlckNsaWNrSGFuZGxlcihlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ1cmdlclNob3duKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5idXJnZXItbWVudScpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5oaWRlQnVyZ2VyKCk7XHJcbiAgICB9XHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3V0c2lkZUJ1cmdlckNsaWNrSGFuZGxlckJpbmQpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vQ3JlYXRvci8nO1xyXG5leHBvcnQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNsYXNzTmFtZSwgdGV4dCwgb25DbGljaykge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgJ2J1dHRvbicsIGNsYXNzTmFtZSwgdGV4dCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uY2xpY2sgPSAoKSA9PiBvbkNsaWNrKHRleHQpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vQnV0dG9uJztcclxuIiwiaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgZ2V0VGVtcGxhdGUgfSBmcm9tICcuL2NhcmQtb3Bwb3J0dW5pdGllcy52aWV3JztcclxuZXhwb3J0IGNsYXNzIENhcmRPcHBvcnR1bml0aWVzIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb290LCBzZXR0aW5ncykge1xyXG4gICAgICAgIHN1cGVyKHJvb3QpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZ2V0VGVtcGxhdGUodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2NhcmQtb3Bwb3J0dW5pdGllcy5zY3NzJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlbXBsYXRlKHNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gYDxhIGhyZWY9XCIjJHtzZXR0aW5ncy5yb3V0ZX1cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtb3Bwb3J0dW5pdGllc1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke3NldHRpbmdzLnNyY0JhY2tncn0nKVwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWNhcmRcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHtzZXR0aW5ncy5zcmNJY29ufScpXCI+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtb3Bwb3J0dW5pdGllc1wiPiR7c2V0dGluZ3MudGV4dH08L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2E+XHJcbiAgYDtcclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL21vZGVscyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY2FyZC1vcHBvcnR1bml0aWVzJztcclxuIiwiZXhwb3J0IHt9O1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2NhcmQtb3Bwb3J0dW5pdGllcy5tb2RlbCc7XHJcbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGdldFRlbXBsYXRlIH0gZnJvbSAnLi9jYXJkLXRlYW0udmlldyc7XHJcbmV4cG9ydCBjbGFzcyBDYXJkVGVhbSBleHRlbmRzIEJhc2VDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3Iocm9vdCwgc2V0dGluZ3MpIHtcclxuICAgICAgICBzdXBlcihyb290KTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGdldFRlbXBsYXRlKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAnLi9jYXJkLXRlYW0uc2Nzcyc7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZShzZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIGA8YSBjbGFzcz1cImxpbmstZ2l0aHViLXRlYW1cIiBocmVmPVwiJHtzZXR0aW5ncy5ocmVmUGVyc29ufVwiIHRhcmdldD1cIl9ibGFua1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGVyc29uXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7c2V0dGluZ3Muc3JjUGVyc29ufScpXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tcGVyc29uXCI+XHJcbiAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJuYW1lLXBlcnNvblwiPiR7c2V0dGluZ3MubmFtZVBlcnNvbn08L2g0PlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkb25lLXBlcnNvblwiPiR7c2V0dGluZ3MuZG9uZVBlcnNvbn08L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9hPlxyXG4gIGA7XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9tb2RlbHMnO1xyXG5leHBvcnQgKiBmcm9tICcuL2NhcmQtdGVhbSc7XHJcbiIsImV4cG9ydCB7fTtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9jYXJkLXRlYW0ubW9kZWwnO1xyXG4iLCJleHBvcnQgY2xhc3MgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnROb2RlLCB0YWdOYW1lID0gJ2RpdicsIGNsYXNzTmFtZSA9ICcnLCBjb250ZW50ID0gJycpIHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgICAgICAgaWYgKGNsYXNzTmFtZSlcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIGVsLmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgcGFyZW50Tm9kZS5hcHBlbmQoZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vZGUgPSBlbDtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJlbW92ZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vQ3JlYXRvcic7XHJcbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGdldFRlbXBsYXRlIH0gZnJvbSAnLi9mb290ZXIudmlldyc7XHJcbmV4cG9ydCBjbGFzcyBGb290ZXIgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9vdGVyJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGdldFRlbXBsYXRlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2Zvb3Rlci5zY3NzJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGBcclxuICA8ZGl2IGNsYXNzPVwiY29udGVudC1mb290ZXJcIj5cclxuICAgIDx1bCBjbGFzcz1cImxpbmstZ2l0aHViXCI+XHJcbiAgICAgIDxsaSBjbGFzcz1cIml0ZW0tbGluay1naXRodWJcIj4mY29weTsyMDIyPC9saT5cclxuICAgICAgPGEgY2xhc3M9XCJsaW5rLWdpdGh1Yi1mb290ZXJcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2Zyb21hcnlzXCIgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgPjxsaSBjbGFzcz1cIml0ZW0tbGluay1naXRodWJcIj5ZZXZnZW5paSBNaW5leWV2PC9saT48L2FcclxuICAgICAgPlxyXG4gICAgICA8YSBjbGFzcz1cImxpbmstZ2l0aHViLWZvb3RlclwiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vT2tzYW5hU2VyZWdpbmFcIiB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICA+PGxpIGNsYXNzPVwiaXRlbS1saW5rLWdpdGh1YlwiPk9rc2FuYSBTZXJlZ2luYTwvbGk+PC9hXHJcbiAgICAgID5cclxuICAgICAgPGEgY2xhc3M9XCJsaW5rLWdpdGh1Yi1mb290ZXJcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL0FuZHJvbmlvMlwiIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgID48bGkgY2xhc3M9XCJpdGVtLWxpbmstZ2l0aHViXCI+QW5kcmV5IFNtaXJub3Y8L2xpPjwvYVxyXG4gICAgICA+XHJcbiAgICA8L3VsPlxyXG4gICAgPGEgY2xhc3M9XCJyc2xpbmstZm9vdGVyXCIgaHJlZj1cImh0dHBzOi8vcnMuc2Nob29sL2pzL1wiIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgICAgPjxpbWcgc3JjPVwicHVibGljL3N0YXRpYy9yc19zY2hvb2xfanMuc3ZnXCIgYWx0PVwibG9nb1wiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4XCJcclxuICAgIC8+PC9hPlxyXG4gICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vZm9vdGVyJztcclxuIiwiaW1wb3J0IHsgZ2V0VGVtcGxhdGUgfSBmcm9tICcuL2dhbWVzLnZpZXcnO1xyXG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS1jb21wb25lbnQnO1xyXG5leHBvcnQgY2xhc3MgR2FtZXMgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWFpbicpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBnZXRUZW1wbGF0ZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVSb3V0ZXMgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCAnLi9nYW1lcy5zY3NzJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGBcclxuICA8ZGl2IGNsYXNzPVwibWluaS1nYW1lc1wiPlxyXG4gICAgPGEgaHJlZj1cIiMke0VSb3V0ZXMuYXVkaW9jYWxsfVwiIGNsYXNzPVwiaXRlbS1nYW1lIGF1ZGlvLWNhbGxcIj5cclxuICAgICAgPGgzIGNsYXNzPVwidGl0bGUtZ2FtZSBnYW1lLWF1ZGlvXCI+QXVkaW8gY2FsbDwvaDM+XHJcbiAgICA8L2E+XHJcbiAgICA8YSBocmVmPVwiIyR7RVJvdXRlcy5zcHJpbnR9XCIgY2xhc3M9XCJpdGVtLWdhbWUgc3ByaW50XCI+XHJcbiAgICAgIDxoMyBjbGFzcz1cInRpdGxlLWdhbWUgZ2FtZS1zcHJpbnRcIj5TcHJpbnQ8L2gzPlxyXG4gICAgPC9hPlxyXG4gIDwvZGl2PlxyXG4gIGA7XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9nYW1lcyc7XHJcbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGdldFRlbXBsYXRlIH0gZnJvbSAnLi9oZWFkZXIudmlldyc7XHJcbmltcG9ydCB7IElIZWFkZXJNZW51LCBFUm91dGVzLCBBcGkgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IEF1dGhQYWdlIH0gZnJvbSAnLi4vLi4vcGFnZXMvQXV0aFBhZ2UnO1xyXG5leHBvcnQgY2xhc3MgSGVhZGVyIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMuYXV0aEJ1dHRvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gbmV3IEF1dGhQYWdlKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBnZXRUZW1wbGF0ZShJSGVhZGVyTWVudSk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHN1cGVyLmluaXQoKTtcclxuICAgICAgICB0aGlzLmxpc3RlbigpO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmF1dGhCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQXV0aENsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGF0dGFjaEVsZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5yb290Py5wcmVwZW5kKHRoaXMuZWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5hdXRoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcm9sZT1cImF1dGhcIl0nKTtcclxuICAgICAgICBpZiAodGhpcy5hdXRoLmlzQXV0aG9yaXplZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2F1dG9yaXplZCcsICcnKTtcclxuICAgICAgICAgICAgY29uc3QgeyBuYW1lIH0gPSBhd2FpdCB0aGlzLmdldFVzZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoQnV0dG9uLmlubmVySFRNTCA9IGAke25hbWV9IDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJjb25kaXRpb25cIj48c3Bhbj4ke0lIZWFkZXJNZW51LkxvZ291dH08L3NwYW4+PC9hPmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhdXRvcml6ZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoQnV0dG9uLmlubmVySFRNTCA9IGA8YSBocmVmPVwiIyR7RVJvdXRlcy5hdXRofVwiIGNsYXNzPVwiY29uZGl0aW9uXCI+PHNwYW4+JHtJSGVhZGVyTWVudS5Mb2dpbn08L3NwYW4+PC9hPmA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VXNlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gKGF3YWl0IEFwaS5nZXRVc2VySW5mbygpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxpc3RlbigpIHtcclxuICAgICAgICB0aGlzLmF1dGhCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQXV0aENsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgb25BdXRoQ2xpY2soZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBpc0F1dG9yaXplZCA9ICEhZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ1thdXRvcml6ZWRdJyk7XHJcbiAgICAgICAgaWYgKGlzQXV0b3JpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC51bmxvZ2luVXNlcigpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAnLi9oZWFkZXIuc2Nzcyc7XHJcbmltcG9ydCB7IEVEZXBsb3ksIEVSb3V0ZXMgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZShtZW51KSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWhlYWRlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIiR7RURlcGxveS51cmwgKyBFUm91dGVzLm1haW59XCIgY2xhc3M9XCJsaW5rLWxvZ29cIj5cclxuICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaW1nLWxvZ29cIiBzcmM9XCJwdWJsaWMvc3RhdGljL2xvZ28uanBnXCIgYWx0PVwibG9nb1wiIC8+XHJcbiAgICAgICAgICAgICAgPGgxIGNsYXNzPVwidGl0bGUtbG9nb1wiPlJTTGFuZzwvaDE+XHJcbiAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxuYXYgZGF0YS1yb2xlPVwiaGVhZGVyLW1lbnVcIiBjbGFzcz1cImhlYWRlci1tZW51XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW51XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBkYXRhLWlkPVwiJHttZW51Lk1haW59XCIgY2xhc3M9XCJpdGVtXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtFRGVwbG95LnVybCArIEVSb3V0ZXMubWFpbn1cIj48c3Bhbj4ke21lbnUuTWFpbn08L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cIiR7bWVudS5UZXh0Ym9va31cIiBjbGFzcz1cIml0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjJHtFUm91dGVzLnRleHRib29rfVwiPjxzcGFuPiR7bWVudS5UZXh0Ym9va308L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cIiR7bWVudS5HYW1lc31cIiBjbGFzcz1cIml0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjJHtFUm91dGVzLmdhbWVzfVwiPjxzcGFuPiR7bWVudS5HYW1lc308L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cIiR7bWVudS5TdGF0aXN0aWNzfVwiIGNsYXNzPVwiaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiMke0VSb3V0ZXMuc3RhdGlzdGljc31cIj48c3Bhbj4ke21lbnUuU3RhdGlzdGljc308L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvbmF2PlxyXG5cclxuICAgICAgICAgIDxkaXYgZGF0YS1yb2xlPVwiYXV0aFwiIGNsYXNzPVwidmlzaWJsZVwiPjwvZGl2PlxyXG4gICAgICAgICAgYDtcclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL2hlYWRlcic7XHJcbiIsImltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi9DcmVhdG9yJztcclxuZXhwb3J0IGNsYXNzIElucHV0IGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgJ2lucHV0JywgY2xhc3NOYW1lKTtcclxuICAgICAgICB0aGlzLm5vZGUudHlwZSA9ICd0ZXh0JztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J/QvtC70YPRh9Cw0LXRgiDQt9C90LDRh9C10L3QuNC1INC/0L7Qu9GPINC40L3Qv9GD0YLQsFxyXG4gICAgICogQHJldHVybnMg0KLQtdC60YHRgiDQsiDQv9C+0LvQtSDQuNC90L/Rg9GC0LBcclxuICAgICAqL1xyXG4gICAgZ2V0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZS52YWx1ZTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL0lucHV0JztcclxuIiwiaW1wb3J0IHsgRVJvdXRlcywgSUhlYWRlck1lbnUgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmV4cG9ydCBjb25zdCBDQVJEX09QUE9SVFVOSVRJRVMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgc3JjQmFja2dyOiAncHVibGljL3N0YXRpYy9jYXJkLWJhY2tncjEuanBlZycsXHJcbiAgICAgICAgc3JjSWNvbjogJ3B1YmxpYy9zdGF0aWMvdGV4dGJvb2sucG5nJyxcclxuICAgICAgICB0ZXh0OiAnRWxlY3Ryb25pYyA8bWFyaz50ZXh0Ym9vazwvbWFyaz4gd2l0aCBhIGRhdGFiYXNlIG9mIHdvcmRzIHRvIHN0dWR5JyxcclxuICAgICAgICBpZDogSUhlYWRlck1lbnUuVGV4dGJvb2ssXHJcbiAgICAgICAgcm91dGU6IEVSb3V0ZXMudGV4dGJvb2ssXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHNyY0JhY2tncjogJ3B1YmxpYy9zdGF0aWMvY2FyZC1iYWNrZ3IyLmpwZWcnLFxyXG4gICAgICAgIHNyY0ljb246ICdwdWJsaWMvc3RhdGljL3BsYXkucG5nJyxcclxuICAgICAgICB0ZXh0OiAnPG1hcms+TWluaS1nYW1lczwvbWFyaz4gZm9yIHJlcGVhdGluZyB0aGUgbGVhcm5lZCB3b3JkcycsXHJcbiAgICAgICAgaWQ6IElIZWFkZXJNZW51LkdhbWVzLFxyXG4gICAgICAgIHJvdXRlOiBFUm91dGVzLmdhbWVzLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBzcmNCYWNrZ3I6ICdwdWJsaWMvc3RhdGljL2NhcmQtYmFja2dyMy5qcGVnJyxcclxuICAgICAgICBzcmNJY29uOiAncHVibGljL3N0YXRpYy9zdGF0LnBuZycsXHJcbiAgICAgICAgdGV4dDogJ0RldGFpbGVkIDxtYXJrPnN0YXRpc3RpY3M8L21hcms+IG9mIHlvdXIgYWNoaWV2ZW1lbnRzJyxcclxuICAgICAgICBpZDogSUhlYWRlck1lbnUuU3RhdGlzdGljcyxcclxuICAgICAgICByb3V0ZTogRVJvdXRlcy5zdGF0aXN0aWNzLFxyXG4gICAgfSxcclxuXTtcclxuZXhwb3J0IGNvbnN0IENBUkRfVEVBTSA9IFtcclxuICAgIHtcclxuICAgICAgICBzcmNQZXJzb246ICdwdWJsaWMvc3RhdGljL3lldmdlbmlpLWZvdG8uanBnJyxcclxuICAgICAgICBocmVmUGVyc29uOiAnaHR0cHM6Ly9naXRodWIuY29tL2Zyb21hcnlzJyxcclxuICAgICAgICBuYW1lUGVyc29uOiAnWWV2Z2VuaWkgTWluZXlldicsXHJcbiAgICAgICAgZG9uZVBlcnNvbjogJzxtYXJrPlRlYW0gTGVhZDwvbWFyaz5Db25maWd1cmVkIGNvbmZpZ3MsY3JlYXRlZCBhIE1vbmdvREIgZGF0YWJhc2UsIGNvbmZpZ3VyZWQgcm91dGluZywgY3JlYXRlZCBUZXh0Ym9vaycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHNyY1BlcnNvbjogJ3B1YmxpYy9zdGF0aWMvb2tzYW5hLWZvdG8uanBnJyxcclxuICAgICAgICBocmVmUGVyc29uOiAnaHR0cHM6Ly9naXRodWIuY29tL09rc2FuYVNlcmVnaW5hJyxcclxuICAgICAgICBuYW1lUGVyc29uOiAnT2tzYW5hIFNlcmVnaW5hJyxcclxuICAgICAgICBkb25lUGVyc29uOiAnQ3JlYXRlZCB0aGUgTWFpbiBwYWdlLCBjcmVhdGVkIHRoZSBHYW1lcyBwYWdlLCBjcmVhdGVkIFN0YXRpc3RpY3MnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBzcmNQZXJzb246ICdwdWJsaWMvc3RhdGljL2FuZHJleS1mb3RvLmpwZycsXHJcbiAgICAgICAgaHJlZlBlcnNvbjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9BbmRyb25pbzInLFxyXG4gICAgICAgIG5hbWVQZXJzb246ICdBbmRyZXkgU21pcm5vdicsXHJcbiAgICAgICAgZG9uZVBlcnNvbjogJ0NyZWF0ZWQgdGhlIFJlZ2lzdHJhdGlvbiBwYWdlLCBjcmVhdGVkIEFQSSBmdW5jdGlvbnMsIGNyZWF0ZWQgbWluaS1nYW1lcyBcIkF1ZGlvIENhbGxcIiBhbmQgXCJTcHJpbnRcIicsXHJcbiAgICB9LFxyXG5dO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL21vZGVscyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbWFpbic7XHJcbiIsImltcG9ydCB7IEFkdmFudGFnZXMgfSBmcm9tICcuLi9BZHZhbnRhZ2VzJztcclxuaW1wb3J0IHsgQ2FyZE9wcG9ydHVuaXRpZXMgfSBmcm9tICcuLi9DYXJkT3Bwb3J0dW5pdGllcyc7XHJcbmltcG9ydCB7IENhcmRUZWFtIH0gZnJvbSAnLi4vQ2FyZFRlYW0nO1xyXG5pbXBvcnQgeyBSb290IH0gZnJvbSAnLi9tb2RlbHMnO1xyXG5pbXBvcnQgeyBnZXRUZW1wbGF0ZSB9IGZyb20gJy4vbWFpbi52aWV3JztcclxuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ0FSRF9PUFBPUlRVTklUSUVTLCBDQVJEX1RFQU0gfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmV4cG9ydCBjbGFzcyBNYWluIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMuY2FyZHNPcHBvcnR1bml0aWVzID0gW107XHJcbiAgICAgICAgdGhpcy5jYXJkc1RlYW0gPSBbXTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtYWluJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGdldFRlbXBsYXRlKCk7XHJcbiAgICB9XHJcbiAgICBhdHRhY2hFbGVtZW50KCkge1xyXG4gICAgICAgIHN1cGVyLmF0dGFjaEVsZW1lbnQoKTtcclxuICAgICAgICB0aGlzLmluaXRBZHZhbnRhZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5pbml0T3Bwb3J0dW5pdGllcygpO1xyXG4gICAgICAgIHRoaXMuaW5pdFRlYW0oKTtcclxuICAgIH1cclxuICAgIGluaXRBZHZhbnRhZ2VzKCkge1xyXG4gICAgICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFJvb3QuQWR2YW50YWdlcyk7XHJcbiAgICAgICAgY29uc3QgYWR2YW50YWdlcyA9IG5ldyBBZHZhbnRhZ2VzKHJvb3QpO1xyXG4gICAgICAgIGFkdmFudGFnZXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgaW5pdE9wcG9ydHVuaXRpZXMoKSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUm9vdC5PcHBvcnR1bml0aWVzKTtcclxuICAgICAgICBDQVJEX09QUE9SVFVOSVRJRVMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkc09wcG9ydHVuaXRpZXMgPSBbLi4udGhpcy5jYXJkc09wcG9ydHVuaXRpZXMsIG5ldyBDYXJkT3Bwb3J0dW5pdGllcyhyb290LCB2YWx1ZSldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2FyZHNPcHBvcnR1bml0aWVzLmZvckVhY2goKGNhcmQpID0+IGNhcmQuaW5pdCgpKTtcclxuICAgIH1cclxuICAgIGluaXRUZWFtKCkge1xyXG4gICAgICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFJvb3QuVGVhbSk7XHJcbiAgICAgICAgQ0FSRF9URUFNLmZvckVhY2goKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZHNUZWFtID0gWy4uLnRoaXMuY2FyZHNUZWFtLCBuZXcgQ2FyZFRlYW0ocm9vdCwgdmFsdWUpXTtcclxuICAgICAgICAgICAgdGhpcy5jYXJkc1RlYW0uZm9yRWFjaCgobWVtYmVyKSA9PiBtZW1iZXIuaW5pdCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vbWFpbi5zY3NzJztcclxuZXhwb3J0IGNvbnN0IGdldFRlbXBsYXRlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGA8ZGl2IGRhdGEtcm9vdD1cImFkdmFudGFnZXNcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwib3Bwb3J0dW5pdGllc1wiIGRhdGEtcm9vdD1cIm9wcG9ydHVuaXRpZXNcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwib3VyLXRlYW1cIj5cclxuICAgICAgICAgICAgPGgyIGNsYXNzPVwidGl0bGUtdGVhbVwiPk91ciB0ZWFtPC9oMj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci10ZWFtXCIgZGF0YS1yb290PVwib3VyLXRlYW1cIj48L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgYDtcclxufTtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9yb290LmVudW0nO1xyXG4iLCJleHBvcnQgdmFyIFJvb3Q7XHJcbihmdW5jdGlvbiAoUm9vdCkge1xyXG4gICAgUm9vdFtcIkFkdmFudGFnZXNcIl0gPSBcIltkYXRhLXJvb3Q9XFxcImFkdmFudGFnZXNcXFwiXVwiO1xyXG4gICAgUm9vdFtcIk9wcG9ydHVuaXRpZXNcIl0gPSBcIltkYXRhLXJvb3Q9XFxcIm9wcG9ydHVuaXRpZXNcXFwiXVwiO1xyXG4gICAgUm9vdFtcIlRlYW1cIl0gPSBcIltkYXRhLXJvb3Q9XFxcIm91ci10ZWFtXFxcIl1cIjtcclxufSkoUm9vdCB8fCAoUm9vdCA9IHt9KSk7XHJcbiIsImltcG9ydCB7IEdhbWVMaW5rc1ZpZXcgfSBmcm9tICcuL2dhbWVMaW5rcy52aWV3JztcclxuZXhwb3J0IGNsYXNzIEdhbWVMaW5rcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlID0gcGFyZW50Tm9kZTtcclxuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgR2FtZUxpbmtzVmlldyh0aGlzLnBhcmVudE5vZGUpO1xyXG4gICAgICAgIHRoaXMuc3ByaW50ID0gdGhpcy52aWV3LnNwcmludC5ub2RlO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsID0gdGhpcy52aWV3LmF1ZGlvY2FsbC5ub2RlO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0Rpc2FibGVMaW5rcycsICgpID0+IHRoaXMuZGlzYWJsZUxpbmtzKCkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0VuYWJsZUxpbmtzJywgKCkgPT4gdGhpcy5lbmFibGVMaW5rcygpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J/RgNC40YHQstCw0LjQstCw0LXRgiDRgdGC0LjQu9C4INC/0YDQuCDQtNC10LDQutGC0LjQstCw0YbQuNC4INGB0YHRi9C70L7QulxyXG4gICAgICovXHJcbiAgICBkaXNhYmxlTGlua3MoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpbnQuc3R5bGUub3BhY2l0eSA9ICcwLjgnO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsLnN0eWxlLm9wYWNpdHkgPSAnMC44JztcclxuICAgICAgICB0aGlzLnNwcmludC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCf0YDQuNGB0LLQsNC40LLQsNC10YIg0YHRgtC40LvQuCDQv9GA0Lgg0LDQutGC0LjQstCw0YbQuNC4INGB0YHRi9C70L7QulxyXG4gICAgICovXHJcbiAgICBlbmFibGVMaW5rcygpIHtcclxuICAgICAgICB0aGlzLnNwcmludC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsLnN0eWxlLm9wYWNpdHkgPSAnMSc7XHJcbiAgICAgICAgdGhpcy5zcHJpbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcclxuICAgICAgICB0aGlzLmF1ZGlvY2FsbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVSb3V0ZXMgfSBmcm9tICcuLi8uLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi9DcmVhdG9yJztcclxuaW1wb3J0ICcuL2dhbWVMaW5rcy5zY3NzJztcclxuZXhwb3J0IGNsYXNzIEdhbWVMaW5rc1ZpZXcge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50Tm9kZSkge1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IG5ldyBDcmVhdG9yKHBhcmVudE5vZGUsICdkaXYnLCAndGV4dGJvb2tfX2dhbWVzJyk7XHJcbiAgICAgICAgdGhpcy5zcHJpbnQgPSBuZXcgQ3JlYXRvcih0aGlzLndyYXBwZXIubm9kZSwgJ2EnLCAndGV4dGJvb2tfX2dhbWUnKTtcclxuICAgICAgICB0aGlzLnNwcmludC5ub2RlLmhyZWYgPSBgIyR7RVJvdXRlcy5zcHJpbnR9YDtcclxuICAgICAgICB0aGlzLmF1ZGlvY2FsbCA9IG5ldyBDcmVhdG9yKHRoaXMud3JhcHBlci5ub2RlLCAnYScsICd0ZXh0Ym9va19fZ2FtZScpO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsLm5vZGUuaHJlZiA9IGAjJHtFUm91dGVzLmF1ZGlvY2FsbH1gO1xyXG4gICAgICAgIHRoaXMuc3ByaW50VGl0bGUgPSBuZXcgQ3JlYXRvcih0aGlzLnNwcmludC5ub2RlLCAnaDMnLCAndGV4dGJvb2tfX3RpdGxlJywgRVJvdXRlcy5zcHJpbnQpO1xyXG4gICAgICAgIHRoaXMuYXVkaW9jYWxsVGl0bGUgPSBuZXcgQ3JlYXRvcih0aGlzLmF1ZGlvY2FsbC5ub2RlLCAnaDMnLCAndGV4dGJvb2tfX3RpdGxlJywgRVJvdXRlcy5hdWRpb2NhbGwpO1xyXG4gICAgICAgIHRoaXMuc3ByaW50SW1hZ2UgPSBuZXcgQ3JlYXRvcih0aGlzLnNwcmludC5ub2RlLCAnaW1nJywgJ3RleHRib29rX19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuc3ByaW50SW1hZ2Uubm9kZS5zcmMgPSAncHVibGljL3N0YXRpYy9zcHJpbnQuanBnJztcclxuICAgICAgICB0aGlzLmF1ZGlvY2FsbEltYWdlID0gbmV3IENyZWF0b3IodGhpcy5hdWRpb2NhbGwubm9kZSwgJ2ltZycsICd0ZXh0Ym9va19faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLmF1ZGlvY2FsbEltYWdlLm5vZGUuc3JjID0gJ3B1YmxpYy9zdGF0aWMvYXVkaW8tY2FsbC5qcGcnO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vZ2FtZUxpbmtzJztcclxuIiwiZXhwb3J0ICogZnJvbSAnLi93b3JkQ2FyZCc7XHJcbmV4cG9ydCAqIGZyb20gJy4uL1dvcmREZXRhaWxzL3dvcmREZXRhaWxzJztcclxuIiwiaW1wb3J0IHsgYWN0aXZpdHlDbGFzcyB9IGZyb20gJy4uLy4uLy4uL2Jhc2ljJztcclxuaW1wb3J0IFdvcmRDYXJkVmlldyBmcm9tICcuL3dvcmRDYXJkLnZpZXcnO1xyXG5pbXBvcnQgeyBXb3JkRGV0YWlscyB9IGZyb20gJy4uL1dvcmREZXRhaWxzL3dvcmREZXRhaWxzJztcclxuZXhwb3J0IGNsYXNzIFdvcmRDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKHdvcmRHcm91cCwgdGV4dGJvb2ssIHdvcmRJbmZvLCBjbGFzc05hbWUpIHtcclxuICAgICAgICB0aGlzLndvcmRHcm91cCA9IHdvcmRHcm91cDtcclxuICAgICAgICB0aGlzLnRleHRib29rID0gdGV4dGJvb2s7XHJcbiAgICAgICAgdGhpcy53b3JkSW5mbyA9IHdvcmRJbmZvO1xyXG4gICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIHRoaXMud29yZHNDb250YWluZXIgPSB0aGlzLndvcmRHcm91cC53b3Jkc0NvbnRhaW5lci5ub2RlO1xyXG4gICAgICAgIHRoaXMuZGlmZmljdWx0eSA9IHdvcmRJbmZvLnVzZXJXb3JkPy5kaWZmaWN1bHR5O1xyXG4gICAgICAgIHRoaXMud29yZENhcmQgPSBuZXcgV29yZENhcmRWaWV3KHRoaXMud29yZHNDb250YWluZXIsIHdvcmRJbmZvLCBjbGFzc05hbWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkpXHJcbiAgICAgICAgICAgIHRoaXMud29yZENhcmQubm9kZS5jbGFzc0xpc3QuYWRkKHRoaXMuZGlmZmljdWx0eSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKVxyXG4gICAgICAgICAgICB0aGlzLndvcmRHcm91cC5hY3RpdmVFbGVtZW50ID0gdGhpcy53b3JkQ2FyZC5ub2RlO1xyXG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSlcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJEZXRhaWxzKCk7XHJcbiAgICAgICAgdGhpcy53b3JkQ2FyZC5ub2RlLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsaWNrSGFuZGxlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutC+0LJcclxuICAgICAqL1xyXG4gICAgY2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMud29yZEdyb3VwLmFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhY3Rpdml0eUNsYXNzKTtcclxuICAgICAgICB0aGlzLndvcmRHcm91cC5hY3RpdmVFbGVtZW50ID0gdGhpcy53b3JkQ2FyZC5ub2RlO1xyXG4gICAgICAgIHRoaXMud29yZEdyb3VwLmFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3Rpdml0eUNsYXNzKTtcclxuICAgICAgICB0aGlzLnJlbmRlckRldGFpbHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JPQtdC90LXRgNC40YDRg9C10YIg0LTQtdGC0LDQu9C4INC00LvRjyDRgdC70L7QstCwXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckRldGFpbHMoKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHNXcmFwcGVyID0gdGhpcy53b3JkR3JvdXAuZGV0YWlscy5ub2RlO1xyXG4gICAgICAgIG5ldyBXb3JkRGV0YWlscyh0aGlzLnRleHRib29rLCB3b3Jkc1dyYXBwZXIsIHRoaXMud29yZEluZm8pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi9DcmVhdG9yJztcclxuaW1wb3J0ICcuL3dvcmRDYXJkLnNjc3MnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JkQ2FyZFZpZXcgZXh0ZW5kcyBDcmVhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudE5vZGUsIHdvcmRJbmZvLCBjbGFzc05hbWUpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYDxoMiBjbGFzcz1cIndvcmRzX193b3JkXCI+JHt3b3JkSW5mby53b3JkfTwvaDI+XHJcbiAgICA8aDMgY2xhc3M9XCJ3b3Jkc19fdHJhbnNsYXRlXCI+JHt3b3JkSW5mby53b3JkVHJhbnNsYXRlfTwvaDM+YDtcclxuICAgICAgICBzdXBlcihwYXJlbnROb2RlLCAnYnV0dG9uJywgYHdvcmRzX19jYXJkICR7Y2xhc3NOYW1lfWAsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vd29yZERldGFpbHMnO1xyXG4iLCJpbXBvcnQgeyBhY3Rpdml0eUNsYXNzLCBBcGksIGJhc2VVcmwsIERpZmZCdXR0b25TdGF0ZSwgU3R1ZEJ1dHRvblN0YXRlLCBFVXNlcldvcmRTdGF0dXMsIFRleHRib29rU2VydmljZSwgVVNFUl9XT1JEX1RFTVBMQVRFLCB9IGZyb20gJy4uLy4uLy4uL2Jhc2ljJztcclxuaW1wb3J0IHsgV29yZEdyb3VwIH0gZnJvbSAnLi4vV29yZEdyb3VwJztcclxuaW1wb3J0IFdvcmREZXRhaWxzVmlldyBmcm9tICcuL3dvcmREZXRhaWxzLnZpZXcnO1xyXG5leHBvcnQgY2xhc3MgV29yZERldGFpbHMge1xyXG4gICAgY29uc3RydWN0b3IodGV4dGJvb2ssIHBhcmVudE5vZGUsIHdvcmRJbmZvKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vayA9IHRleHRib29rO1xyXG4gICAgICAgIHRoaXMucGFyZW50Tm9kZSA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgdGhpcy53b3JkSW5mbyA9IHdvcmRJbmZvO1xyXG4gICAgICAgIHRoaXMudXNlcldvcmQgPSB3b3JkSW5mby51c2VyV29yZDtcclxuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgV29yZERldGFpbHNWaWV3KHRoaXMucGFyZW50Tm9kZSwgdGhpcy53b3JkSW5mbyk7XHJcbiAgICAgICAgdGhpcy5hdWRpbyA9IHRoaXMudmlldy5hdWRpb0J1dHRvbi5ub2RlO1xyXG4gICAgICAgIHRoaXMuYXVkaW8ub25jbGljayA9ICgpID0+IHRoaXMuYXVkaW9DbGlja0hhbmRsZXIodGhpcy53b3JkSW5mbyk7XHJcbiAgICAgICAgaWYgKEFwaS5pc0F1dGhvcml6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJ1dHRvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFXb3JkRGV0YWlscy5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBXb3JkRGV0YWlscy5pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBXb3JkRGV0YWlscy5pbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdGCINC60LvQuNC60Lgg0L/QviDQuNC60L7QvdC60LUg0LDRg9C00LjQvlxyXG4gICAgICogQHBhcmFtIHdvcmRJbmZvINC+0LHRitC10LrRgiDRgdC70L7QstCwIElXb3JkXHJcbiAgICAgKi9cclxuICAgIGF1ZGlvQ2xpY2tIYW5kbGVyKHdvcmRJbmZvKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy52aWV3LmF1ZGlvQnV0dG9uLm5vZGU7XHJcbiAgICAgICAgY29uc3QgaWNvbiA9IGJ1dHRvbi5jaGlsZHJlblswXTtcclxuICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhgJHtiYXNlVXJsfS8ke3dvcmRJbmZvLmF1ZGlvfWApO1xyXG4gICAgICAgIHZvaWQgYXVkaW8ucGxheSgpO1xyXG4gICAgICAgIGljb24/LmNsYXNzTGlzdC5hZGQoYWN0aXZpdHlDbGFzcyk7XHJcbiAgICAgICAgYXVkaW8ub25lbmRlZCA9ICgpID0+IGljb24/LmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZpdHlDbGFzcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCe0LHRgNCw0LHQsNGC0YvQstCw0LXRgiDQutC70LjQutC4INC/0L4g0LrQvdC+0L/QutC1ICdNYXJrIGFzIGRpZmZpY3VsdCdcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBkaWZmQnV0dG9uQ2xpY2tIYW5kbGVyKHN0YXRlKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHN0YXRlICE9PSBFVXNlcldvcmRTdGF0dXMuZGlmZmljdWx0XHJcbiAgICAgICAgICAgID8gdGhpcy5zZXREaWZmaWN1bHR5KEVVc2VyV29yZFN0YXR1cy5kaWZmaWN1bHQpXHJcbiAgICAgICAgICAgIDogdGhpcy5zZXREaWZmaWN1bHR5KEVVc2VyV29yZFN0YXR1cy5ub3JtYWwpO1xyXG4gICAgICAgIGlmICh0aGlzLnVzZXJXb3JkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IFRleHRib29rU2VydmljZS51cGRhdGVVc2VyV29yZCh0aGlzLndvcmRJbmZvLl9pZCwgYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCBUZXh0Ym9va1NlcnZpY2UuY3JlYXRlVXNlcldvcmQodGhpcy53b3JkSW5mby5faWQsIGJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbG9hZFdvcmRzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCe0LHRgNCw0LHQsNGC0YvQstCw0LXRgiDQutC70LjQutC4INC/0L4g0LrQvdC+0L/QutC1ICdBZGQgdG8gc3R1ZGllZCdcclxuICAgICAqIEBwYXJhbSBzdGF0ZSDQodC70L7QttC90L7RgdGC0Ywg0YHQu9C+0LLQsFxyXG4gICAgICovXHJcbiAgICBhc3luYyBzdHVkQnV0dG9uQ2xpY2tIYW5kbGVyKHN0YXRlKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHN0YXRlICE9PSBFVXNlcldvcmRTdGF0dXMuc3R1ZGllZFxyXG4gICAgICAgICAgICA/IHRoaXMuc2V0RGlmZmljdWx0eShFVXNlcldvcmRTdGF0dXMuc3R1ZGllZClcclxuICAgICAgICAgICAgOiB0aGlzLnNldERpZmZpY3VsdHkoRVVzZXJXb3JkU3RhdHVzLm5vcm1hbCk7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlcldvcmQpIHtcclxuICAgICAgICAgICAgYXdhaXQgVGV4dGJvb2tTZXJ2aWNlLnVwZGF0ZVVzZXJXb3JkKHRoaXMud29yZEluZm8uX2lkLCBib2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IFRleHRib29rU2VydmljZS5jcmVhdGVVc2VyV29yZCh0aGlzLndvcmRJbmZvLl9pZCwgYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVsb2FkV29yZHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JPQtdC90LXRgNC40YDRg9C10YIg0LrQvdC+0L/QutC4INC00LvRjyDRgdC70L7QttC90YvRhSDQuCDQuNC30YPRh9C10L3QvdGL0YUg0YHQu9C+0LJcclxuICAgICAqL1xyXG4gICAgc2V0QnV0dG9ucygpIHtcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5ID0gdGhpcy53b3JkSW5mby51c2VyV29yZD8uZGlmZmljdWx0eSB8fCBFVXNlcldvcmRTdGF0dXMubm9ybWFsO1xyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdEJ1dHRvbiA9IHRoaXMudmlldy5kaWZmaWN1bHRCdXR0b24/Lm5vZGU7XHJcbiAgICAgICAgY29uc3Qgc3R1ZGllZEJ1dHRvbiA9IHRoaXMudmlldy5zdHVkaWVkQnV0dG9uPy5ub2RlO1xyXG4gICAgICAgIGlmIChkaWZmaWN1bHRCdXR0b24pIHtcclxuICAgICAgICAgICAgZGlmZmljdWx0QnV0dG9uLmlubmVySFRNTCA9IERpZmZCdXR0b25TdGF0ZVtkaWZmaWN1bHR5XSB8fCBEaWZmQnV0dG9uU3RhdGVbRVVzZXJXb3JkU3RhdHVzLm5vcm1hbF07XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5kaWZmQnV0dG9uQ2xpY2tIYW5kbGVyKGRpZmZpY3VsdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3R1ZGllZEJ1dHRvbikge1xyXG4gICAgICAgICAgICBzdHVkaWVkQnV0dG9uLmlubmVySFRNTCA9IFN0dWRCdXR0b25TdGF0ZVtkaWZmaWN1bHR5XSB8fCBTdHVkQnV0dG9uU3RhdGVbRVVzZXJXb3JkU3RhdHVzLm5vcm1hbF07XHJcbiAgICAgICAgICAgIHN0dWRpZWRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc3R1ZEJ1dHRvbkNsaWNrSGFuZGxlcihkaWZmaWN1bHR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINGC0LXQu9C+INC30LDQv9GA0L7RgdCwINC6INCx0LDQt9C1INC00LDQvdC90YvRhVxyXG4gICAgICogQHBhcmFtIHN0YXRlINCh0LvQvtC20L3QvtGB0YLRjCDRgdC70L7QstCwXHJcbiAgICAgKiBAcmV0dXJucyDQntCx0YrQtdC60YIgSVVzZXJXb3JkLCDQtNC70Y8g0LTQsNC70YzQvdC10LnRiNC10LPQviDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC70L7QstCwXHJcbiAgICAgKi9cclxuICAgIHNldERpZmZpY3VsdHkoc3RhdGUpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VyV29yZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJXb3JkLmRpZmZpY3VsdHkgPSBzdGF0ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcldvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyV29yZCA9IFVTRVJfV09SRF9URU1QTEFURTtcclxuICAgICAgICAgICAgdXNlcldvcmQuZGlmZmljdWx0eSA9IHN0YXRlO1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlcldvcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0L3QvtCy0LvRj9C10YIg0LPRgNGD0L/Qv9GDINC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINC60L3QvtC/0LrRg1xyXG4gICAgICovXHJcbiAgICByZWxvYWRXb3JkcygpIHtcclxuICAgICAgICBjb25zdCBncm91cCA9IG5ldyBXb3JkR3JvdXAodGhpcy50ZXh0Ym9vayk7XHJcbiAgICAgICAgZ3JvdXAucmVuZGVyR3JvdXAoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcGksIGJhc2VVcmwsIERpZmZCdXR0b25TdGF0ZSwgU3R1ZEJ1dHRvblN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vYmFzaWMnO1xyXG5pbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vLi4vQ3JlYXRvcic7XHJcbmltcG9ydCAnLi93b3JkRGV0YWlscy5zY3NzJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29yZERldGFpbHNWaWV3IHtcclxuICAgIGNvbnN0cnVjdG9yKGRldGFpbHMsIHdvcmQpIHtcclxuICAgICAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xyXG4gICAgICAgIHRoaXMud29yZCA9IHdvcmQ7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IGA8aW1nIHNyYz1cIiR7YmFzZVVybH0vJHt0aGlzLndvcmQuaW1hZ2V9XCIgY2xhc3M9XCJ3b3Jkc19faW1hZ2VcIj48L2ltZz5gO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyQ29udGVudCA9IHRoaXMucmVuZGVySGVhZGVyKHRoaXMud29yZCk7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbkNvbnRlbnQgPSB0aGlzLnJlbmRlckRlc2NyaXB0aW9uKHRoaXMud29yZCk7XHJcbiAgICAgICAgdGhpcy5kZXRhaWxzLmlubmVySFRNTCA9IHRoaXMuaW1hZ2U7XHJcbiAgICAgICAgaWYgKEFwaS5pc0F1dGhvcml6ZWQoKSlcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b25zKCk7XHJcbiAgICAgICAgdGhpcy5pbmZvcm1hdGlvbiA9IG5ldyBDcmVhdG9yKHRoaXMuZGV0YWlscywgJ2RpdicsICd3b3Jkc19faW5mb3JtYXRpb24nKTtcclxuICAgICAgICB0aGlzLmhlYWRlciA9IG5ldyBDcmVhdG9yKHRoaXMuaW5mb3JtYXRpb24ubm9kZSwgJ2RpdicsICd3b3Jkc19faGVhZGVyJywgdGhpcy5oZWFkZXJDb250ZW50KTtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IENyZWF0b3IodGhpcy5pbmZvcm1hdGlvbi5ub2RlLCAnZGl2JywgJ3dvcmRzX19kZXNjcmlwdGlvbicsIHRoaXMuZGVzY3JpcHRpb25Db250ZW50KTtcclxuICAgICAgICB0aGlzLmF1ZGlvQnV0dG9uID0gbmV3IENyZWF0b3IodGhpcy5oZWFkZXIubm9kZSwgJ2J1dHRvbicsICd3b3Jkc19fYXVkaW8nLCB0aGlzLnJlbmRlckF1ZGlvQnV0dG9uKCkpO1xyXG4gICAgICAgIGlmIChBcGkuaXNBdXRob3JpemVkKCkpXHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWlscy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRoaXMucmVuZGVyU3RhdGlzdGljcygpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KHQvtC30LTQsNC10YIg0YjQsNC/0LrRgyDQsdC70L7QutCwINC00LvRjyDQvtC/0YDQtdC00LXQu9C10L3QvdC+0LPQviDRgdC70L7QstCwXHJcbiAgICAgKiBAcGFyYW0gd29yZCDQntCx0YrQtdC60YIg0YHQu9C+0LLQsFxyXG4gICAgICogQHJldHVybnMgINCo0LDQv9C60LAg0LHQu9C+0LrQsFxyXG4gICAgICovXHJcbiAgICByZW5kZXJIZWFkZXIod29yZCkge1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICAgIDxoMiBjbGFzcz1cIndvcmRzX193b3JkXCI+JHt3b3JkLndvcmR9PC9oMj5cclxuICAgICAgPGgzIGNsYXNzPVwid29yZHNfX3RyYW5zbGF0ZVwiPiR7d29yZC53b3JkVHJhbnNsYXRlfTwvaDM+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwid29yZHNfX3RyYW5zY3JpcHRpb25cIj4ke3dvcmQudHJhbnNjcmlwdGlvbn08L3NwYW4+XHJcbiAgICBgO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQodC+0LfQtNCw0LXRgiDRjdC70LXQvNC10L3RgiBkZXNjcmlwdGlvbiDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90L3QvtCz0L4g0YHQu9C+0LLQsFxyXG4gICAgICogQHBhcmFtIHdvcmQg0J7QsdGK0LXQutGCINGB0LvQvtCy0LBcclxuICAgICAqIEByZXR1cm5zICDQrdC70LXQvNC10L3RgiBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICByZW5kZXJEZXNjcmlwdGlvbih3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgPGgzIGNsYXNzPVwid29yZHNfX3N1YnRpdGxlXCI+0JfQvdCw0YfQtdC90LjQtTwvaDM+XHJcbiAgICAgIDxwPiR7d29yZC50ZXh0TWVhbmluZ308L3A+XHJcbiAgICAgIDxwPiR7d29yZC50ZXh0TWVhbmluZ1RyYW5zbGF0ZX08L3A+XHJcbiAgICAgIDxoMyBjbGFzcz1cIndvcmRzX19zdWJ0aXRsZVwiPtCf0YDQuNC80LXRgDwvaDM+XHJcbiAgICAgIDxwPiR7d29yZC50ZXh0RXhhbXBsZX08L3A+XHJcbiAgICAgIDxwPiR7d29yZC50ZXh0RXhhbXBsZVRyYW5zbGF0ZX08L3A+XHJcbiAgICBgO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQodC+0LfQtNCw0LXRgiDQuNC60L7QvdC60YMg0LTQu9GPINC60L3QvtC/0LrQuCDQsNGD0LTQuNC+XHJcbiAgICAgKiBAcmV0dXJucyBzdmcg0LjQutC+0L3QutGDXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckF1ZGlvQnV0dG9uKCkge1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICA8c3ZnIGNsYXNzPVwid29yZHNfX2F1ZGlvLWljb25cIj5cclxuICAgICAgPHVzZSB4bGluazpocmVmPVwicHVibGljL3N0YXRpYy9hdWRpby5zdmcjYXVkaW9cIj48L3VzZT5cclxuICAgIDwvc3ZnPlxyXG4gICAgYDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JXRgdC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINCw0LLRgtC+0YDQuNC30L7QstCw0L0g0YHQvtC30LTQsNC10YIg0LrQvdC+0L/QutC4INC00LvRjyDQsdC70L7QutCwXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckJ1dHRvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5kZXRhaWxzQnV0dG9ucyA9IG5ldyBDcmVhdG9yKHRoaXMuZGV0YWlscywgJ2RpdicsICd3b3Jkc19fYnV0dG9ucycpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZCdG5DbGFzcyA9ICd3b3Jkc19fYnV0dG9ucy1kaWZmaWN1bHQnO1xyXG4gICAgICAgIGNvbnN0IHN0dWRCdG5DbGFzcyA9ICd3b3Jkc19fYnV0dG9ucy1zdHVkaWVkJztcclxuICAgICAgICB0aGlzLmRpZmZpY3VsdEJ1dHRvbiA9IG5ldyBDcmVhdG9yKHRoaXMuZGV0YWlsc0J1dHRvbnMubm9kZSwgJ2J1dHRvbicsIGRpZmZCdG5DbGFzcywgRGlmZkJ1dHRvblN0YXRlLm5vcm1hbCk7XHJcbiAgICAgICAgdGhpcy5zdHVkaWVkQnV0dG9uID0gbmV3IENyZWF0b3IodGhpcy5kZXRhaWxzQnV0dG9ucy5ub2RlLCAnYnV0dG9uJywgc3R1ZEJ0bkNsYXNzLCBTdHVkQnV0dG9uU3RhdGUubm9ybWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JXRgdC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINCw0LLRgtC+0YDQuNC30L7QstCw0L0g0YHQvtC30LTQsNC10YIg0YHRgtCw0YLQuNGB0YLQuNC60YMg0LTQu9GPINCx0LvQvtC60LBcclxuICAgICAqIEByZXR1cm5zINCh0YLQsNGC0LjRgdGC0LjQutCwINC/0L4g0LjQs9GA0LDQvFxyXG4gICAgICovXHJcbiAgICByZW5kZXJTdGF0aXN0aWNzKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRpc3RpY3MgPSB0aGlzLndvcmQudXNlcldvcmQ/Lm9wdGlvbmFsO1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvY2FsbCA9IHN0YXRpc3RpY3M/LmF1ZGlvQ2FsbDtcclxuICAgICAgICBjb25zdCBzcHJpbnQgPSBzdGF0aXN0aWNzPy5zcHJpbnQ7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgPGRpdiBjbGFzcz1cIndvcmRzX19zdGF0aXN0aWNzXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIndvcmRzX19zdGF0aXN0aWNzLXdyYXBwZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3b3Jkc19fc3RhdGlzdGljcy1nYW1lXCI+QXVkaW9jYWxsPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yZHNfX3N0YXRpc3RpY3Mtc2NvcmVcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ3b3Jkc19fc3RhdGlzdGljcy1yaWdodFwiPiR7YXVkaW9jYWxsPy5yaWdodCB8fCAwfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ3b3Jkc19fc3RhdGlzdGljcy13cm9uZ1wiPiR7YXVkaW9jYWxsPy53cm9uZyB8fCAwfTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3b3Jkc19fc3RhdGlzdGljcy13cmFwcGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yZHNfX3N0YXRpc3RpY3MtZ2FtZVwiPlNwcmludDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIndvcmRzX19zdGF0aXN0aWNzLXNjb3JlXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwid29yZHNfX3N0YXRpc3RpY3MtcmlnaHRcIj4ke3NwcmludD8ucmlnaHQgfHwgMH08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwid29yZHNfX3N0YXRpc3RpY3Mtd3JvbmdcIj4ke3NwcmludD8ud3JvbmcgfHwgMH08L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi93b3JkR3JvdXAnO1xyXG4iLCJpbXBvcnQgeyBhY3Rpdml0eUNsYXNzLCBUZXh0Ym9va1NlcnZpY2UsIEVTdG9yYWdlLCBFVXNlcldvcmRTdGF0dXMsIH0gZnJvbSAnLi4vLi4vLi4vYmFzaWMnO1xyXG5pbXBvcnQgeyBXb3JkQ2FyZCwgV29yZFBhZ2luYXRpb24gfSBmcm9tICcuLi8uLic7XHJcbmltcG9ydCBXb3JkR3JvdXBWaWV3IGZyb20gJy4vd29yZEdyb3VwLnZpZXcnO1xyXG5leHBvcnQgY2xhc3MgV29yZEdyb3VwIHtcclxuICAgIGNvbnN0cnVjdG9yKHRleHRib29rKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vayA9IHRleHRib29rO1xyXG4gICAgICAgIGlmICghV29yZEdyb3VwVmlldy5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcgPSBuZXcgV29yZEdyb3VwVmlldyh0aGlzLnRleHRib29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFXb3JkR3JvdXAuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgV29yZEdyb3VwLmluc3RhbmNlID0gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFdvcmRHcm91cC5pbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdGCINC/0L7Qu9GD0YfQtdC90L3Ri9C1INC00LDQvdC90YvQtSDQviDRgdC70L7QstCw0YVcclxuICAgICAqIEBwYXJhbSBncm91cCDQvdC+0LzQtdGAINCz0YDRg9C/0L/Ri1xyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKiBAcGFyYW0gaXNHcm91cCDQv9GA0L7QstC10YDQutCwLCDRj9Cy0LvRj9C10YLRgdGPINC70Lgg0LLQutC70LDQtNC60LAg0LPRgNGD0L/Qv9C+0Lkg0LTQu9GPINGB0LvQvtCyINC40LvQuCDQttC1INGA0LDQt9C00LXQu9C+0LwgRGlmZmljdWx0IHdvcmRzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENhcmRzKGdyb3VwLCBwYWdlLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBhd2FpdCBUZXh0Ym9va1NlcnZpY2UuZ2V0V29yZHMoZ3JvdXAsIHBhZ2UsIGlzR3JvdXApO1xyXG4gICAgICAgIHRoaXMuY2xlYXJDb250YWluZXJzKCk7XHJcbiAgICAgICAgaWYgKHdvcmRzKSB7XHJcbiAgICAgICAgICAgIHdvcmRzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gYWN0aXZpdHlDbGFzcztcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FyZChpdGVtLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgYWxsU3R1ZGllZCA9IHdvcmRzLmV2ZXJ5KChpdGVtKSA9PiBpdGVtLnVzZXJXb3JkPy5kaWZmaWN1bHR5ICE9PSBFVXNlcldvcmRTdGF0dXMubm9ybWFsICYmIGl0ZW0udXNlcldvcmQ/LmRpZmZpY3VsdHkgIT09IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGFsbFN0dWRpZWQgPyB0aGlzLmRpc2FibGVMaW5rcygpIDogdGhpcy5lbmFibGVMaW5rcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNHcm91cClcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYWdpbmF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCf0L7Qu9GD0YfQsNC10YIg0LjQtyBsb2NhbHN0b3JhZ2Ug0LjQu9C4INC/0YDQuNC90LjQvNCw0LXRgiDQsiDQutCw0YfQtdGB0YLQstC1INCw0YDQs9GD0LzQtdC90YLQvtCyINC4INC/0LXRgNC10LTQsNC10YIg0LTQsNC90L3Ri9C1INCz0YDRg9C/0L/RiyDQuCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKiBAcGFyYW0gZ3JvdXAg0L3QvtC80LXRgCDQs9GA0YPQv9C/0YtcclxuICAgICAqIEBwYXJhbSBwYWdlINC90L7QvNC10YAg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICogQHBhcmFtIGlzR3JvdXAg0L/RgNC+0LLQtdGA0LrQsCwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INCy0LrQu9Cw0LTQutCwINCz0YDRg9C/0L/QvtC5INC00LvRjyDRgdC70L7QsiDQuNC70Lgg0LbQtSDRgNCw0LfQtNC10LvQvtC8IERpZmZpY3VsdCB3b3Jkc1xyXG4gICAgICovXHJcbiAgICByZW5kZXJHcm91cChncm91cCwgcGFnZSwgaXNHcm91cCA9IHRydWUpIHtcclxuICAgICAgICBsZXQgc3RvcmFnZWRQYWdlID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEVTdG9yYWdlLnBhZ2UpKSB8fCAwO1xyXG4gICAgICAgIGxldCBzdG9yYWdlZEdyb3VwID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEVTdG9yYWdlLmdyb3VwKSkgfHwgMDtcclxuICAgICAgICBpZiAocGFnZSlcclxuICAgICAgICAgICAgc3RvcmFnZWRQYWdlID0gcGFnZTtcclxuICAgICAgICBpZiAoZ3JvdXApXHJcbiAgICAgICAgICAgIHN0b3JhZ2VkR3JvdXAgPSBncm91cDtcclxuICAgICAgICB2b2lkIHRoaXMuZ2V0Q2FyZHMoc3RvcmFnZWRHcm91cC50b1N0cmluZygpLCBzdG9yYWdlZFBhZ2UudG9TdHJpbmcoKSwgaXNHcm91cCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINC/0LDQs9C40L3QsNGG0LjRjiDQtNC70Y8g0LPRgNGD0L/Qv9GLXHJcbiAgICAgKi9cclxuICAgIHJlbmRlclBhZ2luYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcGFnaW5hdGlvbiA9IG5ldyBXb3JkUGFnaW5hdGlvbih0aGlzLnRleHRib29rKTtcclxuICAgICAgICBwYWdpbmF0aW9uLnBhZ2luYXRlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCDQutCw0YDRgtC+0YfQutC4INGB0LvQvtCy0LBcclxuICAgICAqIEBwYXJhbSBpdGVtINC+0LHRitC10LrRgiDRgdC70L7QstCwXHJcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lINC60LvQsNGB0YEg0LDQutGC0LjQstC90L7RgdGC0LhcclxuICAgICAqL1xyXG4gICAgcmVuZGVyQ2FyZChpdGVtLCBjbGFzc05hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy52aWV3KVxyXG4gICAgICAgICAgICBuZXcgV29yZENhcmQodGhpcy52aWV3LCB0aGlzLnRleHRib29rLCBpdGVtLCBjbGFzc05hbWUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntGH0LjRidCw0LXRgiDRgNC+0LTQuNGC0LXQu9GM0YHQutC40LUg0Y3Qu9C10LzQtdC90YLRiyDQtNC70Y8g0LPQtdC90LXRgNCw0YbQuNC4INC90L7QstC+0LPQviDRgdC+0LTQtdGA0LbQuNC80L7Qs9C+XHJcbiAgICAgKi9cclxuICAgIGNsZWFyQ29udGFpbmVycygpIHtcclxuICAgICAgICBpZiAodGhpcy52aWV3KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy53b3Jkc0NvbnRhaW5lci5ub2RlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGV0YWlscy5ub2RlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRib29rLnBhZ2luYXRpb24ubm9kZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCIGV2ZW50INC00LvRjyDQtNC10LDQutGC0LjQstCw0YbQuNC4INGB0YHRi9C70L7QuiDQuCDQtNC40YHQv9Cw0YLRh9C40YIg0L3QsCDQvtCx0YrQtdC60YIgZG9jdW1lbnRcclxuICAgICAqL1xyXG4gICAgZGlzYWJsZUxpbmtzKCkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdEaXNhYmxlTGlua3MnLCB7IGJ1YmJsZXM6IHRydWUgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCIGV2ZW50INC00LvRjyDQsNC60YLQuNCy0LDRhtC40Lgg0YHRgdGL0LvQvtC6INC4INC00LjRgdC/0LDRgtGH0LjRgiDQvdCwINC+0LHRitC10LrRgiBkb2N1bWVudFxyXG4gICAgICovXHJcbiAgICBlbmFibGVMaW5rcygpIHtcclxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnRW5hYmxlTGlua3MnLCB7IGJ1YmJsZXM6IHRydWUgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ3JlYXRvciB9IGZyb20gJy4uLy4uL0NyZWF0b3InO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JkR3JvdXBWaWV3IHtcclxuICAgIGNvbnN0cnVjdG9yKHRleHRib29rKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vayA9IHRleHRib29rO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IHRleHRib29rLndvcmRzLm5vZGU7XHJcbiAgICAgICAgdGhpcy53b3Jkc0NvbnRhaW5lciA9IG5ldyBDcmVhdG9yKHRoaXMudGV4dGJvb2sud29yZHMubm9kZSwgJ2RpdicsICd3b3Jkc19fY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gbmV3IENyZWF0b3IodGhpcy50ZXh0Ym9vay53b3Jkcy5ub2RlLCAnZGl2JywgJ3dvcmRzX19kZXRhaWxzJyk7XHJcbiAgICAgICAgaWYgKCFXb3JkR3JvdXBWaWV3Lmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIFdvcmRHcm91cFZpZXcuaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gV29yZEdyb3VwVmlldy5pbnN0YW5jZTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL3dvcmRQYWdpbmF0aW9uJztcclxuIiwiaW1wb3J0IHsgV29yZEdyb3VwIH0gZnJvbSAnLi4vLi4nO1xyXG5pbXBvcnQgeyBXb3JkUGFnaW5hdGlvblZpZXcgfSBmcm9tICcuL3dvcmRQYWdpbmF0aW9uLnZpZXcnO1xyXG5pbXBvcnQgeyBhY3Rpdml0eUNsYXNzLCBFU3RvcmFnZSwgbWF4V29yZHNQYWdlcyB9IGZyb20gJy4uLy4uLy4uL2Jhc2ljJztcclxuZXhwb3J0IGNsYXNzIFdvcmRQYWdpbmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHRleHRib29rKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vayA9IHRleHRib29rO1xyXG4gICAgICAgIHRoaXMud29yZHNDb250YWluZXIgPSB0aGlzLnRleHRib29rLndvcmRzLm5vZGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINC/0LDQs9C40L3QsNGG0LjRjiwg0LLRi9C/0L7Qu9C90Y/QtdGCINC/0LXRgNC10LzQtdGJ0LXQvdC40LUg0L/QviDRgdGC0YDQsNC90LjRhtCw0LxcclxuICAgICAqIEBwYXJhbSB0b3RhbFBhZ2VzINC80LDQutGB0LjQvNCw0LvRjNC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0YDQsNC90LjRhlxyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIHBhZ2luYXRlKHRvdGFsUGFnZXMgPSBtYXhXb3Jkc1BhZ2VzLCBwYWdlKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSBwYWdlIHx8IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFnZScpKSArIDEgfHwgMTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3lQYWdpbmF0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgcGFnaW5hdGlvbiA9IG5ldyBXb3JkUGFnaW5hdGlvblZpZXcodGhpcy50ZXh0Ym9vayk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dQcmV2aW91c0J1dHRvbihwYWdpbmF0aW9uLCB0b3RhbFBhZ2VzLCBjdXJyZW50UGFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZSA+IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Rmlyc3RJdGVtKHBhZ2luYXRpb24sIHRvdGFsUGFnZXMsIGN1cnJlbnRQYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93QWN0aXZlSXRlbShwYWdpbmF0aW9uLCB0b3RhbFBhZ2VzLCBjdXJyZW50UGFnZSk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYWdlIDwgdG90YWxQYWdlcyAtIDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93TGFzdEl0ZW0ocGFnaW5hdGlvbiwgdG90YWxQYWdlcywgY3VycmVudFBhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudFBhZ2UgPCB0b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05leHRCdXR0b24ocGFnaW5hdGlvbiwgdG90YWxQYWdlcywgY3VycmVudFBhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdGCINC60LvQuNC6INC/0L4g0L3QvtC80LXRgNGDINGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAqIEBwYXJhbSB0b3RhbFBhZ2VzINC80LDQutGB0LjQvNCw0LvRjNC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0YDQsNC90LjRhlxyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIGNsaWNrSGFuZGxlcih0b3RhbFBhZ2VzLCBwYWdlKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmVyUGFnaW5hdGlvbiA9IHBhZ2UgLSAxO1xyXG4gICAgICAgIHRoaXMucGFnaW5hdGUodG90YWxQYWdlcywgcGFnZSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJXb3JkR3JvdXAodW5kZWZpbmVkLCBzZXJ2ZXJQYWdpbmF0aW9uKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC+0LHRgNCw0LbQsNC10YIg0L/QtdGA0LLRi9C5INGN0LvQtdC80LXQvdGCINC/0LDQs9C40L3QsNGG0LjQuCwg0L3QsNC30L3QsNGH0LXRgiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBjbGlja1xyXG4gICAgICogQHBhcmFtIHBhZ2luYXRpb24g0LjQvdGB0YLQsNC90YEg0LrQu9Cw0YHRgdCwIFdvcmRQYWdpbmF0aW9uVmlld1xyXG4gICAgICogQHBhcmFtIHRvdGFsUGFnZXMg0LzQsNC60YHQuNC80LDQu9GM0L3QviDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0YDQsNC90LjRhlxyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIHNob3dGaXJzdEl0ZW0ocGFnaW5hdGlvbiwgdG90YWxQYWdlcywgcGFnZSkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBwYWdpbmF0aW9uLmNyZWF0ZVBhZ2UoJ2ZpcnN0IG51bWJlcicsIGA8c3Bhbj4xPC9zcGFuPmApO1xyXG4gICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IHRoaXMuY2xpY2tIYW5kbGVyKHRvdGFsUGFnZXMsIDEpO1xyXG4gICAgICAgIGlmIChwYWdlID4gMykge1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uLmNyZWF0ZVBhZ2UoJ2RvdHMnLCAnPHNwYW4+Li4uPC9zcGFuPicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC+0LHRgNCw0LbQsNC10YIg0LrQvdC+0L/QutGDINC00LvRjyDQv9C10YDQtdC80LXRidC10L3QuNGPINC/0L4g0YHRgtGA0LDQvdC40YbQsNC8INC90LDQt9Cw0LQsINC90LDQt9C90LDRh9C10YIg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gY2xpY2tcclxuICAgICAqIEBwYXJhbSBwYWdpbmF0aW9uINC90YHRgtCw0L3RgSDQutC70LDRgdGB0LAgV29yZFBhZ2luYXRpb25WaWV3XHJcbiAgICAgKiBAcGFyYW0gdG90YWxQYWdlcyDQvNCw0LrRgdC40LzQsNC70YzQvdC+INC60L7Qu9C40YfQtdGB0YLQstC+INGB0YLRgNCw0L3QuNGGXHJcbiAgICAgKiBAcGFyYW0gcGFnZSDQvdC+0LzQtdGAINGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAqL1xyXG4gICAgc2hvd1ByZXZpb3VzQnV0dG9uKHBhZ2luYXRpb24sIHRvdGFsUGFnZXMsIHBhZ2UpIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gcGFnaW5hdGlvbi5jcmVhdGVQYWdlKCdwYWdpbmF0aW9uX19idXR0b24gcHJldicsICdQcmV2aW91cycpO1xyXG4gICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IHRoaXMuY2xpY2tIYW5kbGVyKHRvdGFsUGFnZXMsIHBhZ2UgLSAxKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC+0LHRgNCw0LbQsNC10YIg0LrQvdC+0L/QutGDINC00LvRjyDQv9C10YDQtdC80LXRidC10L3QuNGPINC/0L4g0YHRgtGA0LDQvdC40YbQsNC8INCy0L/QtdGA0ZHQtCwg0L3QsNC30L3QsNGH0LXRgiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBjbGlja1xyXG4gICAgICogQHBhcmFtIHBhZ2luYXRpb24g0L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCBXb3JkUGFnaW5hdGlvblZpZXdcclxuICAgICAqIEBwYXJhbSB0b3RhbFBhZ2VzINC80LDQutGB0LjQvNCw0LvRjNC90L4g0LrQvtC70LjRh9C10YHRgtCy0L4g0YHRgtGA0LDQvdC40YZcclxuICAgICAqIEBwYXJhbSBwYWdlINC90L7QvNC10YAg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICovXHJcbiAgICBzaG93TmV4dEJ1dHRvbihwYWdpbmF0aW9uLCB0b3RhbFBhZ2VzLCBwYWdlKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHBhZ2luYXRpb24uY3JlYXRlUGFnZSgncGFnaW5hdGlvbl9fYnV0dG9uIG5leHQnLCBgPHNwYW4+TmV4dDwvc3Bhbj5gKTtcclxuICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsaWNrSGFuZGxlcih0b3RhbFBhZ2VzLCBwYWdlICsgMSk7XHJcbiAgICB9XHJcbiAgICBzaG93QWN0aXZlSXRlbShwYWdpbmF0aW9uLCB0b3RhbFBhZ2VzLCBwYWdlKSB7XHJcbiAgICAgICAgbGV0IGJlZm9yZVBhZ2UgPSBwYWdlIC0gMTtcclxuICAgICAgICBsZXQgYWZ0ZXJQYWdlID0gcGFnZSArIDE7XHJcbiAgICAgICAgbGV0IGFjdGl2ZTtcclxuICAgICAgICBpZiAocGFnZSA9PSB0b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICAgIGJlZm9yZVBhZ2UgPSBiZWZvcmVQYWdlIC0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFnZSA9PSB0b3RhbFBhZ2VzIC0gMSkge1xyXG4gICAgICAgICAgICBiZWZvcmVQYWdlID0gYmVmb3JlUGFnZSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYWdlID09IDEpIHtcclxuICAgICAgICAgICAgYWZ0ZXJQYWdlID0gYWZ0ZXJQYWdlICsgMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFnZSA9PSAyKSB7XHJcbiAgICAgICAgICAgIGFmdGVyUGFnZSA9IGFmdGVyUGFnZSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IHBsZW5ndGggPSBiZWZvcmVQYWdlOyBwbGVuZ3RoIDw9IGFmdGVyUGFnZTsgcGxlbmd0aCsrKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGVuZ3RoID4gdG90YWxQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBsZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcGxlbmd0aCA9IHBsZW5ndGggKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYWdlID09IHBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGFjdGl2aXR5Q2xhc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gcGFnaW5hdGlvbi5jcmVhdGVQYWdlKGBudW1iZXIgJHthY3RpdmV9YCwgYDxzcGFuPiR7cGxlbmd0aH08L3NwYW4+YCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IHRoaXMuY2xpY2tIYW5kbGVyKHRvdGFsUGFnZXMsIHBsZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7RgtC+0LHRgNCw0LbQsNC10YIg0L/QvtGB0LvQtdC00L3QuNC5INGN0LvQtdC80LXQvdGCINC/0LDQs9C40L3QsNGG0LjQuCwg0L3QsNC30L3QsNGH0LXRgiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBjbGlja1xyXG4gICAgICogQHBhcmFtIHBhZ2luYXRpb24g0LjQvdGB0YLQsNC90YEg0LrQu9Cw0YHRgdCwIFdvcmRQYWdpbmF0aW9uVmlld1xyXG4gICAgICogQHBhcmFtIHRvdGFsUGFnZXMg0LzQsNC60YHQuNC80LDQu9GM0L3QviDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0YDQsNC90LjRhlxyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIHNob3dMYXN0SXRlbShwYWdpbmF0aW9uLCB0b3RhbFBhZ2VzLCBwYWdlKSB7XHJcbiAgICAgICAgaWYgKHBhZ2UgPCB0b3RhbFBhZ2VzIC0gMikge1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uLmNyZWF0ZVBhZ2UoJ2RvdHMnLCAnPHNwYW4+Li4uPC9zcGFuPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gcGFnaW5hdGlvbi5jcmVhdGVQYWdlKCdsYXN0IG51bWJlcicsIGA8c3Bhbj4ke3RvdGFsUGFnZXN9PC9zcGFuPmApO1xyXG4gICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IHRoaXMuY2xpY2tIYW5kbGVyKHRvdGFsUGFnZXMsIHRvdGFsUGFnZXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0L3QvtCy0LvRj9C10YIg0LPRgNGD0L/Qv9GDINC/0YDQuCDQv9Cw0LPQuNC90LDRhtC40LhcclxuICAgICAqIEBwYXJhbSBncm91cCDQvdC+0LzQtdGAINCz0YDRg9C/0L/Ri1xyXG4gICAgICogQHBhcmFtIHBhZ2Ug0L3QvtC80LXRgCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcldvcmRHcm91cChncm91cCwgcGFnZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBhZ2UpO1xyXG4gICAgICAgIGNvbnN0IHdvcmRHcm91cCA9IG5ldyBXb3JkR3JvdXAodGhpcy50ZXh0Ym9vayk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oRVN0b3JhZ2UucGFnZSwgSlNPTi5zdHJpbmdpZnkocGFnZSkpO1xyXG4gICAgICAgIHZvaWQgd29yZEdyb3VwLnJlbmRlckdyb3VwKGdyb3VwLCBwYWdlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7Rh9C40YnQsNC10YIg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INCx0LvQvtC6INC00LvRjyDQv9Cw0LPQuNC90LDRhtC40LhcclxuICAgICAqL1xyXG4gICAgZGVzdHJveVBhZ2luYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vay5wYWdpbmF0aW9uLm5vZGUuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ3JlYXRvciB9IGZyb20gJy4uLy4uL0NyZWF0b3InO1xyXG5pbXBvcnQgJy4vd29yZFBhZ2luYXRpb24uc2Nzcyc7XHJcbmV4cG9ydCBjbGFzcyBXb3JkUGFnaW5hdGlvblZpZXcge1xyXG4gICAgY29uc3RydWN0b3IodGV4dGJvb2spIHtcclxuICAgICAgICB0aGlzLnRleHRib29rID0gdGV4dGJvb2s7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gdGhpcy50ZXh0Ym9vay5wYWdpbmF0aW9uLm5vZGU7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gbmV3IENyZWF0b3IodGhpcy5wYWdpbmF0aW9uLCAndWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KHQvtC30LTQsNC10YIg0Y3Qu9C10LzQtdC90YLRiyDQv9Cw0LPQuNC90LDRhtC40LgsINC/0YDQuNGB0LLQsNC40LLQsNC10YIg0LrQu9Cw0YHRgSDQsNC60YLQuNCy0L3QvtGB0YLQuFxyXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSDQutC70LDRgdGBINCw0LrRgtC40LLQvdC+0YHRgtC4XHJcbiAgICAgKiBAcGFyYW0gY29udGVudCDQvdC+0LzQtdGAINGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVBhZ2UoY2xhc3NOYW1lLCBjb250ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcGFnZSA9IG5ldyBDcmVhdG9yKHRoaXMubGlzdC5ub2RlLCAnbGknLCBjbGFzc05hbWUsIGNvbnRlbnQpO1xyXG4gICAgICAgIHJldHVybiBwYWdlLm5vZGU7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi93b3JkVGFiJztcclxuIiwiaW1wb3J0IHsgYWN0aXZpdHlDbGFzcywgRVN0b3JhZ2UsIGdyb3VwcywgVE9UQUxfR1JPVVBTIH0gZnJvbSAnLi4vLi4vLi4vYmFzaWMnO1xyXG5pbXBvcnQgeyBXb3JkR3JvdXAgfSBmcm9tICcuLi9Xb3JkR3JvdXAnO1xyXG5pbXBvcnQgV29yZFRhYlZpZXcgZnJvbSAnLi93b3JkVGFiLnZpZXcnO1xyXG5leHBvcnQgY2xhc3MgV29yZFRhYiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0Ym9vaywgZ3JvdXBEYXRhKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9vayA9IHRleHRib29rO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBEYXRhID0gZ3JvdXBEYXRhO1xyXG4gICAgICAgIHRoaXMuaXNHcm91cCA9ICEhdGhpcy5ncm91cERhdGFbMF07XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlID0gdGhpcy50ZXh0Ym9vay5ncm91cC5ub2RlO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBOdW1iZXIgPSB0aGlzLmlzR3JvdXAgPyBPYmplY3Qua2V5cyhncm91cHMpLmluZGV4T2YodGhpcy5ncm91cERhdGFbMF0pIDogVE9UQUxfR1JPVVBTO1xyXG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBXb3JkVGFiVmlldyh0aGlzLnBhcmVudE5vZGUsIHRoaXMuZ3JvdXBEYXRhKTtcclxuICAgICAgICB0aGlzLmdyb3VwQnV0dG9uID0gdGhpcy52aWV3Lmdyb3VwQnV0dG9uLm5vZGU7XHJcbiAgICAgICAgdGhpcy5ncm91cEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbGlja0hhbmRsZXIoKTtcclxuICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0LDRgtGL0LLQsNC10YIg0LrQu9C40LrQuCDQv9C+INCy0LrQu9Cw0LTQutCw0LxcclxuICAgICAqL1xyXG4gICAgY2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwID0gbmV3IFdvcmRHcm91cCh0aGlzLnRleHRib29rKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShFU3RvcmFnZS5ncm91cCwgSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cE51bWJlcikpO1xyXG4gICAgICAgIGdyb3VwLnJlbmRlckdyb3VwKHRoaXMuZ3JvdXBOdW1iZXIsIHVuZGVmaW5lZCwgdGhpcy5pc0dyb3VwKTtcclxuICAgICAgICB0aGlzLnN3aXRjaFN0eWxlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQlNC+0LHQsNCy0LvRj9C10YIg0Lgg0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSBhY3RpdmVcclxuICAgICAqL1xyXG4gICAgc3dpdGNoU3R5bGVzKCkge1xyXG4gICAgICAgIHRoaXMudGV4dGJvb2suYWN0aXZlR3JvdXAuY2xhc3NMaXN0LnJlbW92ZShhY3Rpdml0eUNsYXNzKTtcclxuICAgICAgICB0aGlzLnRleHRib29rLmFjdGl2ZUdyb3VwID0gdGhpcy5ncm91cEJ1dHRvbjtcclxuICAgICAgICB0aGlzLnRleHRib29rLmFjdGl2ZUdyb3VwLmNsYXNzTGlzdC5hZGQoYWN0aXZpdHlDbGFzcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINCz0YDRg9C/0L/RgyDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDQuNC90YHRgtCw0L3RgdCwINC60LvQsNGB0YHQsFxyXG4gICAgICovXHJcbiAgICByZW5kZXJHcm91cE9uTG9hZCgpIHtcclxuICAgICAgICBpZiAoIVdvcmRHcm91cC5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IG5ldyBXb3JkR3JvdXAodGhpcy50ZXh0Ym9vayk7XHJcbiAgICAgICAgICAgIGdyb3VwLnJlbmRlckdyb3VwKHRoaXMuZ3JvdXBOdW1iZXIsIHVuZGVmaW5lZCwgdGhpcy5pc0dyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINCy0LrQu9Cw0LTQutGDINCyINC60LDRh9C10YHRgtCy0LUg0LDQutGC0LjQstC90L7QuVxyXG4gICAgICovXHJcbiAgICBzZXRBY3RpdmVUYWIoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEdyb3VwID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKEVTdG9yYWdlLmdyb3VwKSk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRHcm91cCA9PT0gdGhpcy5ncm91cE51bWJlcilcclxuICAgICAgICAgICAgdGhpcy5ncm91cEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGFjdGl2aXR5Q2xhc3MpO1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhhY3Rpdml0eUNsYXNzKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRib29rLmFjdGl2ZUdyb3VwID0gdGhpcy5ncm91cEJ1dHRvbjtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJHcm91cE9uTG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vLi4vQ3JlYXRvcic7XHJcbmltcG9ydCAnLi93b3JkVGFiLnNjc3MnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JkVGFiVmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnROb2RlLCBpdGVtKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlID0gcGFyZW50Tm9kZTtcclxuICAgICAgICB0aGlzLml0ZW0gPSBpdGVtO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBCdXR0b24gPSBuZXcgQ3JlYXRvcih0aGlzLnBhcmVudE5vZGUsICdidXR0b24nLCAnZ3JvdXBfX2J1dHRvbicpO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IG5ldyBDcmVhdG9yKHRoaXMuZ3JvdXBCdXR0b24ubm9kZSwgJ2RpdicsICdncm91cF9fYnV0dG9uLWxlZnQnLCB0aGlzLml0ZW1bMV0pO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSBuZXcgQ3JlYXRvcih0aGlzLmdyb3VwQnV0dG9uLm5vZGUsICdkaXYnLCAnZ3JvdXBfX2J1dHRvbi1yaWdodCcsIHRoaXMuaXRlbVswXSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9Xb3JkQ2FyZCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vV29yZERldGFpbHMnO1xyXG5leHBvcnQgKiBmcm9tICcuL1dvcmRHcm91cCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vV29yZFRhYic7XHJcbmV4cG9ydCAqIGZyb20gJy4vV29yZFBhZ2luYXRpb24nO1xyXG5leHBvcnQgKiBmcm9tICcuL0dhbWVMaW5rcyc7XHJcbiIsImV4cG9ydCBjbGFzcyBCYXNlQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHJvb3QpIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xyXG4gICAgfVxyXG4gICAgZ2V0IGluc3RhbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGU7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCkge1xyXG4gICAgICAgICAgICB0aGlzLmF0dGFjaEVsZW1lbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgdGhpcy5yb290LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGF0dGFjaEVsZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5yb290Py5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vVGV4dGJvb2snO1xyXG5leHBvcnQgKiBmcm9tICcuL0NyZWF0b3InO1xyXG5leHBvcnQgKiBmcm9tICcuL0J1dHRvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4vSW5wdXQnO1xyXG5leHBvcnQgKiBmcm9tICcuL0FkdmFudGFnZXMnO1xyXG5leHBvcnQgKiBmcm9tICcuL0NhcmRPcHBvcnR1bml0aWVzJztcclxuZXhwb3J0ICogZnJvbSAnLi9DYXJkVGVhbSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vRm9vdGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9HYW1lcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSGVhZGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9NYWluJztcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9jb21wb25lbnRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9hcHAnO1xyXG4iLCJpbXBvcnQgeyBFVXNlcldvcmRTdGF0dXMgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uLy4uL2Jhc2ljL2FwaS9hcGknO1xyXG5jb25zdCBOT1JNQUxfRElGRklDVUxUWSA9IDM7XHJcbmNvbnN0IERJRkZJQ1VMVF9ESUZGSUNVTFRZID0gNTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXVkaW9DYWxsTW9kZWwge1xyXG4gICAgc2F2ZVJlc3VsdFRvU2VydmVyKHdvcmQsIGFuc3dlcikge1xyXG4gICAgICAgIHZvaWQgQXBpLmdldFVzZXJXb3JkKHdvcmQuaWQpLnRoZW4oKHdvcmRJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgnZGlmZmljdWx0eScgaW4gd29yZEluZm8pIHtcclxuICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC30LDQv9C40YHRjCDRg9C20LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIsINGC0L4g0LjRgdC/0YDQsNCy0LvRj9C10Lwg0Lgg0L7QsdC90L7QstC70Y/QtdC8XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgd29yZEluZm8uaWQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgd29yZEluZm8ud29yZElkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuc3dlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC/0YDQsNCy0LjQu9GM0L3Ri9C5INC+0YLQstC10YJcclxuICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5vcHRpb25hbC5hdWRpb0NhbGwucmlnaHQrKztcclxuICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5vcHRpb25hbC5hdWRpb0NhbGwubG9uZ1JpZ2h0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMubm9ybWFsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLmF1ZGlvQ2FsbC5sb25nUmlnaHQgPiBOT1JNQUxfRElGRklDVUxUWSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHdvcmRJbmZvLmRpZmZpY3VsdHkgPT09IEVVc2VyV29yZFN0YXR1cy5kaWZmaWN1bHQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLmF1ZGlvQ2FsbC5sb25nUmlnaHQgPiBESUZGSUNVTFRfRElGRklDVUxUWSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEluZm8uZGlmZmljdWx0eSA9IEVVc2VyV29yZFN0YXR1cy5zdHVkaWVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC90LXQv9GA0LDQstC40LvRjNC90YvQuVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLmF1ZGlvQ2FsbC53cm9uZysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLmF1ZGlvQ2FsbC5sb25nUmlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMubm9ybWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLmRpZmZpY3VsdHkgPSBFVXNlcldvcmRTdGF0dXMuZGlmZmljdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMuc3R1ZGllZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5kaWZmaWN1bHR5ID0gRVVzZXJXb3JkU3RhdHVzLm5vcm1hbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2b2lkIEFwaS51cGRhdGVVc2VyV29yZCh3b3JkLmlkLCB3b3JkSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDQmNC90LDRh9C1INGB0L7Qt9C00LDQtdC8INC90L7QstGD0Y4g0LfQsNC/0LjRgdGMXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdXb3JkSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiBhbnN3ZXIgPyBFVXNlcldvcmRTdGF0dXMubm9ybWFsIDogRVVzZXJXb3JkU3RhdHVzLmRpZmZpY3VsdCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Jvbmc6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUmlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvQ2FsbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IGFuc3dlciA/IDEgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Jvbmc6ICFhbnN3ZXIgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdSaWdodDogYW5zd2VyID8gMSA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2b2lkIEFwaS5jcmVhdGVVc2VyV29yZCh3b3JkLmlkLCBuZXdXb3JkSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNhdmVSaWdodFNlcXVlbmNlVG9TdGF0aXN0aWNzKHJlc3VsdCkge1xyXG4gICAgICAgIGxldCBtYXggPSAwO1xyXG4gICAgICAgIGxldCBjdXJNYXggPSAwO1xyXG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgY3VyTWF4Kys7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBjdXJNYXggPiBtYXggPyBjdXJNYXggOiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJNYXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9pZCBBcGkuZ2V0VXNlclN0YXRpc3RpY3MoKS50aGVuKChzdGF0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdTdGF0O1xyXG4gICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiBzdGF0KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXJuZWRXb3JkczogMCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0NhbGw6IGAke21heH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXQgPSBzdGF0O1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG5ld1N0YXQuaWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRNYXggPSBwYXJzZUludChuZXdTdGF0Lm9wdGlvbmFsLmF1ZGlvQ2FsbCk7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBtYXggPiBvbGRNYXggPyBtYXggOiBvbGRNYXg7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0Lm9wdGlvbmFsLmF1ZGlvQ2FsbCA9IGAke21heH1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZvaWQgQXBpLnVwZGF0ZVVzZXJTdGF0aXN0aWNzKG5ld1N0YXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwaSB9IGZyb20gJy4uLy4uL2Jhc2ljJztcclxuaW1wb3J0IExvYWRpbmdQYWdlIGZyb20gJy4uL0xvYWRpbmdQYWdlL0xvYWRpbmdQYWdlJztcclxuaW1wb3J0IEF1ZGlvQ2FsbE1vZGVsIGZyb20gJy4vQXVkaW9DYWxsLm1vZGVsJztcclxuaW1wb3J0IEF1ZGlvQ2FsbEdhbWVQYWdlIGZyb20gJy4vQXVkaW9DYWxsR2FtZVBhZ2UvQXVkaW9DYWxsR2FtZVBhZ2UnO1xyXG5pbXBvcnQgR2FtZVJlc3VsdFBhZ2UgZnJvbSAnLi4vR2FtZVJlc3VsdFBhZ2UvR2FtZVJlc3VsdFBhZ2UnO1xyXG5pbXBvcnQgQXVkaW9DYWxsUnVsZXMgZnJvbSAnLi9BdWRpb0NhbGxSdWxlcy9BdWRpb0NhbGxSdWxlcyc7XHJcbmltcG9ydCB7IEF1dGhQYWdlIH0gZnJvbSAnLi4vQXV0aFBhZ2UnO1xyXG5pbXBvcnQgeyBHYW1lc0dldERhdGEgfSBmcm9tICcuLi8uLi91dGlscy9HYW1lc0dldERhdGEnO1xyXG5jb25zdCBXT1JEU19JTl9HQU1FID0gMjA7XHJcbmV4cG9ydCBjbGFzcyBBdWRpb0NhbGwge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBncm91cCwgcGFnZSkge1xyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcclxuICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuYXVkaW9DYWxsTW9kZWwgPSBuZXcgQXVkaW9DYWxsTW9kZWwoKTtcclxuICAgICAgICB0aGlzLmdhbWVzR2V0RGF0YSA9IG5ldyBHYW1lc0dldERhdGEoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLnJ1bGVzID0gbmV3IEF1ZGlvQ2FsbFJ1bGVzKHRoaXMucGFyZW50LCB0aGlzLnBhZ2UgIT09IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdGhpcy5ydWxlcy5vbkNsaWNrID0gKGdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB2b2lkIHRoaXMubWFpbkN5Y2xlKGdyb3VwKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbWFpbkN5Y2xlKGdyb3VwKSB7XHJcbiAgICAgICAgY29uc3QgbG9hZGluZyA9IG5ldyBMb2FkaW5nUGFnZSh0aGlzLnBhcmVudCk7XHJcbiAgICAgICAgY29uc3QgY3Vyckdyb3VwID0gdGhpcy5ncm91cCAhPT0gdW5kZWZpbmVkID8gdGhpcy5ncm91cCA6IGdyb3VwO1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBuZXcgQXV0aFBhZ2UoZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBncm91cCAhPT0gLTEgfHwgIWF1dGguaXNBdXRob3JpemVkKClcclxuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmdhbWVzR2V0RGF0YS5nZXRXb3Jkc0Zyb21Hcm91cChjdXJyR3JvdXAsIHRoaXMucGFnZSlcclxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmdhbWVzR2V0RGF0YS5nZXRBZ2dyZWdhdGVkV29yZHNGcm9tR3JvdXAodGhpcy5ncm91cCwgdGhpcy5wYWdlKTtcclxuICAgICAgICBsb2FkaW5nLmRlc3Ryb3koKTtcclxuICAgICAgICBjb25zdCBhbnN3ZXJSZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCBnYW1lV29yZHMgPSB3b3Jkcy5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpLnNsaWNlKDAsIFdPUkRTX0lOX0dBTUUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVdvcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lID0gbmV3IEF1ZGlvQ2FsbEdhbWVQYWdlKHRoaXMucGFyZW50LCBpLCBnYW1lV29yZHMsIChzdHIpID0+IHJlc29sdmUoc3RyKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9taXNlO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBhbnN3ZXJSZXN1bHQucHVzaChyZXN1bHQpO1xyXG4gICAgICAgICAgICBpZiAoQXBpLmlzQXV0aG9yaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuYXVkaW9DYWxsTW9kZWwuc2F2ZVJlc3VsdFRvU2VydmVyKGdhbWVXb3Jkc1tpXSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQXBpLmlzQXV0aG9yaXplZCgpKSB7XHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5hdWRpb0NhbGxNb2RlbC5zYXZlUmlnaHRTZXF1ZW5jZVRvU3RhdGlzdGljcyhhbnN3ZXJSZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgR2FtZVJlc3VsdFBhZ2UodGhpcy5wYXJlbnQsIGdhbWVXb3JkcywgYW5zd2VyUmVzdWx0LCAoKSA9PiB0aGlzLmV4aXRHYW1lKCkpO1xyXG4gICAgfVxyXG4gICAgZXhpdEdhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9ICcnO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGJhc2VVcmwgfSBmcm9tICcuLi8uLi8uLi9iYXNpYyc7XHJcbmltcG9ydCBCdXJnZXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9CdXJnZXIvQnVyZ2VyJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9CdXR0b24nO1xyXG5pbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9DcmVhdG9yJztcclxuaW1wb3J0ICcuL2dhbWVwYWdlLnNjc3MnO1xyXG5jb25zdCBBTlNXRVJfQlVUVE9OUyA9IDU7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1ZGlvQ2FsbEdhbWVQYWdlIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGN1ckluZGV4LCBnYW1lV29yZHMsIG9uTmV4dCkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgJ2RpdicsICdnYW1lcGFnZScpO1xyXG4gICAgICAgIHRoaXMub25OZXh0ID0gb25OZXh0O1xyXG4gICAgICAgIHRoaXMuYnRuTWFzcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYW5zd2VyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53b3JkID0gZ2FtZVdvcmRzW2N1ckluZGV4XTtcclxuICAgICAgICBuZXcgQnVyZ2VyKHBhcmVudCwgKCkgPT4gdGhpcy5kZXN0cm95KCkpO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzV25kID0gbmV3IENyZWF0b3IodGhpcy5ub2RlLCAnZGl2JywgJ2dhbWVwYWdlX19wcm9ncmVzcy13aW5kb3cnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVXb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gbmV3IENyZWF0b3IocHJvZ3Jlc3NXbmQubm9kZSwgJ2RpdicsICdnYW1lcGFnZV9fcHJvZ3Jlc3MtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoaSA8PSBjdXJJbmRleClcclxuICAgICAgICAgICAgICAgIGl0ZW0ubm9kZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzIwMjAyMCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXVkaW9XaW5kb3cgPSBuZXcgQ3JlYXRvcih0aGlzLm5vZGUsICdkaXYnLCAnZ2FtZXBhZ2VfX2F1ZGlvLXdpbmRvdycpO1xyXG4gICAgICAgIHRoaXMuYnRuUGxheSA9IG5ldyBCdXR0b24odGhpcy5hdWRpb1dpbmRvdy5ub2RlLCAnZ2FtZXBhZ2VfX3BsYXknLCAnJywgKCkgPT4gdGhpcy5wbGF5V29yZCgpKTtcclxuICAgICAgICB0aGlzLmF1ZGlvID0gbmV3IEF1ZGlvKGAke2Jhc2VVcmx9LyR7dGhpcy53b3JkLmF1ZGlvfWApO1xyXG4gICAgICAgIHRoaXMuYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHRoaXMucGxheVdvcmQoKTtcclxuICAgICAgICBjb25zdCBidG5XcmFwcGVyMSA9IG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdnYW1lcGFnZV9fYnRuLXdyYXBwZXInKTtcclxuICAgICAgICBjb25zdCBhbnN3ZXJzTnVtID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVNlcXVlbmNlKEFOU1dFUl9CVVRUT05TIC0gMSwgZ2FtZVdvcmRzLmxlbmd0aCwgY3VySW5kZXgpO1xyXG4gICAgICAgIGFuc3dlcnNOdW0ucHVzaChjdXJJbmRleCk7XHJcbiAgICAgICAgdGhpcy5hbnN3ZXJzID0gYW5zd2Vyc051bS5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpLm1hcCgobnVtKSA9PiBnYW1lV29yZHNbbnVtXS53b3JkVHJhbnNsYXRlKTtcclxuICAgICAgICB0aGlzLmFuc3dlcnMuZm9yRWFjaCgoYnRuVGV4dCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5idG5NYXNzLnB1c2gobmV3IEJ1dHRvbihidG5XcmFwcGVyMS5ub2RlLCAnZ2FtZXBhZ2VfX2Fuc3dlcicsIGAke2luZGV4ICsgMX0uICR7YnRuVGV4dH1gLCAoKSA9PiB0aGlzLm9uQW5zd2VyKGluZGV4KSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGJ0bldyYXBwZXIyID0gbmV3IENyZWF0b3IodGhpcy5ub2RlLCAnZGl2JywgJ2dhbWVwYWdlX19idG4td3JhcHBlcicpO1xyXG4gICAgICAgIHRoaXMuYnRuTmV4dCA9IG5ldyBCdXR0b24oYnRuV3JhcHBlcjIubm9kZSwgJ2dhbWVwYWdlX19uZXh0JywgJ05leHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQW5zd2VyZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmV4dCh0aGlzLmFuc3dlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5rZXlIYW5kbGVyQmluZCA9IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5SGFuZGxlckJpbmQpO1xyXG4gICAgICAgIHRoaXMuaXNBbnN3ZXJlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBLZXlib2FyZEV2ZW50INC00LvRjyDQstGL0LHQvtGA0LAg0YEg0LrQu9Cw0LLQuNCw0YLRg9GA0YtcclxuICAgICAqIEBwYXJhbSBlINCh0L7QsdGL0YLQuNC1IEtleWJvYXJkRXZlbnRcclxuICAgICAqL1xyXG4gICAga2V5SGFuZGxlcihlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID4gJzAnICYmIGUua2V5IDw9IGAke0FOU1dFUl9CVVRUT05TfWApIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFuc3dlcihwYXJzZUludChlLmtleSkgLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHRoaXMuaXNBbnN3ZXJlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmV4dCh0aGlzLmFuc3dlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleUhhbmRsZXJCaW5kKTtcclxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XHJcbiAgICB9XHJcbiAgICBvbkFuc3dlcihpbmRleCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQW5zd2VyZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmlzQW5zd2VyZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYW5zd2VyID0gdGhpcy5hbnN3ZXJzW2luZGV4XSA9PT0gdGhpcy53b3JkLndvcmRUcmFuc2xhdGU7XHJcbiAgICAgICAgdGhpcy5idG5NYXNzW2luZGV4XS5ub2RlLmNsYXNzTGlzdC5hZGQodGhpcy5hbnN3ZXIgPyAnYW5zd2VyX3JpZ2h0JyA6ICdhbnN3ZXJfd3JvbmcnKTtcclxuICAgICAgICB0aGlzLmJ0blBsYXkuZGVzdHJveSgpO1xyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBDcmVhdG9yKHRoaXMuYXVkaW9XaW5kb3cubm9kZSwgJ2ltZycsICdhdWRpby13aW5kb3dfX2ltZycpO1xyXG4gICAgICAgIGltZy5ub2RlLnNyYyA9IGAke2Jhc2VVcmx9LyR7dGhpcy53b3JkLmltYWdlfWA7XHJcbiAgICAgICAgaW1nLm5vZGUuYWx0ID0gYCR7dGhpcy53b3JkLndvcmR9YDtcclxuICAgICAgICBjb25zdCByaWdodFduZCA9IG5ldyBDcmVhdG9yKHRoaXMuYXVkaW9XaW5kb3cubm9kZSwgJ2RpdicsICdhdWRpby13aW5kb3dfX3JpZ2h0LWJveCcpO1xyXG4gICAgICAgIG5ldyBCdXR0b24ocmlnaHRXbmQubm9kZSwgJ2F1ZGlvLXdpbmRvd19fcGxheScsICcnLCAoKSA9PiB0aGlzLnBsYXlXb3JkKCkpO1xyXG4gICAgICAgIG5ldyBDcmVhdG9yKHJpZ2h0V25kLm5vZGUsICdzcGFuJywgJycsIHRoaXMud29yZC53b3JkKTtcclxuICAgICAgICBuZXcgQ3JlYXRvcihyaWdodFduZC5ub2RlLCAnc3BhbicsICdhdWRpby13aW5kb3dfX3RyYXNjcmlwdCcsIHRoaXMud29yZC50cmFuc2NyaXB0aW9uKTtcclxuICAgICAgICBuZXcgQ3JlYXRvcihyaWdodFduZC5ub2RlLCAnc3BhbicsICcnLCBgIC0gJHt0aGlzLndvcmQud29yZFRyYW5zbGF0ZX1gKTtcclxuICAgICAgICBuZXcgQ3JlYXRvcihyaWdodFduZC5ub2RlLCAnZGl2JywgJ2F1ZGlvLXdpbmRvd19fdGV4dCcsIHRoaXMud29yZC50ZXh0RXhhbXBsZSk7XHJcbiAgICAgICAgbmV3IENyZWF0b3IocmlnaHRXbmQubm9kZSwgJ2RpdicsICdhdWRpby13aW5kb3dfX3RleHQnLCB0aGlzLndvcmQudGV4dEV4YW1wbGVUcmFuc2xhdGUpO1xyXG4gICAgfVxyXG4gICAgcGxheVdvcmQoKSB7XHJcbiAgICAgICAgdm9pZCB0aGlzLmF1ZGlvLnBsYXkoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQu9GD0YfQsNC50L3QvtC1INGH0LjRgdC70L4sINC90LUg0LHQvtC70YzRiNC1IG1heEludFxyXG4gICAgICogQHBhcmFtIG1heEludCDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0YfQuNGB0LvQvlxyXG4gICAgICogQHJldHVybnMg0KHQu9GD0YfQsNC50L3QvtC1INGH0LjRgdC70LUg0L3QtSDQsdC+0LvRjNGI0LUgbWF4SW50XHJcbiAgICAgKi9cclxuICAgIGdldFJhbmRvbUludChtYXhJbnQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4SW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0LzQsNGB0YHQuNCyINGB0LvRg9GH0LDQudC90YvRhSDRh9C40YHQtdC7XHJcbiAgICAgKiBAcGFyYW0gYW1vdW50INCa0L7Qu9C40YfQtdGB0YLQstC+INGH0LjRgdC10Lsg0LIg0LzQsNGB0YHQuNCy0LVcclxuICAgICAqIEBwYXJhbSBtYXhOdW1iZXIg0JzQsNC60YHQuNC80LDQu9GM0L3QvtC1INGH0LjRgdC70L5cclxuICAgICAqIEBwYXJhbSBleGNsdWRlINCY0YHQutC70Y7Rh9C40YLRjCDRh9C40YHQu9C+XHJcbiAgICAgKiBAcmV0dXJucyDQnNCw0YHRgdC40LIg0YHQu9GD0YfQsNC50L3Ri9GFINGH0LjRgdC10LtcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVSYW5kb21TZXF1ZW5jZShhbW91bnQsIG1heE51bWJlciwgZXhjbHVkZSkge1xyXG4gICAgICAgIGNvbnN0IG1hc3MgPSBbXTtcclxuICAgICAgICB3aGlsZSAobWFzcy5sZW5ndGggPCBhbW91bnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2V0UmFuZG9tSW50KG1heE51bWJlcik7XHJcbiAgICAgICAgICAgIGlmIChuID09PSBleGNsdWRlIHx8IG1hc3MuaW5jbHVkZXMobikpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgbWFzcy5wdXNoKG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFzcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0J1dHRvbic7XHJcbmltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0NyZWF0b3InO1xyXG5pbXBvcnQgeyBHUk9VUF9BTU9VTlQgfSBmcm9tICcuLi8uLi8uLi9iYXNpYy9jb21tb24vY29uc3RhbnRzJztcclxuaW1wb3J0ICcuL3J1bGVzLnNjc3MnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdWRpb0NhbGxSdWxlcyBleHRlbmRzIENyZWF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBmcm9tQm9vayA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCAnZGl2JywgJ3J1bGVzJyk7XHJcbiAgICAgICAgY29uc3Qgd25kID0gbmV3IENyZWF0b3IodGhpcy5ub2RlLCAnZGl2JywgJ3J1bGVzX193aW5kb3cnLCBgXHJcbiAgICAgICAgPGgyIGNsYXNzPVwicnVsZXNfX3RpdGxlXCI+0J/RgNCw0LLQuNC70LAg0LjQs9GA0YsgXCLQkNGD0LTQuNC+0LLRi9C30L7QslwiPC9oMj5cclxuICAgICAgICA8cCBjbGFzcz1cInJ1bGVzX19ydWxlc1wiPtCY0LPRgNCwIFwi0JDRg9C00LjQvtCy0YvQt9C+0LJcIiDQv9C+0LfQstC+0LvRj9C10YIg0YPQu9GD0YfRiNC40YLRjCDQstC+0YHQv9GA0LjRj9GC0LjQtSDRgdC70L7QsiDQvdCwINGB0LvRg9GFLjwvcD5cclxuICAgICAgICA8cCBjbGFzcz1cInJ1bGVzX19ydWxlc1wiPtCS0Ysg0LTQvtC70LbQvdGLINCy0YvQsdGA0LDRgtGMINC/0LXRgNC10LLQvtC0INGD0YHQu9GL0YjQsNC90L3QvtCz0L4g0YHQu9C+0LLQsC48L3A+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJydWxlc19fcnVsZXNcIj7Qo9C/0YDQsNCy0LvRj9GC0Ywg0LzQvtC20L3QviDQutC90L7Qv9C60LDQvNC4IDEgLSA1INCy0YvQsdC+0YAsIEVudGVyIC0g0YHQu9C10LTRg9GJ0LjQuTwvcD5cclxuICAgICAgYCk7XHJcbiAgICAgICAgY29uc3QgYnRuV3JhcHBlciA9IG5ldyBDcmVhdG9yKHduZC5ub2RlLCAnZGl2JywgJ3J1bGVzX19idG4td3JhcHBlcicpO1xyXG4gICAgICAgIGlmIChmcm9tQm9vaykge1xyXG4gICAgICAgICAgICBuZXcgQnV0dG9uKGJ0bldyYXBwZXIubm9kZSwgJ3J1bGVzX19idXR0b24nLCAnT2snLCAoKSA9PiB0aGlzLm9uQ2xpY2soLTEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGJ0bldyYXBwZXIubm9kZS5pbm5lckhUTUwgKz0gJzxwIGNsYXNzPVwicnVsZXNfX3J1bGVzXCI+0JLRi9Cx0LXRgNC40YLQtSDQs9GA0YPQv9C/0YMg0YHQu9C+0LbQvdC+0YHRgtC4OjwvcD4nO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBHUk9VUF9BTU9VTlQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnRuID0gbmV3IEJ1dHRvbihidG5XcmFwcGVyLm5vZGUsICdydWxlc19fYnV0dG9uJywgYCR7aX1gLCAoKSA9PiB0aGlzLm9uQ2xpY2soaSkpO1xyXG4gICAgICAgICAgICAgICAgYnRuLm5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5nZXRDb2xvckZyb21OdW1iZXIoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5rZXlIYW5kbGVyQmluZCA9IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5SGFuZGxlckJpbmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBLZXlib2FyZEV2ZW50INC00LvRjyDQstGL0LHQvtGA0LAg0YEg0LrQu9Cw0LLQuNCw0YLRg9GA0YtcclxuICAgICAqIEBwYXJhbSBlINCh0L7QsdGL0YLQuNC1IEtleWJvYXJkRXZlbnRcclxuICAgICAqL1xyXG4gICAga2V5SGFuZGxlcihlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID4gJzAnICYmIGUua2V5IDw9IGAke0dST1VQX0FNT1VOVH1gKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGljayhwYXJzZUludChlLmtleSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXlIYW5kbGVyQmluZCk7XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29sb3JGcm9tTnVtYmVyKG51bSkge1xyXG4gICAgICAgIGxldCBzdHIgPSAnIyc7XHJcbiAgICAgICAgc3RyICs9IG51bSAmIDEgPyAnZmYnIDogJzAwJztcclxuICAgICAgICBzdHIgKz0gbnVtICYgMiA/ICdmZicgOiAnMDAnO1xyXG4gICAgICAgIHN0ciArPSBudW0gJiA0ID8gJ2ZmJyA6ICcwMCc7XHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL0F1ZGlvQ2FsbCc7XHJcbiIsImltcG9ydCB7IEFwaSB9IGZyb20gJy4uLy4uL2Jhc2ljL2FwaSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dGhQYWdlTW9kZWwge1xyXG4gICAgLyoqXHJcbiAgICAgKiDQn9GA0L7QuNC30LLQvtC00LjRgiDRgNC10LPQuNGB0YLRgNCw0YbQuNGOINC90L7QstC+0LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqIEBwYXJhbSBuYW1lINCY0LzRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqIEBwYXJhbSBlbWFpbCDQtS3QvNC10LnQuyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCDQn9Cw0YDQvtC70Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgKiBAcmV0dXJucyDQlNCw0L3QvdGL0LUg0L4g0YDQtdCz0LjRgdGC0YDQsNGG0LjQuCDQuNC70Lgg0L7RiNC40LHQutGDXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlZ2lzdGVyTmV3VXNlcihuYW1lLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gQXBpLmNyZWF0ZU5ld1VzZXIoeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCf0YDQvtC40LfQstC+0LTQuNGCINC70L7Qs9C40L0g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgKiBAcGFyYW0gZW1haWwg0JvQvtCz0LjQvSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCDQn9Cw0YDQvtC70Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgKiBAcmV0dXJucyDQotC+0LrQtdC9INC70L7Qs9C40L3QsCDQuNC70Lgg0L7RiNC40LHQutCwXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gQXBpLmxvZ2luVXNlcih7IGVtYWlsLCBwYXNzd29yZCB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JfQsNC/0LjRgdGL0LLQsNGCINGC0L7QutC10L0g0Lgg0JjQlCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0LTQu9GPINC00LDQu9GM0L3QtdC50YjQuNGFINC30LDQv9GA0L7RgdC+0LJcclxuICAgICAqIEBwYXJhbSByZXNwb25zZSDQotC+0LrQtdC9INC70L7Qs9C40L3QsCDQuCDQmNCUXHJcbiAgICAgKi9cclxuICAgIHNldEF1dGhEYXRhKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgQXBpLnNldEF1dGhEYXRhKHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQXV0aFBhZ2VNb2RlbCBmcm9tICcuL0F1dGhQYWdlLm1vZGVsJztcclxuaW1wb3J0IEF1dGhQYWdlVmlldyBmcm9tICcuL0F1dGhQYWdlLnZpZXcnO1xyXG5pbXBvcnQgeyBFUmVnaXN0ZXJCdXR0b25UZXh0IH0gZnJvbSAnLi4vLi4vYmFzaWMvZW51bXMvZW51bXMnO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmNvbnN0IFRPS0VOX1dPUktfVElNRSA9IDQ7IC8v0YfQsNGB0LBcclxuZXhwb3J0IGNsYXNzIEF1dGhQYWdlIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIGlmICh0eXBlb2YgQXV0aFBhZ2UuaW5zdGFuY2UgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICByZXR1cm4gQXV0aFBhZ2UuaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5hdXRoUGFnZU1vZGVsID0gbmV3IEF1dGhQYWdlTW9kZWwoKTtcclxuICAgICAgICB0aGlzLmF1dGhQYWdlVmlldyA9IG5ldyBBdXRoUGFnZVZpZXcodGhpcy5wYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFBhZ2VWaWV3Lm9uQ2xpY2sgPSAodGV4dCkgPT4gdGhpcy5vbkNsaWNrKHRleHQpO1xyXG4gICAgICAgIEF1dGhQYWdlLmluc3RhbmNlID0gdGhpcztcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLmF1dGhQYWdlVmlldy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0LrQvdC+0L/QutC4INGA0LXQs9C40YHRgtGA0LDRhtC40Lgg0LjQu9C4INC70L7Qs9C40L3QsFxyXG4gICAgICogQHBhcmFtIHRleHQg0KHRgtGA0L7QutCwINC90LDQttCw0YLQvtC5INC60L3QvtC/0LrQuFxyXG4gICAgICovXHJcbiAgICBvbkNsaWNrKHRleHQpIHtcclxuICAgICAgICBjb25zdCBbbmFtZSwgbG9naW4sIHBhc3N3b3JkXSA9IHRoaXMuYXV0aFBhZ2VWaWV3LmdldExvZ2luRGF0YSgpO1xyXG4gICAgICAgIGlmICh0ZXh0ID09PSBFUmVnaXN0ZXJCdXR0b25UZXh0LmNhbmNlbCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy50cnlMYXVuY2hFeGl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRleHQgPT09IEVSZWdpc3RlckJ1dHRvblRleHQubG9naW4pIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoUGFnZVZpZXcuc2V0TWVzc2FnZVRleHQoJ0xvZ2luaW5nIC4uLicsICdncmVlbicpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2luVXNlcihsb2dpbiwgcGFzc3dvcmQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdm9pZCB0aGlzLmF1dGhQYWdlTW9kZWwucmVnaXN0ZXJOZXdVc2VyKG5hbWUsIGxvZ2luLCBwYXNzd29yZCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICgnZXJyb3JNZXNzYWdlJyBpbiByZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aFBhZ2VWaWV3LnNldE1lc3NhZ2VUZXh0KHJlc3BvbnNlLmVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2luVXNlcihsb2dpbiwgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCf0YDQvtC40LfQstC+0LTQuNGCINC70L7Qs9C40L0g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLiDQkiDRgdC70YPRh9Cw0LUg0YPRgdC/0LXRhdCwINC30LDQutGA0YvQstCw0LXRgiDQvtC60L3QvlxyXG4gICAgICogQHBhcmFtIGxvZ2luINCb0L7Qs9C40L1cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCDQn9Cw0YDQvtC70YxcclxuICAgICAqL1xyXG4gICAgbG9naW5Vc2VyKGxvZ2luLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHZvaWQgdGhpcy5hdXRoUGFnZU1vZGVsLmxvZ2luVXNlcihsb2dpbiwgcGFzc3dvcmQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgnZXJyb3JNZXNzYWdlJyBpbiByZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoUGFnZVZpZXcuc2V0TWVzc2FnZVRleHQocmVzcG9uc2UuZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFBhZ2VNb2RlbC5zZXRBdXRoRGF0YShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVBdXRoVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cnlMYXVuY2hFeGl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KPQtNCw0LvRj9C10YIg0L7QutC90L4g0LjQtyBET01cclxuICAgICAqL1xyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmF1dGhQYWdlVmlldy5kZXN0cm95KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCk0YPQvdC60YbQuNGPINC30LDQv9GD0YHQutCw0LXRgiDQv9C10YDQtdC00LDQvdC90YPRjiDRhNGD0L3QutGG0LjRjiDQv9C10YDQtdC0INCy0YvRhdC+0LTQvtC8XHJcbiAgICAgKi9cclxuICAgIHRyeUxhdW5jaEV4aXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25FeGl0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkV4aXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzYXZlQXV0aFRvTG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBBcGkuZ2V0QXV0aFRva2VuKCk7XHJcbiAgICAgICAgaWYgKGF1dGggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXV0aC50aW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JzbGFuZy1hdXRoJywgSlNPTi5zdHJpbmdpZnkoYXV0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlc3RvcmVBdXRoRnJvbUxvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBjb25zdCBzdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncnNsYW5nLWF1dGgnKTtcclxuICAgICAgICBpZiAoIXN0cilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGggPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgICAgICAgIGlmICghYXV0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCFhdXRoLnVzZXJJZCB8fCB0eXBlb2YgYXV0aC51c2VySWQgIT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIWF1dGgudG9rZW4gfHwgdHlwZW9mIGF1dGgudG9rZW4gIT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIWF1dGgucmVmcmVzaFRva2VuIHx8IHR5cGVvZiBhdXRoLnJlZnJlc2hUb2tlbiAhPT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghYXV0aC50aW1lIHx8IHR5cGVvZiBhdXRoLnRpbWUgIT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lUGFzdCA9IChEYXRlLm5vdygpIC0gYXV0aC50aW1lKSAvIDYwIC8gNjAgLyAxMDAwOyAvLyDQsiDRh9Cw0YHQsNGFXHJcbiAgICAgICAgICAgIGlmICh0aW1lUGFzdCA8IFRPS0VOX1dPUktfVElNRSkge1xyXG4gICAgICAgICAgICAgICAgQXBpLnNldEF1dGhEYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogYXV0aC50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IGF1dGgucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYXV0aC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICB9LCBhdXRoLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2gge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNBdXRob3JpemVkKCkge1xyXG4gICAgICAgIGlmIChBcGkuaXNBdXRob3JpemVkKCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3RvcmVBdXRoRnJvbUxvY2FsU3RvcmFnZSgpKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB1bmxvZ2luVXNlcigpIHtcclxuICAgICAgICBBcGkudW5sb2dpblVzZXIoKTtcclxuICAgICAgICB0aGlzLmNsZWFyQXV0aEluTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9XHJcbiAgICBjbGVhckF1dGhJbkxvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncnNsYW5nLWF1dGgnKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9DcmVhdG9yJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9CdXR0b24nO1xyXG5pbXBvcnQgTGFiZWxJbnB1dCBmcm9tICcuL0xhYmVsSW5wdXQnO1xyXG5pbXBvcnQgJy4vcmVnaXN0ZXIuc2Nzcyc7XHJcbmltcG9ydCB7IEVSZWdpc3RlckJ1dHRvblRleHQgfSBmcm9tICcuLi8uLi9iYXNpYy9lbnVtcy9lbnVtcyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dGhQYWdlVmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLmxvZ2luU3RhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHRoaXMubG9naW5TdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY3JlZW4gPSBuZXcgQ3JlYXRvcih0aGlzLnBhcmVudCwgJ2RpdicsICdyZWdpc3RlcicpO1xyXG4gICAgICAgIHRoaXMud25kID0gbmV3IENyZWF0b3IodGhpcy5zY3JlZW4ubm9kZSwgJ2RpdicsICdyZWdpc3Rlcl9fd2luZG93Jyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmV3IExhYmVsSW5wdXQodGhpcy53bmQubm9kZSwgJ05hbWUnKTtcclxuICAgICAgICB0aGlzLm5hbWUuc2hvd0lucHV0KCF0aGlzLmxvZ2luU3RhdGUpO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSBuZXcgTGFiZWxJbnB1dCh0aGlzLnduZC5ub2RlLCAnRS1NYWlsJyk7XHJcbiAgICAgICAgdGhpcy5lbWFpbC5zZXRJbnB1dFR5cGUoJ2VtYWlsJyk7XHJcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IG5ldyBMYWJlbElucHV0KHRoaXMud25kLm5vZGUsICdQYXNzd29yZCcpO1xyXG4gICAgICAgIHRoaXMucGFzc3dvcmQuc2V0SW5wdXRUeXBlKCdwYXNzd29yZCcpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG5ldyBDcmVhdG9yKHRoaXMud25kLm5vZGUsICdkaXYnLCAncmVnaXN0ZXJfX21lc3NhZ2UnKTtcclxuICAgICAgICB0aGlzLmJ0blN3aXRjaCA9IG5ldyBCdXR0b24odGhpcy53bmQubm9kZSwgJ3JlZ2lzdGVyX19idXR0b25fc3dpdGNoJywgJ3JlZ2lzdGVyJywgKCkgPT4gdGhpcy5vblN3aXRjaCgpKTtcclxuICAgICAgICB0aGlzLmJ0bkxvZ2luID0gbmV3IEJ1dHRvbih0aGlzLnduZC5ub2RlLCAncmVnaXN0ZXJfX2J1dHRvbicsIEVSZWdpc3RlckJ1dHRvblRleHQubG9naW4sICh0ZXh0KSA9PiB0aGlzLmNoZWNrRmllbGRzKHRleHQpKTtcclxuICAgICAgICB0aGlzLmJ0bkxvZ2luLm5vZGUuc3R5bGUuZGlzcGxheSA9IHRoaXMubG9naW5TdGF0ZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuYnRuUGFzc3dvcmQgPSBuZXcgQnV0dG9uKHRoaXMud25kLm5vZGUsICdyZWdpc3Rlcl9fYnV0dG9uJywgRVJlZ2lzdGVyQnV0dG9uVGV4dC5yZWdpc3RlciwgKHRleHQpID0+IHRoaXMuY2hlY2tGaWVsZHModGV4dCkpO1xyXG4gICAgICAgIHRoaXMuYnRuUGFzc3dvcmQubm9kZS5zdHlsZS5kaXNwbGF5ID0gIXRoaXMubG9naW5TdGF0ZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuYnRuQ2FuY2VsID0gbmV3IEJ1dHRvbih0aGlzLnduZC5ub2RlLCAncmVnaXN0ZXJfX2J1dHRvbicsIEVSZWdpc3RlckJ1dHRvblRleHQuY2FuY2VsLCAodGV4dCkgPT4gdGhpcy5jaGVja0ZpZWxkcyh0ZXh0KSk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiAodGhpcy5zY3JlZW4ubm9kZS5zdHlsZS5vcGFjaXR5ID0gJzEnKSwgMCk7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZEhhbmRsZXJUaGlzID0gdGhpcy5rZXlib2FyZEhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleWJvYXJkSGFuZGxlclRoaXMpO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnNjcmVlbi5ub2RlLnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnNjcmVlbi5kZXN0cm95KCksIDUwMCk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXlib2FyZEhhbmRsZXJUaGlzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J/QvtC70YPRh9Cw0LXRgiDQuNC3INGE0L7RgNC80Ysg0LjQvNGPLCDQu9C+0LPQuNC9INC4INC/0LDRgNC+0LvRjFxyXG4gICAgICogQHJldHVybnMg0JjQvNGPLCDQu9C+0LPQuNC9INC4INC/0LDRgNC+0LvRjFxyXG4gICAgICovXHJcbiAgICBnZXRMb2dpbkRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLm5hbWUuZ2V0VmFsdWUoKS50cmltKCksIHRoaXMuZW1haWwuZ2V0VmFsdWUoKS50cmltKCksIHRoaXMucGFzc3dvcmQuZ2V0VmFsdWUoKS50cmltKCldO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQktGL0LLQvtC00LjRgiDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcclxuICAgICAqIEBwYXJhbSB0ZXh0INCi0LXQutGB0YIg0LTQu9GPINCy0YvQstC+0LTQsFxyXG4gICAgICovXHJcbiAgICBzZXRNZXNzYWdlVGV4dCh0ZXh0LCBjb2xvcikge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5ub2RlLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICB0aGlzLm1lc3NhZ2Uubm9kZS5zdHlsZS5jb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJztcclxuICAgIH1cclxuICAgIG9uU3dpdGNoKCkge1xyXG4gICAgICAgIHRoaXMubG9naW5TdGF0ZSA9ICF0aGlzLmxvZ2luU3RhdGU7XHJcbiAgICAgICAgdGhpcy5uYW1lLnNob3dJbnB1dCghdGhpcy5sb2dpblN0YXRlKTtcclxuICAgICAgICB0aGlzLmJ0bkxvZ2luLm5vZGUuc3R5bGUuZGlzcGxheSA9IHRoaXMubG9naW5TdGF0ZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuYnRuUGFzc3dvcmQubm9kZS5zdHlsZS5kaXNwbGF5ID0gIXRoaXMubG9naW5TdGF0ZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuYnRuU3dpdGNoLm5vZGUudGV4dENvbnRlbnQgPSB0aGlzLmxvZ2luU3RhdGUgPyAncmVnaXN0ZXInIDogJ2xvZ2luJztcclxuICAgIH1cclxuICAgIGNoZWNrRmllbGRzKHRleHQpIHtcclxuICAgICAgICBpZiAodGV4dCAhPT0gRVJlZ2lzdGVyQnV0dG9uVGV4dC5jYW5jZWwpIHtcclxuICAgICAgICAgICAgY29uc3QgW25hbWUsIGVtYWlsLCBwYXNzd29yZF0gPSB0aGlzLmdldExvZ2luRGF0YSgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9naW5TdGF0ZSAmJiAhL15cXHcrJC8udGVzdChuYW1lKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldE1lc3NhZ2VUZXh0KCfQkiDQuNC80LXQvdC4INC40YHQv9C+0LvRjNC30L7QstCw0L3RiyDQvdC10LTQvtC/0YPRgdGC0LjQvNGL0LUg0YHQuNC80LLQvtC70YsnKTtcclxuICAgICAgICAgICAgaWYgKCEvXiguKylAKFxcUyspJC8udGVzdChlbWFpbCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRNZXNzYWdlVGV4dCgn0J3QtSDQv9GA0LDQstC40LvRjNC90YvQuSBlLW1haWwnKTtcclxuICAgICAgICAgICAgaWYgKCEvW0EtWmEtejAtOV0rLy50ZXN0KHBhc3N3b3JkKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldE1lc3NhZ2VUZXh0KCfQlNC70Y8g0L/QsNGA0L7Qu9GPINC00L7Qv9GD0YHRgtC40LzRiyDQu9Cw0YLQuNC90YHQutC40LUg0YHQuNC80LLQvtC70Ysg0Lgg0YbQuNGE0YDRiycpO1xyXG4gICAgICAgICAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldE1lc3NhZ2VUZXh0KCfQlNC70LjQvdCwINC/0LDRgNC+0LvRjyDQtNC+0LvQttC90LAg0LHRi9GC0Ywg0L3QtSDQvNC10L3QtdC1IDgg0YHQuNC80LLQvtC70L7QsicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uQ2xpY2sodGV4dCk7XHJcbiAgICB9XHJcbiAgICBrZXlib2FyZEhhbmRsZXIoZSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJylcclxuICAgICAgICAgICAgdGhpcy5jaGVja0ZpZWxkcyh0aGlzLmxvZ2luU3RhdGUgPyBFUmVnaXN0ZXJCdXR0b25UZXh0LmxvZ2luIDogRVJlZ2lzdGVyQnV0dG9uVGV4dC5yZWdpc3Rlcik7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJylcclxuICAgICAgICAgICAgdGhpcy5vbkNsaWNrKEVSZWdpc3RlckJ1dHRvblRleHQuY2FuY2VsKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ3JlYXRvciB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ3JlYXRvcic7XHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9JbnB1dCc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhYmVsSW5wdXQge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy53bmQgPSBuZXcgQ3JlYXRvcihwYXJlbnQsICdkaXYnLCAnaW5wdXRfX3dyYXBwZXInKTtcclxuICAgICAgICB0aGlzLnNwYW4gPSBuZXcgQ3JlYXRvcih0aGlzLnduZC5ub2RlLCAnc3BhbicsICdpbnB1dF9fc3BhbicsIG5hbWUpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSBuZXcgSW5wdXQodGhpcy53bmQubm9kZSwgJ2lucHV0X19pbnB1dCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQn9C+0LvRg9GH0LDQtdGCINC30L3QsNGH0LXQvdC40LUg0L/QvtC70Y8g0LjQvdC/0YPRgtCwXHJcbiAgICAgKiBAcmV0dXJucyDQotC10LrRgdGCINCyINC/0L7Qu9C1INC40L3Qv9GD0YLQsFxyXG4gICAgICovXHJcbiAgICBnZXRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC5nZXRWYWx1ZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDRgtC40L8g0LjQvdC/0YPRgtCwINC+0YLQu9C40YfQvdGL0Lkg0L7RgiB0eXBlPSd0ZXh0J1xyXG4gICAgICogQHBhcmFtIHR5cGUg0KLQuNC/INC40L3Qv9GD0YLQsFxyXG4gICAgICovXHJcbiAgICBzZXRJbnB1dFR5cGUodHlwZSkge1xyXG4gICAgICAgIHRoaXMuaW5wdXQubm9kZS50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIHNob3dJbnB1dChzaG93KSB7XHJcbiAgICAgICAgdGhpcy53bmQubm9kZS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9BdXRoUGFnZSc7XHJcbiIsImltcG9ydCB7IGJhc2VVcmwgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IEJ1dHRvbiwgQ3JlYXRvciB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgJy4vcmVzdWx0LnNjc3MnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lUmVzdWx0UGFnZSBleHRlbmRzIENyZWF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBnYW1lV29yZHMsIGdhbWVSZXN1bHQsIG9uRXhpdCkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgJ2RpdicsICdyZXN1bHQnLCBgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBjbGFzcz1cInJlc3VsdF9fcmFkaW9cIiBuYW1lPVwicmFkaW9cIiBpZD1cInJhZGlvMVwiIGNoZWNrZWQ+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwicmVzdWx0X19yYWRpb1wiIG5hbWU9XCJyYWRpb1wiIGlkPVwicmFkaW8yXCI+YCk7XHJcbiAgICAgICAgY29uc3QgcmlnaHRBbnN3ZXJzID0gZ2FtZVJlc3VsdC5maWx0ZXIoKGVsKSA9PiBlbCkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHduZCA9IG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdyZXN1bHRfX21haW4td2luZG93Jyk7XHJcbiAgICAgICAgLy8g0JvQtdCy0L7QtSDQvtC60L3QvlxyXG4gICAgICAgIGNvbnN0IHduZExlZnQgPSBuZXcgQ3JlYXRvcih3bmQubm9kZSwgJ2RpdicsICdyZXN1bHRfX3dpbmRvdy1sZWZ0JywgYCA8ZGl2IGNsYXNzPVwicmVzdWx0X193b3JkX21pZGRsZVwiPjxkaXYgY2xhc3M9XCJyZXN1bHRfX3Jlc3VsdC1zaWduIHJlc3VsdC1zaWduX3JpZ2h0XCI+PC9kaXY+XHJcbiAgICAgICAgICA8c3Bhbj7Qn9GA0LDQstC40LvRjNC90YvRhSDQvtGC0LLQtdGC0L7QsjogJHtyaWdodEFuc3dlcnN9PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRfX3dvcmRfbWlkZGxlXCI+PGRpdiBjbGFzcz1cInJlc3VsdF9fcmVzdWx0LXNpZ24gcmVzdWx0LXNpZ25fd3JvbmdcIj48L2Rpdj5cclxuICAgICAgICAgIDxzcGFuPtCd0LXQv9GA0LDQstC40LvRjNC90YvRhSDQvtGC0LLQtdGC0L7QsjogJHtnYW1lUmVzdWx0Lmxlbmd0aCAtIHJpZ2h0QW5zd2Vyc308L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgPGJyPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRfX3dvcmRfbWlkZGxlXCI+0JLQsNGIINGA0LXQt9GD0LvRjNGC0LDRgjogJHtNYXRoLnJvdW5kKChyaWdodEFuc3dlcnMgKiAxMDApIC8gZ2FtZVJlc3VsdC5sZW5ndGgpfSAlPC9kaXY+YCk7XHJcbiAgICAgICAgY29uc3Qgc3ZnV3JhcHBlciA9IG5ldyBDcmVhdG9yKHduZExlZnQubm9kZSwgJ2RpdicsICdyZXN1bHRfX3N2Zy13cmFwcGVyJyk7XHJcbiAgICAgICAgY29uc3QgZGlhZ3JhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XHJcbiAgICAgICAgZGlhZ3JhbS5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndmlld0JveCcsICcwIDAgMTAwIDEwMCcpO1xyXG4gICAgICAgIGRpYWdyYW0uc2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJywgJzIwMCcpO1xyXG4gICAgICAgIGRpYWdyYW0uc2V0QXR0cmlidXRlTlMobnVsbCwgJ2hlaWdodCcsICcyMDAnKTtcclxuICAgICAgICB0aGlzLmRyYXdQaWUoZGlhZ3JhbSwgcmlnaHRBbnN3ZXJzIC8gZ2FtZVJlc3VsdC5sZW5ndGgpO1xyXG4gICAgICAgIHN2Z1dyYXBwZXIubm9kZS5hcHBlbmQoZGlhZ3JhbSk7XHJcbiAgICAgICAgLy8g0J/RgNCw0LLQvtC1INC+0LrQvdC+XHJcbiAgICAgICAgY29uc3QgcmlnaHRXbmQgPSBuZXcgQ3JlYXRvcih3bmQubm9kZSwgJ2RpdicsICdyZXN1bHRfX3dpbmRvdy1yaWdodCcpO1xyXG4gICAgICAgIGNvbnN0IGZyYW1lID0gbmV3IENyZWF0b3IocmlnaHRXbmQubm9kZSwgJ2RpdicsICdyZXN1bHRfX2ZyYW1lJyk7XHJcbiAgICAgICAgZ2FtZVdvcmRzLmZvckVhY2goKHdvcmQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGAke2Jhc2VVcmx9LyR7d29yZC5hdWRpb31gKTtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IG5ldyBDcmVhdG9yKGZyYW1lLm5vZGUsICdkaXYnLCAncmVzdWx0X19saW5lJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBDcmVhdG9yKGxpbmUubm9kZSwgJ2RpdicsICdyZXN1bHRfX3Jlc3VsdC1zaWduJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ub2RlLmNsYXNzTGlzdC5hZGQoZ2FtZVJlc3VsdFtpbmRleF0gPyAncmVzdWx0LXNpZ25fcmlnaHQnIDogJ3Jlc3VsdC1zaWduX3dyb25nJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IG5ldyBCdXR0b24obGluZS5ub2RlLCAncmVzdWx0X19wbGF5JywgJycsICgpID0+IGF1ZGlvLnBsYXkoKSk7XHJcbiAgICAgICAgICAgIGJ0bi5ub2RlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJ0bi5ub2RlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5ldyBDcmVhdG9yKGxpbmUubm9kZSwgJ3NwYW4nLCAncmVzdWx0X193b3JkJywgd29yZC53b3JkKTtcclxuICAgICAgICAgICAgbmV3IENyZWF0b3IobGluZS5ub2RlLCAnc3BhbicsICdyZXN1bHRfX3RyYXNjcmlwdCcsIHdvcmQudHJhbnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIG5ldyBDcmVhdG9yKGxpbmUubm9kZSwgJ3NwYW4nLCAncmVzdWx0X193b3JkJywgYCAtICR7d29yZC53b3JkVHJhbnNsYXRlfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGxvd0JhciA9IG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdsb3ctYmFyJywgYDxkaXY+PC9kaXY+PGRpdiBjbGFzcz1cImxvdy1iYXJfX2xhYmVsLXdyYXBwZXJcIj5cclxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJyYWRpbzFcIiBjbGFzcz1cImxvdy1iYXJfX2xhYmVsXCI+PC9sYWJlbD5cclxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJyYWRpbzJcIiBjbGFzcz1cImxvdy1iYXJfX2xhYmVsXCI+PC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5gKTtcclxuICAgICAgICBuZXcgQnV0dG9uKGxvd0Jhci5ub2RlLCAncmVzdWx0X19leGl0JywgJ0V4aXQnLCAoKSA9PiBvbkV4aXQoKSk7XHJcbiAgICB9XHJcbiAgICBkcmF3UGllKGVsZW1lbnQsIGFuZ2xlKSB7XHJcbiAgICAgICAgY29uc3QgZHJTZWdtZW50ID0gZnVuY3Rpb24gKHN0eWxlLCBhbmdlMSwgYW5nZTIpIHtcclxuICAgICAgICAgICAgbGV0IGRpciA9ICcwJztcclxuICAgICAgICAgICAgaWYgKGFuZ2UyIC0gYW5nZTEgPiAwLjUpXHJcbiAgICAgICAgICAgICAgICBkaXIgPSAnMSc7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlMSA9IE1hdGguUEkgKiAyICogYW5nZTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlMiA9IE1hdGguUEkgKiAyICogYW5nZTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhZCA9IDQ1LCBjeCA9IDUwLCBjeSA9IDUwO1xyXG4gICAgICAgICAgICBjb25zdCBkeDEgPSBNYXRoLnNpbihhbmdsZTEpICogcmFkICsgY3g7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5MSA9IC1NYXRoLmNvcyhhbmdsZTEpICogcmFkICsgY3k7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4MiA9IE1hdGguc2luKGFuZ2xlMikgKiByYWQgKyBjeDtcclxuICAgICAgICAgICAgY29uc3QgZHkyID0gLU1hdGguY29zKGFuZ2xlMikgKiByYWQgKyBjeTtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3N0eWxlJywgc3R5bGUpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnZCcsIGBNICR7ZHgxfSwke2R5MX0gQSAke3JhZH0sJHtyYWR9IDAgJHtkaXJ9IDEgJHtkeDJ9LCR7ZHkyfSBMICR7Y3h9LCR7Y3l9IFpgKTtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoYW5nbGUgIT09IDApIHtcclxuICAgICAgICAgICAgZHJTZWdtZW50KCdmaWxsOmxpbWU7IHN0cm9rZTpibGFjazsgc3Ryb2tlLXdpZHRoOjM7JywgMCwgYW5nbGUpO1xyXG4gICAgICAgICAgICBkclNlZ21lbnQoJ2ZpbGw6cmVkOyBzdHJva2U6YmxhY2s7IHN0cm9rZS13aWR0aDozOycsIGFuZ2xlLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRyU2VnbWVudCgnZmlsbDpyZWQ7IHN0cm9rZTpibGFjazsgc3Ryb2tlLXdpZHRoOjM7JywgMCwgMC45OSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0NyZWF0b3InO1xyXG5pbXBvcnQgJy4vbG9hZGluZ3BhZ2Uuc2Nzcyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmdQYWdlIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsICdkaXYnLCAnbG9hZGluZycpO1xyXG4gICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nX190ZXh0XCI+TG9hZGluZy4uLjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZ19fb3V0ZXItYm94XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmdfX2lubmVyLWJveCBpbm5lci1ib3gxXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmdfX2lubmVyLWJveCBpbm5lci1ib3gyXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmdfX2lubmVyLWJveCBpbm5lci1ib3gzXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmdfX2lubmVyLWJveCBpbm5lci1ib3g0XCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBFVXNlcldvcmRTdGF0dXMgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uLy4uL2Jhc2ljL2FwaS9hcGknO1xyXG5jb25zdCBOT1JNQUxfRElGRklDVUxUWSA9IDM7XHJcbmNvbnN0IERJRkZJQ1VMVF9ESUZGSUNVTFRZID0gNTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mgc3ByaW50TW9kZWwge1xyXG4gICAgc2F2ZVJlc3VsdFRvU2VydmVyKHdvcmQsIGFuc3dlcikge1xyXG4gICAgICAgIHZvaWQgQXBpLmdldFVzZXJXb3JkKHdvcmQuaWQpLnRoZW4oKHdvcmRJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgnZGlmZmljdWx0eScgaW4gd29yZEluZm8pIHtcclxuICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC30LDQv9C40YHRjCDRg9C20LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIsINGC0L4g0LjRgdC/0YDQsNCy0LvRj9C10Lwg0Lgg0L7QsdC90L7QstC70Y/QtdC8XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgd29yZEluZm8uaWQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgd29yZEluZm8ud29yZElkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuc3dlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC/0YDQsNCy0LjQu9GM0L3Ri9C5INC+0YLQstC10YJcclxuICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5vcHRpb25hbC5zcHJpbnQucmlnaHQrKztcclxuICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5vcHRpb25hbC5zcHJpbnQubG9uZ1JpZ2h0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMubm9ybWFsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLnNwcmludC5sb25nUmlnaHQgPiBOT1JNQUxfRElGRklDVUxUWSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHdvcmRJbmZvLmRpZmZpY3VsdHkgPT09IEVVc2VyV29yZFN0YXR1cy5kaWZmaWN1bHQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLnNwcmludC5sb25nUmlnaHQgPiBESUZGSUNVTFRfRElGRklDVUxUWSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEluZm8uZGlmZmljdWx0eSA9IEVVc2VyV29yZFN0YXR1cy5zdHVkaWVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INC90LXQv9GA0LDQstC40LvRjNC90YvQuVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLnNwcmludC53cm9uZysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLm9wdGlvbmFsLnNwcmludC5sb25nUmlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMubm9ybWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRJbmZvLmRpZmZpY3VsdHkgPSBFVXNlcldvcmRTdGF0dXMuZGlmZmljdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh3b3JkSW5mby5kaWZmaWN1bHR5ID09PSBFVXNlcldvcmRTdGF0dXMuc3R1ZGllZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JkSW5mby5kaWZmaWN1bHR5ID0gRVVzZXJXb3JkU3RhdHVzLm5vcm1hbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2b2lkIEFwaS51cGRhdGVVc2VyV29yZCh3b3JkLmlkLCB3b3JkSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDQmNC90LDRh9C1INGB0L7Qt9C00LDQtdC8INC90L7QstGD0Y4g0LfQsNC/0LjRgdGMXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdXb3JkSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5OiBhbnN3ZXIgPyBFVXNlcldvcmRTdGF0dXMubm9ybWFsIDogRVVzZXJXb3JkU3RhdHVzLmRpZmZpY3VsdCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0NhbGw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Jvbmc6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUmlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcmludDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IGFuc3dlciA/IDEgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Jvbmc6ICFhbnN3ZXIgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdSaWdodDogYW5zd2VyID8gMSA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2b2lkIEFwaS5jcmVhdGVVc2VyV29yZCh3b3JkLmlkLCBuZXdXb3JkSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNhdmVSaWdodFNlcXVlbmNlVG9TdGF0aXN0aWNzKHJlc3VsdCkge1xyXG4gICAgICAgIGxldCBtYXggPSAwO1xyXG4gICAgICAgIGxldCBjdXJNYXggPSAwO1xyXG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgY3VyTWF4Kys7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBjdXJNYXggPiBtYXggPyBjdXJNYXggOiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJNYXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9pZCBBcGkuZ2V0VXNlclN0YXRpc3RpY3MoKS50aGVuKChzdGF0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdTdGF0O1xyXG4gICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiBzdGF0KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXJuZWRXb3JkczogMCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnQ6IGAke21heH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0NhbGw6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXQgPSBzdGF0O1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG5ld1N0YXQuaWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRNYXggPSBwYXJzZUludChuZXdTdGF0Lm9wdGlvbmFsLnNwcmludCk7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBtYXggPiBvbGRNYXggPyBtYXggOiBvbGRNYXg7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0Lm9wdGlvbmFsLnNwcmludCA9IGAke21heH1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZvaWQgQXBpLnVwZGF0ZVVzZXJTdGF0aXN0aWNzKG5ld1N0YXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwaSB9IGZyb20gJy4uLy4uL2Jhc2ljJztcclxuaW1wb3J0IExvYWRpbmdQYWdlIGZyb20gJy4uL0xvYWRpbmdQYWdlL0xvYWRpbmdQYWdlJztcclxuaW1wb3J0IFNwcmludE1vZGVsIGZyb20gJy4vU3ByaW50Lm1vZGVsJztcclxuaW1wb3J0IFNwcmludEdhbWVQYWdlIGZyb20gJy4vU3ByaW50R2FtZVBhZ2UvU3ByaW50R2FtZVBhZ2UnO1xyXG5pbXBvcnQgR2FtZVJlc3VsdFBhZ2UgZnJvbSAnLi4vR2FtZVJlc3VsdFBhZ2UvR2FtZVJlc3VsdFBhZ2UnO1xyXG5pbXBvcnQgU3ByaW50UnVsZXMgZnJvbSAnLi9TcHJpbnRSdWxlcy9TcHJpbnRSdWxlcyc7XHJcbmltcG9ydCB7IEdhbWVzR2V0RGF0YSB9IGZyb20gJy4uLy4uL3V0aWxzL0dhbWVzR2V0RGF0YSc7XHJcbmltcG9ydCB7IEF1dGhQYWdlIH0gZnJvbSAnLi4vQXV0aFBhZ2UnO1xyXG5leHBvcnQgY2xhc3MgU3ByaW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgZ3JvdXAsIHBhZ2UpIHtcclxuICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gcGFnZTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLnNwcmludE1vZGVsID0gbmV3IFNwcmludE1vZGVsKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lc0dldERhdGEgPSBuZXcgR2FtZXNHZXREYXRhKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdGhpcy5ydWxlcyA9IG5ldyBTcHJpbnRSdWxlcyh0aGlzLnBhcmVudCwgdGhpcy5wYWdlICE9PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIHRoaXMucnVsZXMub25DbGljayA9IChncm91cCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bGVzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdm9pZCB0aGlzLm1haW5DeWNsZShncm91cCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1haW5DeWNsZShncm91cCkge1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvV3JvbmcgPSBuZXcgQXVkaW8oJ3B1YmxpYy9zdGF0aWMvc291bmQvd3JvbmcubXAzJyk7XHJcbiAgICAgICAgYXVkaW9Xcm9uZy52b2x1bWUgPSAwLjU7XHJcbiAgICAgICAgY29uc3QgYXVkaW9SaWdodCA9IG5ldyBBdWRpbygncHVibGljL3N0YXRpYy9zb3VuZC9yaWdodC5tcDMnKTtcclxuICAgICAgICBjb25zdCBsb2FkaW5nID0gbmV3IExvYWRpbmdQYWdlKHRoaXMucGFyZW50KTtcclxuICAgICAgICBjb25zdCBjdXJyR3JvdXAgPSB0aGlzLmdyb3VwICE9PSB1bmRlZmluZWQgPyB0aGlzLmdyb3VwIDogZ3JvdXA7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IG5ldyBBdXRoUGFnZShkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICBjb25zdCB3b3JkcyA9IGdyb3VwICE9PSAtMSB8fCAhYXV0aC5pc0F1dGhvcml6ZWQoKVxyXG4gICAgICAgICAgICA/IGF3YWl0IHRoaXMuZ2FtZXNHZXREYXRhLmdldFdvcmRzRnJvbUdyb3VwKGN1cnJHcm91cCwgdGhpcy5wYWdlKVxyXG4gICAgICAgICAgICA6IGF3YWl0IHRoaXMuZ2FtZXNHZXREYXRhLmdldEFnZ3JlZ2F0ZWRXb3Jkc0Zyb21Hcm91cCh0aGlzLmdyb3VwLCB0aGlzLnBhZ2UpO1xyXG4gICAgICAgIGxvYWRpbmcuZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuYW5zd2VyUmVzdWx0ID0gW107XHJcbiAgICAgICAgdGhpcy5nYW1lV29yZHMgPSB3b3Jkcy5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IDYwO1xyXG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnRpbWVySGFuZGxlcigpLCAxMDAwKTtcclxuICAgICAgICBmb3IgKHRoaXMuaW5kZXggPSAwOyB0aGlzLmluZGV4IDwgdGhpcy5nYW1lV29yZHMubGVuZ3RoOyB0aGlzLmluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUgPSBuZXcgU3ByaW50R2FtZVBhZ2UodGhpcy5wYXJlbnQsIHRoaXMuaW5kZXgsIHRoaXMuZ2FtZVdvcmRzLCAoc3RyKSA9PiByZXNvbHZlKHN0ciksIGF1ZGlvUmlnaHQsIGF1ZGlvV3JvbmcsIHRoaXMuY291bnRlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9taXNlO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFuc3dlclJlc3VsdC5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIGlmIChBcGkuaXNBdXRob3JpemVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5zcHJpbnRNb2RlbC5zYXZlUmVzdWx0VG9TZXJ2ZXIodGhpcy5nYW1lV29yZHNbdGhpcy5pbmRleF0sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbmRHYW1lKCk7XHJcbiAgICB9XHJcbiAgICB0aW1lckhhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZSBpbnN0YW5jZW9mIFNwcmludEdhbWVQYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zaG93Q291bnQodGhpcy5jb3VudGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvdW50ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5lbmRHYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZW5kR2FtZSgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG4gICAgICAgIGNvbnN0IHdvcmRzID0gdGhpcy5nYW1lV29yZHMuc2xpY2UoMCwgdGhpcy5pbmRleCk7XHJcbiAgICAgICAgY29uc3QgYW5zd2VycyA9IHRoaXMuYW5zd2VyUmVzdWx0LnNsaWNlKDAsIHRoaXMuaW5kZXgpO1xyXG4gICAgICAgIGlmIChBcGkuaXNBdXRob3JpemVkKCkpIHtcclxuICAgICAgICAgICAgdm9pZCB0aGlzLnNwcmludE1vZGVsLnNhdmVSaWdodFNlcXVlbmNlVG9TdGF0aXN0aWNzKGFuc3dlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgR2FtZVJlc3VsdFBhZ2UodGhpcy5wYXJlbnQsIHdvcmRzLCBhbnN3ZXJzLCAoKSA9PiB0aGlzLmV4aXRHYW1lKCkpO1xyXG4gICAgfVxyXG4gICAgZXhpdEdhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcnO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBCdXJnZXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9CdXJnZXIvQnVyZ2VyJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9CdXR0b24nO1xyXG5pbXBvcnQgeyBDcmVhdG9yIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9DcmVhdG9yJztcclxuaW1wb3J0ICcuL2dhbWVwYWdlLnNjc3MnO1xyXG5jb25zdCBBTlNXRVJfQlVUVE9OUyA9IDI7XHJcbnZhciBFQW5zd2VyO1xyXG4oZnVuY3Rpb24gKEVBbnN3ZXIpIHtcclxuICAgIEVBbnN3ZXJbRUFuc3dlcltcInJpZ2h0XCJdID0gMF0gPSBcInJpZ2h0XCI7XHJcbiAgICBFQW5zd2VyW0VBbnN3ZXJbXCJ3cm9uZ1wiXSA9IDFdID0gXCJ3cm9uZ1wiO1xyXG59KShFQW5zd2VyIHx8IChFQW5zd2VyID0ge30pKTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ByaW50R2FtZVBhZ2UgZXh0ZW5kcyBDcmVhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgY3VySW5kZXgsIGdhbWVXb3Jkcywgb25OZXh0LCBhdWRpb1JpZ2h0LCBhdWRpb1dyb25nLCBjdXJUaW1lcikge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgJ2RpdicsICdnYW1lcGFnZS1zcHJpbnQnKTtcclxuICAgICAgICB0aGlzLm9uTmV4dCA9IG9uTmV4dDtcclxuICAgICAgICB0aGlzLmF1ZGlvUmlnaHQgPSBhdWRpb1JpZ2h0O1xyXG4gICAgICAgIHRoaXMuYXVkaW9Xcm9uZyA9IGF1ZGlvV3Jvbmc7XHJcbiAgICAgICAgdGhpcy5idG5NYXNzID0gW107XHJcbiAgICAgICAgdGhpcy53b3JkID0gZ2FtZVdvcmRzW2N1ckluZGV4XTtcclxuICAgICAgICB0aGlzLmJ1cmdlciA9IG5ldyBCdXJnZXIocGFyZW50LCAoKSA9PiB0aGlzLmRlc3Ryb3koKSk7XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdnYW1lcGFnZS1zcHJpbnRfX3RpbWVyJywgKCcwJyArIGAke2N1clRpbWVyfWApLnNsaWNlKC0yKSk7XHJcbiAgICAgICAgaWYgKGN1clRpbWVyIDwgMTApXHJcbiAgICAgICAgICAgIHRoaXMudGltZXIubm9kZS5jbGFzc0xpc3QuYWRkKCd0aW1lcl90aW1lLWV4cGlyZScpO1xyXG4gICAgICAgIG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdnYW1lcGFnZS1zcHJpbnRfX3Byb2dyZXNzLXdpbmRvdycsIGDQodC70L7QsjogJHtjdXJJbmRleH1gKTtcclxuICAgICAgICBjb25zdCB3b3JkV25kID0gbmV3IENyZWF0b3IodGhpcy5ub2RlLCAnZGl2JywgJ2dhbWVwYWdlLXNwcmludF9fd29yZC13aW5kb3cnKTtcclxuICAgICAgICBuZXcgQ3JlYXRvcih3b3JkV25kLm5vZGUsICdkaXYnLCAnZ2FtZXBhZ2Utc3ByaW50X193b3JkJywgYCR7Z2FtZVdvcmRzW2N1ckluZGV4XS53b3JkfWApO1xyXG4gICAgICAgIGxldCByYW5kb21JbnQ7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICByYW5kb21JbnQgPSB0aGlzLmdldFJhbmRvbUludChnYW1lV29yZHMubGVuZ3RoKTtcclxuICAgICAgICB9IHdoaWxlIChyYW5kb21JbnQgPT09IGN1ckluZGV4KTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZSA9IGdhbWVXb3Jkc1tNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMCkgJSAyID8gcmFuZG9tSW50IDogY3VySW5kZXhdLndvcmRUcmFuc2xhdGU7XHJcbiAgICAgICAgbmV3IENyZWF0b3Iod29yZFduZC5ub2RlLCAnZGl2JywgJ2dhbWVwYWdlLXNwcmludF9fd29yZCcsIGAke3RoaXMudHJhbnNsYXRlfWApO1xyXG4gICAgICAgIGNvbnN0IGJ0bldyYXBwZXIxID0gbmV3IENyZWF0b3IodGhpcy5ub2RlLCAnZGl2JywgJ2dhbWVwYWdlLXNwcmludF9fYnRuLXdyYXBwZXInKTtcclxuICAgICAgICB0aGlzLmJ0bk1hc3MucHVzaChuZXcgQnV0dG9uKGJ0bldyYXBwZXIxLm5vZGUsICdnYW1lcGFnZS1zcHJpbnRfX2Fuc3dlciBidG5fcmlnaHQnLCAnMSDQktC10YDQvdC+JywgKCkgPT4gdGhpcy5vbkFuc3dlcihFQW5zd2VyLnJpZ2h0KSkpO1xyXG4gICAgICAgIHRoaXMuYnRuTWFzcy5wdXNoKG5ldyBCdXR0b24oYnRuV3JhcHBlcjEubm9kZSwgJ2dhbWVwYWdlLXNwcmludF9fYW5zd2VyIGJ0bl93cm9uZycsICcyINCd0LUg0LLQtdGA0L3QvicsICgpID0+IHRoaXMub25BbnN3ZXIoRUFuc3dlci53cm9uZykpKTtcclxuICAgICAgICAvLyBjb25zdCBidG5XcmFwcGVyMiA9IG5ldyBDcmVhdG9yKHRoaXMubm9kZSwgJ2RpdicsICdnYW1lcGFnZS1zcHJpbnRfX2J0bi13cmFwcGVyJyk7XHJcbiAgICAgICAgLy8gdGhpcy5idG5CYWNrID0gbmV3IEJ1dHRvbihidG5XcmFwcGVyMi5ub2RlLCAnZ2FtZXBhZ2Utc3ByaW50X19iYWNrJywgJ1F1aXQnLCAoKSA9PiBvbkV4aXQoKSk7XHJcbiAgICAgICAgdGhpcy5rZXlIYW5kbGVyQmluZCA9IHRoaXMua2V5SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5SGFuZGxlckJpbmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBLZXlib2FyZEV2ZW50INC00LvRjyDQstGL0LHQvtGA0LAg0YEg0LrQu9Cw0LLQuNCw0YLRg9GA0YtcclxuICAgICAqIEBwYXJhbSBlINCh0L7QsdGL0YLQuNC1IEtleWJvYXJkRXZlbnRcclxuICAgICAqL1xyXG4gICAga2V5SGFuZGxlcihlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID4gJzAnICYmIGUua2V5IDw9IGAke0FOU1dFUl9CVVRUT05TfWApIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFuc3dlcihlLmtleSA9PT0gJzEnID8gRUFuc3dlci5yaWdodCA6IEVBbnN3ZXIud3JvbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXlIYW5kbGVyQmluZCk7XHJcbiAgICAgICAgdGhpcy5idXJnZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIG9uQW5zd2VyKGluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgYW5zd2VyID0gKHRoaXMudHJhbnNsYXRlID09PSB0aGlzLndvcmQud29yZFRyYW5zbGF0ZSkgPT09IChpbmRleCA9PT0gRUFuc3dlci5yaWdodCk7XHJcbiAgICAgICAgdGhpcy5idG5NYXNzW2luZGV4XS5ub2RlLmNsYXNzTGlzdC5hZGQoYW5zd2VyID8gJ2Fuc3dlcl9yaWdodCcgOiAnYW5zd2VyX3dyb25nJyk7XHJcbiAgICAgICAgaWYgKGFuc3dlcikge1xyXG4gICAgICAgICAgICB2b2lkIHRoaXMuYXVkaW9SaWdodC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2b2lkIHRoaXMuYXVkaW9Xcm9uZy5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbk5leHQoYW5zd2VyKSwgNTAwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQu9GD0YfQsNC50L3QvtC1INGH0LjRgdC70L4sINC90LUg0LHQvtC70YzRiNC1IG1heEludFxyXG4gICAgICogQHBhcmFtIG1heEludCDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0YfQuNGB0LvQvlxyXG4gICAgICogQHJldHVybnMg0KHQu9GD0YfQsNC50L3QvtC1INGH0LjRgdC70LUg0L3QtSDQsdC+0LvRjNGI0LUgbWF4SW50XHJcbiAgICAgKi9cclxuICAgIGdldFJhbmRvbUludChtYXhJbnQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4SW50KTtcclxuICAgIH1cclxuICAgIHNob3dDb3VudChjb3VudCkge1xyXG4gICAgICAgIHRoaXMudGltZXIubm9kZS50ZXh0Q29udGVudCA9ICgnMCcgKyBgJHtjb3VudH1gKS5zbGljZSgtMik7XHJcbiAgICAgICAgaWYgKGNvdW50IDwgMTApXHJcbiAgICAgICAgICAgIHRoaXMudGltZXIubm9kZS5jbGFzc0xpc3QuYWRkKCd0aW1lcl90aW1lLWV4cGlyZScpO1xyXG4gICAgICAgIHRoaXMudGltZXIubm9kZS5jbGFzc0xpc3QuYWRkKCd0aW1lcl90aWNrJyk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpbWVyLm5vZGUuY2xhc3NMaXN0LnJlbW92ZSgndGltZXJfdGljaycpLCAzMDApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvQnV0dG9uJztcclxuaW1wb3J0IHsgQ3JlYXRvciB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvQ3JlYXRvcic7XHJcbmltcG9ydCB7IEdST1VQX0FNT1VOVCB9IGZyb20gJy4uLy4uLy4uL2Jhc2ljL2NvbW1vbi9jb25zdGFudHMnO1xyXG5pbXBvcnQgJy4vcnVsZXMuc2Nzcyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwcmludFJ1bGVzIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGZyb21Cb29rID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsICdkaXYnLCAncnVsZXMnKTtcclxuICAgICAgICBjb25zdCB3bmQgPSBuZXcgQ3JlYXRvcih0aGlzLm5vZGUsICdkaXYnLCAncnVsZXNfX3dpbmRvdycsIGBcclxuICAgICAgICA8aDIgY2xhc3M9XCJydWxlc19fdGl0bGVcIj7Qn9GA0LDQstC40LvQsCDQuNCz0YDRiyBcItCh0L/RgNC40L3RglwiPC9oMj5cclxuICAgICAgICA8cCBjbGFzcz1cInJ1bGVzX19ydWxlc1wiPtCY0LPRgNCwIFwi0KHQv9GA0LjQvdGCXCIg0YDQsNC30LLQuNCy0LDQtdGCINCy0LjQt9GD0LDQu9GM0L3QvtC1INCy0L7RgdC/0YDQuNGP0YLQuNC1INGB0LvQvtCyLjwvcD5cclxuICAgICAgICA8cCBjbGFzcz1cInJ1bGVzX19ydWxlc1wiPtCS0Ysg0LTQvtC70LbQvdGLINC+0YLQstC10YLQuNGC0Ywg0L/RgNCw0LLQuNC70YzQvdGL0Lkg0L/QtdGA0LXQstC+0LQg0LjQu9C4INC90LXRgi48L3A+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJydWxlc19fcnVsZXNcIj7QktGLINC00L7Qu9C20L3RiyDQvtGC0LLQtdGC0LjRgtGMINC60LDQuiDQvNC+0LbQvdC+INCx0L7Qu9GM0YjQtSDRgdC70L7QsiDQt9CwIDYwINGB0LXQutGD0L3QtC48L3A+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJydWxlc19fcnVsZXNcIj7Qo9C/0YDQsNCy0LvRj9GC0Ywg0LzQvtC20L3QviDQutC90L7Qv9C60LDQvNC4IDEsIDI8L3A+XHJcbiAgICAgIGApO1xyXG4gICAgICAgIGNvbnN0IGJ0bldyYXBwZXIgPSBuZXcgQ3JlYXRvcih3bmQubm9kZSwgJ2RpdicsICdydWxlc19fYnRuLXdyYXBwZXInKTtcclxuICAgICAgICBpZiAoZnJvbUJvb2spIHtcclxuICAgICAgICAgICAgbmV3IEJ1dHRvbihidG5XcmFwcGVyLm5vZGUsICdydWxlc19fYnV0dG9uJywgJ09rJywgKCkgPT4gdGhpcy5vbkNsaWNrKC0xKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBidG5XcmFwcGVyLm5vZGUuaW5uZXJIVE1MICs9ICc8cCBjbGFzcz1cInJ1bGVzX19ydWxlc1wiPtCS0YvQsdC10YDQuNGC0LUg0LPRgNGD0L/Qv9GDINGB0LvQvtC20L3QvtGB0YLQuDo8L3A+JztcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gR1JPVVBfQU1PVU5UOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IG5ldyBCdXR0b24oYnRuV3JhcHBlci5ub2RlLCAncnVsZXNfX2J1dHRvbicsIGAke2l9YCwgKCkgPT4gdGhpcy5vbkNsaWNrKGkpKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5ub2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZ2V0Q29sb3JGcm9tTnVtYmVyKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMua2V5SGFuZGxlckJpbmQgPSB0aGlzLmtleUhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleUhhbmRsZXJCaW5kKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gS2V5Ym9hcmRFdmVudCDQtNC70Y8g0LLRi9Cx0L7RgNCwINGBINC60LvQsNCy0LjQsNGC0YPRgNGLXHJcbiAgICAgKiBAcGFyYW0gZSDQodC+0LHRi9GC0LjQtSBLZXlib2FyZEV2ZW50XHJcbiAgICAgKi9cclxuICAgIGtleUhhbmRsZXIoZSkge1xyXG4gICAgICAgIGlmIChlLmtleSA+ICcwJyAmJiBlLmtleSA8PSBgJHtHUk9VUF9BTU9VTlR9YCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2socGFyc2VJbnQoZS5rZXkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5SGFuZGxlckJpbmQpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIGdldENvbG9yRnJvbU51bWJlcihudW0pIHtcclxuICAgICAgICBsZXQgc3RyID0gJyMnO1xyXG4gICAgICAgIHN0ciArPSBudW0gJiAxID8gJ2ZmJyA6ICcwMCc7XHJcbiAgICAgICAgc3RyICs9IG51bSAmIDIgPyAnZmYnIDogJzAwJztcclxuICAgICAgICBzdHIgKz0gbnVtICYgNCA/ICdmZicgOiAnMDAnO1xyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9TcHJpbnQnO1xyXG4iLCJpbXBvcnQgeyBBcGkgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgQXV0aFBhZ2UgfSBmcm9tICcuLi9BdXRoUGFnZSc7XHJcbmltcG9ydCBMb2FkaW5nUGFnZSBmcm9tICcuLi9Mb2FkaW5nUGFnZS9Mb2FkaW5nUGFnZSc7XHJcbmltcG9ydCAnLi9zdGF0aXN0aWNzLnNjc3MnO1xyXG5pbXBvcnQgU3RhdGlzdGljc0dhbWVzIGZyb20gJy4vU3RhdGlzdGljc0dhbWVzL1N0YXRpc3RpY3NHYW1lcyc7XHJcbmltcG9ydCBTdGF0aXN0aWNzV29yZHMgZnJvbSAnLi9TdGF0aXN0aWNzV29yZHMvU3RhdGlzdGljc1dvcmRzJztcclxuZXhwb3J0IGNsYXNzIFN0YXRpc3RpY3Mge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50KSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gbmV3IEF1dGhQYWdlKHRoaXMucGFyZW50KTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLm1haW5XbmQgPSBuZXcgQ3JlYXRvcih0aGlzLnBhcmVudCwgJ21haW4nLCAnc3RhdGlzdGljc19fbWFpbi13aW5kb3cnKTtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0aC5pc0F1dGhvcml6ZWQoKSkge1xyXG4gICAgICAgICAgICAvLyDQndC1INCw0LLRgtC+0YDQuNC30LjRgNC+0LLQsNC9XHJcbiAgICAgICAgICAgIG5ldyBDcmVhdG9yKHRoaXMubWFpblduZC5ub2RlLCAnZGl2JywgJ3N0YXRpc3RpY3NfX25vdC1hdXRob3JpemVkJywgJ9Ci0L7Qu9GM0LrQviDQsNCy0YLQvtGA0LjQt9C40YDQvtCy0LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Lgg0LzQvtCz0YPRgiDQv9GA0L7RgdC80LDRgtGA0LjQstCw0YLRjCDRgdGC0LDRgtC40YHRgtC40LrRgycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy/QkNCy0YLQvtGA0LjQt9C40YDQvtCy0LDQvVxyXG4gICAgICAgICAgICBjb25zdCBsb2FkID0gbmV3IExvYWRpbmdQYWdlKHRoaXMucGFyZW50KTtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyID0ge1xyXG4gICAgICAgICAgICAgICAgdXNlcldvcmQ6IHsgJG5lOiBudWxsIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIC8vIGdyb3VwOiAnMScsXHJcbiAgICAgICAgICAgICAgICAvLyBwYWdlOiAnMScsXHJcbiAgICAgICAgICAgICAgICB3b3Jkc1BlclBhZ2U6ICc0MDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXHJcbiAgICAgICAgICAgICAgICBBcGkuZ2V0VXNlclN0YXRpc3RpY3MoKSxcclxuICAgICAgICAgICAgICAgIEFwaS5nZXRVc2VyQWxsQWdyZWdhdGVkV29yZHMob2JqKSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdm9pZCBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoW3N0YXQsIHdvcmRzXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9hZC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhdGlzdGljc0dhbWVzKHRoaXMubWFpblduZC5ub2RlLCAnZXJyb3InIGluIHN0YXQgPyBudWxsIDogc3RhdCwgJ2Vycm9yJyBpbiB3b3JkcyA/IG51bGwgOiB3b3Jkcyk7XHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhdGlzdGljc1dvcmRzKHRoaXMubWFpblduZC5ub2RlLCAnZXJyb3InIGluIHdvcmRzID8gbnVsbCA6IHdvcmRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGlzdGljc0dhbWVzIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHN0YXQsIHdvcmRzKSB7XHJcbiAgICAgICAgY29uc3QgbmV3V29yZEF1ZGlvQ2FsbCA9ICF3b3Jkc1xyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiB3b3Jkc1swXS5wYWdpbmF0ZWRSZXN1bHRzLmZpbHRlcigod29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcldvcmQgPSB3b3JkLnVzZXJXb3JkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJXb3JkLm9wdGlvbmFsLmF1ZGlvQ2FsbC5yaWdodCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5hdWRpb0NhbGwud3JvbmcgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgYXVkaW9DYWxsUmlnaHQgPSAhd29yZHNcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogd29yZHNbMF0ucGFnaW5hdGVkUmVzdWx0cy5maWx0ZXIoKHdvcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXb3JkID0gd29yZC51c2VyV29yZDtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5hdWRpb0NhbGwucmlnaHQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgYXVkaW9DYWxsV3JvbmcgPSAhd29yZHNcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogd29yZHNbMF0ucGFnaW5hdGVkUmVzdWx0cy5maWx0ZXIoKHdvcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXb3JkID0gd29yZC51c2VyV29yZDtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5hdWRpb0NhbGwud3JvbmcgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV3V29yZFNwcmludCA9ICF3b3Jkc1xyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiB3b3Jkc1swXS5wYWdpbmF0ZWRSZXN1bHRzLmZpbHRlcigod29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcldvcmQgPSB3b3JkLnVzZXJXb3JkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJXb3JkLm9wdGlvbmFsLnNwcmludC5yaWdodCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5zcHJpbnQud3JvbmcgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3ByaW50UmlnaHQgPSAhd29yZHNcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogd29yZHNbMF0ucGFnaW5hdGVkUmVzdWx0cy5maWx0ZXIoKHdvcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXb3JkID0gd29yZC51c2VyV29yZDtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5zcHJpbnQucmlnaHQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3ByaW50V3JvbmcgPSAhd29yZHNcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogd29yZHNbMF0ucGFnaW5hdGVkUmVzdWx0cy5maWx0ZXIoKHdvcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXb3JkID0gd29yZC51c2VyV29yZDtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyV29yZC5vcHRpb25hbC5zcHJpbnQud3JvbmcgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCAnZGl2JywgJ3N0YXRpc3RpY3NfX3dpbmRvdyBnYW1lcy13aW5kb3cnLCBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXRpc3RpY3NfX3dpbmRvdy10aXRsZVwiPtCh0YLQsNGC0LjRgdGC0LjQutCwINC40LPRgDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJnYW1lcy13aW5kb3dfX2dhbWVzLXdpbmRvd1wiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVzLXdpbmRvd19fdGl0bGUtZ2FtZVwiPtCY0LPRgNCwIFwi0JDRg9C00LjQvtCy0YvQt9C+0LJcIjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVzLXdpbmRvd19fc3RhdGlzdGljXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2luZy1uZXdcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGlzdGljc19fdGV4dFwiPtCd0L7QstGL0YUg0YHQu9C+0LIg0LfQsCDQtNC10L3RjDogJHtuZXdXb3JkQXVkaW9DYWxsID8gbmV3V29yZEF1ZGlvQ2FsbC5sZW5ndGggOiAwfTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVzLXdpbmRvd19fc3RhdGlzdGljXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2luZy1waWVcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGlzdGljc19fdGV4dFwiPtCf0YDQvtGG0LXQvdGCINC/0YDQsNCy0LjQu9GM0L3Ri9GFOiAke2F1ZGlvQ2FsbFJpZ2h0ICYmIGF1ZGlvQ2FsbFdyb25nICYmIChhdWRpb0NhbGxSaWdodC5sZW5ndGggPiAwIHx8IGF1ZGlvQ2FsbFdyb25nLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgID8gTWF0aC5yb3VuZCgoYXVkaW9DYWxsUmlnaHQubGVuZ3RoICogMTAwKSAvIChhdWRpb0NhbGxSaWdodC5sZW5ndGggKyBhdWRpb0NhbGxXcm9uZy5sZW5ndGgpKVxyXG4gICAgICAgICAgICA6IDB9ICU8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYW1lcy13aW5kb3dfX3N0YXRpc3RpY1wiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNpbmctcmlnaHRcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGlzdGljc19fdGV4dFwiPtCe0YLQs9Cw0LTQsNC90L4g0L/RgNCw0LLQuNC70YzQvdC+OiAke2F1ZGlvQ2FsbFJpZ2h0ID8gYXVkaW9DYWxsUmlnaHQubGVuZ3RoIDogMH08L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYW1lcy13aW5kb3dfX3N0YXRpc3RpY1wiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNpbmctd3JvbmdcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGlzdGljc19fdGV4dFwiPtCe0YLQs9Cw0LTQsNC90L4g0L3QtdC/0YDQsNCy0LjQu9GM0L3QvjogJHthdWRpb0NhbGxXcm9uZyA/IGF1ZGlvQ2FsbFdyb25nLmxlbmd0aCA6IDB9PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FtZXMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLXJpZ2h0XCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXRpc3RpY3NfX3RleHRcIj5cclxuICAgICAgICAgICAgICDQodCw0LzQsNGPINC00LvQuNC90L3QsNGPINC/0YDQsNCy0LjQu9GM0L3QsNGPINC/0L7RgdC70LXQtNC+0LLQsNGC0LXQu9GM0L3QvtGB0YLRjDogJHtzdGF0ID8gc3RhdC5vcHRpb25hbC5hdWRpb0NhbGwgOiAwfVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FtZXMtd2luZG93X19nYW1lcy13aW5kb3dcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYW1lcy13aW5kb3dfX3RpdGxlLWdhbWVcIj7QmNCz0YDQsCBcItCh0L/RgNC40L3RglwiPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FtZXMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLW5ld1wiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0J3QvtCy0YvRhSDRgdC70L7QsiDQt9CwINC00LXQvdGMOiAke25ld1dvcmRTcHJpbnQgPyBuZXdXb3JkU3ByaW50Lmxlbmd0aCA6IDB9PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FtZXMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLXBpZVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0J/RgNC+0YbQtdC90YIg0L/RgNCw0LLQuNC70YzQvdGL0YU6ICR7c3ByaW50UmlnaHQgJiYgc3ByaW50V3JvbmcgJiYgKHNwcmludFJpZ2h0Lmxlbmd0aCA+IDAgfHwgc3ByaW50V3JvbmcubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgPyBNYXRoLnJvdW5kKChzcHJpbnRSaWdodC5sZW5ndGggKiAxMDApIC8gKHNwcmludFJpZ2h0Lmxlbmd0aCArIHNwcmludFdyb25nLmxlbmd0aCkpXHJcbiAgICAgICAgICAgIDogMH0gJTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVzLXdpbmRvd19fc3RhdGlzdGljXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2luZy1yaWdodFwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0J7RgtCz0LDQtNCw0L3QviDQv9GA0LDQstC40LvRjNC90L46ICR7c3ByaW50UmlnaHQgPyBzcHJpbnRSaWdodC5sZW5ndGggOiAwfTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVzLXdpbmRvd19fc3RhdGlzdGljXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2luZy13cm9uZ1wiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0J7RgtCz0LDQtNCw0L3QviDQvdC10L/RgNCw0LLQuNC70YzQvdC+OiAke3NwcmludFdyb25nID8gc3ByaW50V3JvbmcubGVuZ3RoIDogMH08L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYW1lcy13aW5kb3dfX3N0YXRpc3RpY1wiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNpbmctcmlnaHRcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGlzdGljc19fdGV4dFwiPlxyXG4gICAgICAgICAgICAgINCh0LDQvNCw0Y8g0LTQu9C40L3QvdCw0Y8g0L/RgNCw0LLQuNC70YzQvdCw0Y8g0L/QvtGB0LvQtdC00L7QstCw0YLQtdC70YzQvdC+0YHRgtGMOiAke3N0YXQgPyBzdGF0Lm9wdGlvbmFsLnNwcmludCA6IDB9XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBFVXNlcldvcmRTdGF0dXMgfSBmcm9tICcuLi8uLi8uLi9iYXNpYyc7XHJcbmltcG9ydCB7IENyZWF0b3IgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGlzdGljc1dvcmRzIGV4dGVuZHMgQ3JlYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHdvcmRzKSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxOZXdXb3JkcyA9IHdvcmRzICYmIHdvcmRzWzBdICYmIHdvcmRzWzBdLnRvdGFsQ291bnRbMF0gPyB3b3Jkc1swXS50b3RhbENvdW50WzBdLmNvdW50IDogMDtcclxuICAgICAgICBjb25zdCB0b3RhbFN0dWRpZWRXb3JkcyA9ICF3b3Jkc1xyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiB3b3Jkc1swXS5wYWdpbmF0ZWRSZXN1bHRzLmZpbHRlcigod29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcldvcmQgPSB3b3JkLnVzZXJXb3JkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdXNlcldvcmQgJiYgdXNlcldvcmQuZGlmZmljdWx0eSA9PT0gRVVzZXJXb3JkU3RhdHVzLnN0dWRpZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvQ2FsbFJpZ2h0ID0gIXdvcmRzXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHdvcmRzWzBdLnBhZ2luYXRlZFJlc3VsdHMuZmlsdGVyKCh3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV29yZCA9IHdvcmQudXNlcldvcmQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQub3B0aW9uYWwuYXVkaW9DYWxsLnJpZ2h0ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvQ2FsbFdyb25nID0gIXdvcmRzXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHdvcmRzWzBdLnBhZ2luYXRlZFJlc3VsdHMuZmlsdGVyKCh3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV29yZCA9IHdvcmQudXNlcldvcmQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQub3B0aW9uYWwuYXVkaW9DYWxsLndyb25nID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNwcmludFJpZ2h0ID0gIXdvcmRzXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHdvcmRzWzBdLnBhZ2luYXRlZFJlc3VsdHMuZmlsdGVyKCh3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV29yZCA9IHdvcmQudXNlcldvcmQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQub3B0aW9uYWwuc3ByaW50LnJpZ2h0ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNwcmludFdyb25nID0gIXdvcmRzXHJcbiAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICA6IHdvcmRzWzBdLnBhZ2luYXRlZFJlc3VsdHMuZmlsdGVyKCh3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV29yZCA9IHdvcmQudXNlcldvcmQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcldvcmQub3B0aW9uYWwuc3ByaW50Lndyb25nID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBwZXJjZW50O1xyXG4gICAgICAgIGlmIChzcHJpbnRSaWdodCAmJlxyXG4gICAgICAgICAgICBzcHJpbnRXcm9uZyAmJlxyXG4gICAgICAgICAgICBhdWRpb0NhbGxSaWdodCAmJlxyXG4gICAgICAgICAgICBhdWRpb0NhbGxXcm9uZyAmJlxyXG4gICAgICAgICAgICAoc3ByaW50UmlnaHQubGVuZ3RoID4gMCB8fCBhdWRpb0NhbGxSaWdodC5sZW5ndGggPiAwIHx8IHNwcmludFdyb25nLmxlbmd0aCA+IDAgfHwgYXVkaW9DYWxsV3JvbmcubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgucm91bmQoKChzcHJpbnRSaWdodC5sZW5ndGggKyBhdWRpb0NhbGxSaWdodC5sZW5ndGgpICogMTAwKSAvXHJcbiAgICAgICAgICAgICAgICAoc3ByaW50UmlnaHQubGVuZ3RoICsgc3ByaW50V3JvbmcubGVuZ3RoICsgYXVkaW9DYWxsUmlnaHQubGVuZ3RoICsgYXVkaW9DYWxsV3JvbmcubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcGVyY2VudCA9IDA7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCAnZGl2JywgJ3N0YXRpc3RpY3NfX3dpbmRvdyB3b3Jkcy13aW5kb3cnLCBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXRpc3RpY3NfX3dpbmRvdy10aXRsZVwiPtCh0YLQsNGC0LjRgdGC0LjQutCwINC/0L4g0YHQu9C+0LLQsNC8PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIndvcmRzLXdpbmRvd19fd29yZHMtd2luZG93XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yZHMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLW5ld1wiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0J3QvtCy0YvRhSDRgdC70L7QsiDQt9CwINC00LXQvdGMOiAke3RvdGFsTmV3V29yZHN9PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yZHMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLWV4Y2xhbWF0aW9uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXRpc3RpY3NfX3RleHRcIj7QmNC30YPRh9C10L3QvdGL0YUg0YHQu9C+0LIg0LfQsCDQtNC10L3RjDogJHt0b3RhbFN0dWRpZWRXb3JkcyA/IHRvdGFsU3R1ZGllZFdvcmRzLmxlbmd0aCA6IDB9PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwid29yZHMtd2luZG93X19zdGF0aXN0aWNcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzaW5nLXBpZVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0aXN0aWNzX190ZXh0XCI+0L/RgNC+0YbQtdC90YIg0L/RgNCw0LLQuNC70YzQvdGL0YUg0L7RgtCy0LXRgtC+0LIg0LfQsCDQtNC10L3RjDogJHtwZXJjZW50fSAlPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGApO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vU3RhdGlzdGljcyc7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vdGV4dGJvb2snO1xyXG5leHBvcnQgKiBmcm9tICcuL3RleHRib29rLnZpZXcnO1xyXG4iLCJpbXBvcnQgeyBUZXh0Ym9va1ZpZXcgfSBmcm9tICcuL3RleHRib29rLnZpZXcnO1xyXG5pbXBvcnQgeyBXb3JkVGFiLCBXb3JkR3JvdXAgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgQXBpLCBkaWZmaWN1bHQsIGdyb3VwcyB9IGZyb20gJy4uLy4uL2Jhc2ljJztcclxuaW1wb3J0IFdvcmRHcm91cFZpZXcgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9UZXh0Ym9vay9Xb3JkR3JvdXAvd29yZEdyb3VwLnZpZXcnO1xyXG5pbXBvcnQgeyBHYW1lTGlua3MgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzLyc7XHJcbmV4cG9ydCBjbGFzcyBUZXh0Ym9vayB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlID0gcGFyZW50Tm9kZTtcclxuICAgICAgICBXb3JkR3JvdXAuaW5zdGFuY2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgV29yZEdyb3VwVmlldy5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KHQvtC30LTQsNC10YIg0LjQvdGB0YLQsNC90YEg0LrQu9Cw0YHRgdCwINGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHRib29rID0gbmV3IFRleHRib29rVmlldyh0aGlzLnBhcmVudE5vZGUpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyR3JvdXBCdXR0b25zKHRleHRib29rKTtcclxuICAgICAgICB0aGlzLnJlbmRlckdhbWVMaW5rcyh0ZXh0Ym9vayk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqINCh0L7Qt9C00LDQtdGCINC/0LXRgNC10LrQu9GO0YfQsNGC0LXQu9C4INCz0YDRg9C/0L9cclxuICAgICAqIEBwYXJhbSB0ZXh0Ym9vayDQmNC90YHRgtCw0L3RgSDQutC70LDRgdGB0LAg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICovXHJcbiAgICByZW5kZXJHcm91cEJ1dHRvbnModGV4dGJvb2spIHtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhncm91cHMpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgbmV3IFdvcmRUYWIodGV4dGJvb2ssIGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChBcGkuaXNBdXRob3JpemVkKCkpIHtcclxuICAgICAgICAgICAgbmV3IFdvcmRUYWIodGV4dGJvb2ssIE9iamVjdC5lbnRyaWVzKGRpZmZpY3VsdClbMF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0KHQvtC30LTQsNC10YIg0YHRgdGL0LvQutC4INC90LAg0LjQs9GA0Ysg0LIg0YPRh9C10LHQvdC40LrQtVxyXG4gICAgICogQHBhcmFtIHRleHRib29rINCY0L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgKi9cclxuICAgIHJlbmRlckdhbWVMaW5rcyh0ZXh0Ym9vaykge1xyXG4gICAgICAgIG5ldyBHYW1lTGlua3ModGV4dGJvb2sudGV4dGJvb2subm9kZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ3JlYXRvciB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgJy4vdGV4dGJvb2suc2Nzcyc7XHJcbmV4cG9ydCBjbGFzcyBUZXh0Ym9va1ZpZXcge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50Tm9kZSkge1xyXG4gICAgICAgIHRoaXMudGV4dGJvb2sgPSBuZXcgQ3JlYXRvcihwYXJlbnROb2RlLCAnZGl2JywgJ3RleHRib29rJyk7XHJcbiAgICAgICAgdGhpcy50ZXh0Ym9va0hlYWRlciA9IG5ldyBDcmVhdG9yKHRoaXMudGV4dGJvb2subm9kZSwgJ2RpdicsICd0ZXh0Ym9va19faGVhZGVyJyk7XHJcbiAgICAgICAgdGhpcy5ncm91cCA9IG5ldyBDcmVhdG9yKHRoaXMudGV4dGJvb2tIZWFkZXIubm9kZSwgJ2RpdicsICdncm91cCcpO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSBuZXcgQ3JlYXRvcih0aGlzLnRleHRib29rLm5vZGUsICdoMScsICd0ZXh0Ym9va19fdGl0bGUnLCAnV29yZHMnKTtcclxuICAgICAgICB0aGlzLndvcmRzID0gbmV3IENyZWF0b3IodGhpcy50ZXh0Ym9vay5ub2RlLCAnZGl2JywgJ3dvcmRzJyk7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gbmV3IENyZWF0b3IodGhpcy50ZXh0Ym9vay5ub2RlLCAnZGl2JywgJ3BhZ2luYXRpb24nKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUdyb3VwID0gdGhpcy50aXRsZS5ub2RlO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vVGV4dGJvb2tQYWdlJztcclxuIiwiaW1wb3J0IHsgQXBpLCBFVXNlcldvcmRTdGF0dXMsIFBBR0VTX1BFUl9HUk9VUCwgV09SRFNfUEVSX1BBR0UgfSBmcm9tICcuLi8uLi9iYXNpYyc7XHJcbmV4cG9ydCBjbGFzcyBHYW1lc0dldERhdGEge1xyXG4gICAgLyoqXHJcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgdC/0LjRgdC+0Log0YHQu9C+0LIg0LjQtyDQvtC/0YDQtdC00LXQu9C10L3QvdC+0LPQviDRgNCw0LfQtNC10LvQsFxyXG4gICAgICogQHBhcmFtIGdyb3VwINCd0L7QvNC10YAg0YDQsNC30LTQtdC70LBcclxuICAgICAqIEByZXR1cm5zINCh0L/QuNGB0L7QuiDRgdC70L7QslxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRXb3Jkc0Zyb21Hcm91cChncm91cCwgcGFnZSkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgICAgY29uc3QgbWF4UGFnZXMgPSBwYWdlID8gcGFnZSA6IFBBR0VTX1BFUl9HUk9VUDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFBhZ2VzOyBpKyspIHtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChBcGkuZ2V0V29yZHMoYCR7Z3JvdXB9YCwgYCR7aX1gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigocGFnZXMpID0+IHtcclxuICAgICAgICAgICAgbGV0IHdvcmRzID0gW107XHJcbiAgICAgICAgICAgIHBhZ2VzLmZvckVhY2goKHBhZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKCdlcnJvcicgaW4gcGFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkcyA9IHdvcmRzLmNvbmNhdChwYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3JkcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQv9C40YHQvtC6INC90LXQuNC30YPRh9C10L3QvdGL0YUg0YHQu9C+0LIg0LjQtyDQvtC/0YDQtdC00LXQu9C10L3QvdC+0LPQviDRgNCw0LfQtNC10LvQsFxyXG4gICAgICogQHBhcmFtIGdyb3VwINCd0L7QvNC10YAg0YDQsNC30LTQtdC70LBcclxuICAgICAqIEBwYXJhbSBwYWdlINCd0L7QvNC10YAg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICogQHJldHVybnMg0KHQv9C40YHQvtC6INGB0LvQvtCyXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEFnZ3JlZ2F0ZWRXb3Jkc0Zyb21Hcm91cChncm91cCwgcGFnZSkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0ge1xyXG4gICAgICAgICAgICAndXNlcldvcmQuZGlmZmljdWx0eSc6IHsgJG5lOiBFVXNlcldvcmRTdGF0dXMuc3R1ZGllZCB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICBncm91cDogYCR7Z3JvdXB9YCxcclxuICAgICAgICAgICAgcGFnZTogJzAnLFxyXG4gICAgICAgICAgICB3b3Jkc1BlclBhZ2U6IGAke1dPUkRTX1BFUl9QQUdFfWAsXHJcbiAgICAgICAgICAgIGZpbHRlcjogSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHBhZ2U7IGkrKykge1xyXG4gICAgICAgICAgICBvYmoucGFnZSA9IGAke2l9YDtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChBcGkuZ2V0VXNlckFsbEFncmVnYXRlZFdvcmRzKG9iaikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHBhZ2VzKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3b3JkcyA9IFtdO1xyXG4gICAgICAgICAgICBwYWdlcy5mb3JFYWNoKChwYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISgnZXJyb3InIGluIHBhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZHMgPSB3b3Jkcy5jb25jYXQocGFnZVswXS5wYWdpbmF0ZWRSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHdvcmRzID0gd29yZHMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmlkID0gaXRlbS5faWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3Jkcy5yZXZlcnNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9HYW1lc0dldERhdGEnO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2Nzcyc7XHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4vYXBwJztcclxuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xyXG5hcHAuc3RhcnQoKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9